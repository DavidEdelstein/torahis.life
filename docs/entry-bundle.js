!function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=15)}([function(t,e,s){"use strict";var n,i=s(5);!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(n||(n={}));const r={level:3,write(t,...e){},error:(t,...e)=>new Error(`Code ${t}`)},o={enabled:!1,liveLoggingEnabled:!1,liveWriter:null,enter(t,e,s){},leave(){},writeStack(t){},flushAll(t){},enableLiveLogging:function(t){return},disableLiveLogging(){}};const a={};function c(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=a[t];if(void 0!==e)return e;const s=t.length;if(0===s)return a[t]=!1;let n=0;for(let e=0;e<s;++e)if(n=t.charCodeAt(e),0===e&&48===n&&s>1||n<48||n>57)return a[t]=!1;return a[t]=!0}default:return!1}}function h(t){switch(typeof t){case"number":case"bigint":return!0;default:return!1}}function l(t){switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}}const u=function(){let t;!function(t){t[t.none=0]="none",t[t.digit=1]="digit",t[t.upper=2]="upper",t[t.lower=3]="lower"}(t||(t={}));const e=Object.assign(Object.create(null),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0});function s(t){return""===t?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:!0===e[t]?1:0}return function(t,e){const n=t.length;if(0===n)return t;let i,r=!1,o="",a="",c=0,h=t.charAt(0),l=s(h);for(let u=0;u<n;++u)i=c,a=h,c=l,h=t.charAt(u+1),l=s(h),0===c?o.length>0&&(r=!0):(!r&&o.length>0&&2===c&&(r=3===i||3===l),o+=e(a,r),r=!1);return o}}(),d=function(){const t=Object.create(null);function e(t,e){return e?t.toUpperCase():t.toLowerCase()}return function(s){let n=t[s];return void 0===n&&(n=t[s]=u(s,e)),n}}(),p=function(){const t=Object.create(null);return function(e){let s=t[e];return void 0===s&&(s=d(e),s.length>0&&(s=s[0].toUpperCase()+s.slice(1)),t[e]=s),s}}(),f=function(){const t=Object.create(null);function e(t,e){return e?`-${t.toLowerCase()}`:t.toLowerCase()}return function(s){let n=t[s];return void 0===n&&(n=t[s]=u(s,e)),n}}();function b(t){const{length:e}=t,s=Array(e);for(let n=0;n<e;++n)s[n]=t[n];return s}const g={};function m(t){return void 0===g[t]&&(g[t]=0),++g[t]}function v(t,e){return t-e}const y=i.a.emptyArray;function w(t,e,s){if(null==t||t===y)return null==e||e===y?y:s?e.slice(0):e;if(null==e||e===y)return s?t.slice(0):t;const n={},i=s?t.slice(0):t;let r,o=t.length,a=e.length;for(;o-- >0;)n[t[o]]=!0;for(;a-- >0;)r=e[a],void 0===n[r]&&(i.push(r),n[r]=!0);return i}function O(t,e,s){return{configurable:!0,enumerable:s.enumerable,get(){const t=s.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:s.enumerable}),t}}}function k(...t){const e=[];let s=0;const n=t.length;let i,r=0;for(let o=0;o<n;++o)if(i=t[o],void 0!==i){r=i.length;for(let t=0;t<r;++t)e[s++]=i[t]}return e}function C(...t){const e=t.length;let s;for(let n=0;n<e;++n)if(s=t[n],void 0!==s)return s;throw new Error("No default value found")}const j=function(){const t=Function.prototype,e=Object.getPrototypeOf,s=new WeakMap;let n=t,i=0,r=void 0;return function(o){if(r=s.get(o),void 0===r)for(s.set(o,r=[n=o]),i=0;(n=e(n))!==t;)r[++i]=n;return r}}();function S(...t){return Object.assign(Object.create(null),...t)}function x(t){return"object"==typeof t&&null!==t||"function"==typeof t}function T(t){return null==t}const A=function(){const t=new WeakMap;let e=!1,s="",n=0;return function(i){return e=t.get(i),void 0===e&&(s=i.toString(),n=s.length,e=n>=29&&n<=100&&125===s.charCodeAt(n-1)&&s.charCodeAt(n-2)<=32&&93===s.charCodeAt(n-3)&&101===s.charCodeAt(n-4)&&100===s.charCodeAt(n-5)&&111===s.charCodeAt(n-6)&&99===s.charCodeAt(n-7)&&32===s.charCodeAt(n-8)&&101===s.charCodeAt(n-9)&&118===s.charCodeAt(n-10)&&105===s.charCodeAt(n-11)&&116===s.charCodeAt(n-12)&&97===s.charCodeAt(n-13)&&110===s.charCodeAt(n-14)&&88===s.charCodeAt(n-15),t.set(i,e)),e}}(),I=new WeakMap;function V(t,e,s,n,i){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${s}' to be of type ${i}, but got: ${Object.prototype.toString.call(n)} (${String(n)})`)}function $(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function E(t,e,s){let n=I.get(t);if(void 0===n){if(!s)return;n=new Map,I.set(t,n)}let i=n.get(e);if(void 0===i){if(!s)return;i=new Map,n.set(e,i)}return i}function P(t,e,s){const n=E(e,s,!1);return void 0!==n&&n.has(t)}function R(t,e,s){const n=E(e,s,!1);if(void 0!==n)return n.get(t)}function N(t,e,s,n){E(s,n,!0).set(t,e)}function F(t,e){const s=[],n=E(t,e,!1);if(void 0===n)return s;const i=n.keys();let r=0;for(const t of i)s[r]=t,++r;return s}function B(t,e,s,n){if(!x(s))throw V("Metadata.define",[t,e,s,n],"target",s,"Object or Function");return N(t,e,s,$(n))}function L(t,e,s){if(!x(e))throw V("Metadata.has",[t,e,s],"target",e,"Object or Function");return function t(e,s,n){if(P(e,s,n))return!0;const i=Object.getPrototypeOf(s);return null!==i&&t(e,i,n)}(t,e,$(s))}function M(t,e,s){if(!x(e))throw V("Metadata.hasOwn",[t,e,s],"target",e,"Object or Function");return P(t,e,$(s))}function D(t,e,s){if(!x(e))throw V("Metadata.get",[t,e,s],"target",e,"Object or Function");return function t(e,s,n){if(P(e,s,n))return R(e,s,n);const i=Object.getPrototypeOf(s);return null!==i?t(e,i,n):void 0}(t,e,$(s))}function q(t,e,s){if(!x(e))throw V("Metadata.getOwn",[t,e,s],"target",e,"Object or Function");return R(t,e,$(s))}function U(t,e){if(!x(t))throw V("Metadata.getKeys",[t,e],"target",t,"Object or Function");return function t(e,s){const n=F(e,s),i=Object.getPrototypeOf(e);if(null===i)return n;const r=t(i,s),o=n.length;if(0===o)return r;const a=r.length;if(0===a)return n;const c=new Set,h=[];let l,u=0;for(let t=0;t<o;++t)l=n[t],c.has(l)||(c.add(l),h[u]=l,++u);for(let t=0;t<a;++t)l=r[t],c.has(l)||(c.add(l),h[u]=l,++u);return h}(t,$(e))}function _(t,e){if(!x(t))throw V("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return F(t,$(e))}function z(t,e,s){if(!x(e))throw V("Metadata.delete",[t,e,s],"target",e,"Object or Function");return function(t,e,s){const n=E(t,s,!1);return void 0!==n&&n.delete(e)}(e,t,$(s))}const H={define:B,has:L,hasOwn:M,get:D,getOwn:q,getKeys:U,getOwnKeys:_,delete:z};function K(t,e,s){Reflect.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:s})}K(H,"$Internal",I);const W="metadata"in Reflect,Q="decorate"in Reflect,G="defineMetadata"in Reflect,J="hasMetadata"in Reflect,Y="hasOwnMetadata"in Reflect,X="getMetadata"in Reflect,Z="getOwnMetadata"in Reflect,tt="getMetadataKeys"in Reflect,et="getOwnMetadataKeys"in Reflect,st="deleteMetadata"in Reflect;(W||Q||G||J||Y||X||Z||tt||et||st)&&!(W&&Q&&G&&J&&Y&&X&&Z&&tt&&et&&st)&&console.warn("Partial existing Reflect.metadata polyfill found. Working environment cannot be guaranteed. Please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario."),W||K(Reflect,"metadata",(function(t,e){return function(s,n){if(!x(s))throw V("@metadata",[t,e,s,n],"target",s,"Object or Function");N(t,e,s,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(n))}})),Q||K(Reflect,"decorate",(function(t,e,s,n){if(void 0!==s){if(!Array.isArray(t))throw V("Metadata.decorate",[t,e,s,n],"decorators",t,"Array");if(!x(e))throw V("Metadata.decorate",[t,e,s,n],"target",e,"Object or Function");if(!x(n)&&!T(n))throw V("Metadata.decorate",[t,e,s,n],"attributes",n,"Object, Function, null, or undefined");return null===n&&(n=void 0),function(t,e,s,n){for(let i=t.length-1;i>=0;--i){const r=(0,t[i])(e,s,n);if(!T(r)){if(!x(r))throw V("DecorateProperty",[t,e,s,n],"decorated",r,"Object, Function, null, or undefined");n=r}}return n}(t,e,s=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(s),n)}if(!Array.isArray(t))throw V("Metadata.decorate",[t,e,s,n],"decorators",t,"Array");if("function"!=typeof e)throw V("Metadata.decorate",[t,e,s,n],"target",e,"Function");return function(t,e){for(let s=t.length-1;s>=0;--s){const n=(0,t[s])(e);if(!T(n)){if("function"!=typeof n)throw V("DecorateConstructor",[t,e],"decorated",n,"Function, null, or undefined");e=n}}return e}(t,e)})),G||K(Reflect,"defineMetadata",B),J||K(Reflect,"hasMetadata",L),Y||K(Reflect,"hasOwnMetadata",M),X||K(Reflect,"getMetadata",D),Z||K(Reflect,"getOwnMetadata",q),tt||K(Reflect,"getMetadataKeys",U),et||K(Reflect,"getOwnMetadataKeys",_),st||K(Reflect,"deleteMetadata",z);const nt={name:"au:annotation",appendTo(t,e){const s=H.getOwn(nt.name,t);void 0===s?H.define(nt.name,[e],t):s.push(e)},set(t,e,s){H.define(nt.keyFor(e),s,t)},get:(t,e)=>H.getOwn(nt.keyFor(e),t),getKeys(t){let e=H.getOwn(nt.name,t);return void 0===e&&H.define(nt.name,e=[],t),e},isKey:t=>t.startsWith(nt.name),keyFor:(t,e)=>void 0===e?`${nt.name}:${t}`:`${nt.name}:${t}:${e}`},it={name:"au:resource",appendTo(t,e){const s=H.getOwn(it.name,t);void 0===s?H.define(it.name,[e],t):s.push(e)},has:t=>H.hasOwn(it.name,t),getAll(t){const e=H.getOwn(it.name,t);return void 0===e?i.a.emptyArray:e.map(e=>H.getOwn(e,t))},getKeys(t){let e=H.getOwn(it.name,t);return void 0===e&&H.define(it.name,e=[],t),e},isKey:t=>t.startsWith(it.name),keyFor:(t,e)=>void 0===e?`${it.name}:${t}`:`${it.name}:${t}:${e}`},rt={annotation:nt,resource:it},ot=Object.prototype.hasOwnProperty;function at(t,e,s,n){let i=H.getOwn(rt.annotation.keyFor(t),s);return void 0===i?(i=e[t],void 0===i?(i=s[t],void 0!==i&&ot.call(s,t)?i:n()):i):i}function ct(t,e,s){let n=H.getOwn(rt.annotation.keyFor(t),e);return void 0===n?(n=e[t],void 0!==n&&ot.call(e,t)?n:s()):n}function ht(t,e,s){const n=e[t];return void 0===n?s():n}class lt{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:s,key:n}=this;return this.container=this.key=void 0,s.registerResolver(n,new yt(n,t,e))}}function ut(t){const e=t.slice(),s=Object.keys(t),n=s.length;let i;for(let r=0;r<n;++r)i=s[r],c(i)||(e[i]=t[i]);return e}const dt={createContainer:(...t)=>0===t.length?new jt(null):new jt(null).register(...t),getDesignParamtypes:t=>H.getOwn("design:paramtypes",t),getAnnotationParamtypes(t){const e=rt.annotation.keyFor("di:paramtypes");return H.getOwn(e,t)},getOrCreateAnnotationParamTypes(t){const e=rt.annotation.keyFor("di:paramtypes");let s=H.getOwn(e,t);return void 0===s&&(H.define(e,s=[],t),rt.annotation.appendTo(t,e)),s},getDependencies(t){const e=rt.annotation.keyFor("di:dependencies");let s=H.getOwn(e,t);if(void 0===s){const n=t.inject;if(void 0===n){const e=dt.getDesignParamtypes(t),n=dt.getAnnotationParamtypes(t);if(void 0===e)if(void 0===n){const e=Object.getPrototypeOf(t);s="function"==typeof e&&e!==Function.prototype?ut(dt.getDependencies(e)):[]}else s=ut(n);else if(void 0===n)s=ut(e);else{s=ut(e);let t,i=n.length;for(let e=0;e<i;++e)t=n[e],void 0!==t&&(s[e]=t);const r=Object.keys(n);let o;i=r.length;for(let t=0;t<i;++t)o=r[t],c(o)||(s[o]=n[o])}}else s=ut(n);H.define(e,s,t),rt.annotation.appendTo(t,e)}return s},createInterface(t){const e=function(t,s,n){if(null==t)throw r.error(16,e.friendlyName,e);return dt.getOrCreateAnnotationParamTypes(t)[n]=e,t};return e.friendlyName=null==t?"Interface":t,e.noDefault=function(){return e},e.withDefault=function(t){return e.withDefault=function(){throw r.error(17,e)},e.register=function(s,n){return t(new lt(s,null!=n?n:e))},e},e},inject:(...t)=>function(e,s,n){if("number"==typeof n){const s=dt.getOrCreateAnnotationParamTypes(e),i=t[0];void 0!==i&&(s[n]=i)}else if(s){const n=dt.getOrCreateAnnotationParamTypes(e.constructor),i=t[0];void 0!==i&&(n[s]=i)}else if(n){const e=n.value,s=dt.getOrCreateAnnotationParamTypes(e);let i;for(let e=0;e<t.length;++e)i=t[e],void 0!==i&&(s[e]=i)}else{const s=dt.getOrCreateAnnotationParamTypes(e);let n;for(let e=0;e<t.length;++e)n=t[e],void 0!==n&&(s[e]=n)}},transient:t=>(t.register=function(e){return xt.transient(t,t).register(e,t)},t),singleton:t=>(t.register=function(e){return xt.singleton(t,t).register(e,t)},t)},pt=dt.createInterface("IContainer").noDefault(),ft=pt;function bt(t){return function(e){const s=function(t,e,n){dt.inject(s)(t,e,n)};return s.resolve=function(s,n){return t(e,s,n)},s}}const gt=dt.inject;const mt=bt((t,e,s)=>s.getAll(t));bt((t,e,s)=>{let n=null;return()=>(null==n&&(n=s.get(t)),n)}),bt((t,e,s)=>s.has(t,!0)?s.get(t):null);var vt;!function(t){t[t.instance=0]="instance",t[t.singleton=1]="singleton",t[t.transient=2]="transient",t[t.callback=3]="callback",t[t.array=4]="array",t[t.alias=5]="alias"}(vt||(vt={}));class yt{constructor(t,e,s){this.key=t,this.strategy=e,this.state=s}register(t,e){return t.registerResolver(e||this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:{this.strategy=0;const s=t.getFactory(this.state);if(null===s)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return this.state=s.construct(e)}case 2:{const s=t.getFactory(this.state);if(null===s)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return s.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return t.get(this.state);default:throw r.error(6,this.strategy)}}getFactory(t){let e;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return e=t.getResolver(this.state),null==e||void 0===e.getFactory?null:e.getFactory(t);default:return null}}}class wt{constructor(t,e,s){this.Type=t,this.invoker=e,this.dependencies=s,this.transformers=null}construct(t,e){const s=this.transformers;let n=void 0!==e?this.invoker.invokeWithDynamicDependencies(t,this.Type,this.dependencies,e):this.invoker.invoke(t,this.Type,this.dependencies);if(null==s)return n;for(let t=0,e=s.length;t<e;++t)n=s[t](n);return n}registerTransformer(t){return null==this.transformers&&(this.transformers=[]),this.transformers.push(t),!0}}const Ot=function(){function t(t,e,s,n){let i,o=s.length,a=new Array(o);for(;o-- >0;){if(i=s[o],null==i)throw r.error(7,`Index ${o}.`);a[o]=t.get(i)}return void 0!==n&&(a=a.concat(n)),Reflect.construct(e,a)}const e=[{invoke:(t,e)=>new e,invokeWithDynamicDependencies:t},{invoke:(t,e,s)=>new e(t.get(s[0])),invokeWithDynamicDependencies:t},{invoke:(t,e,s)=>new e(t.get(s[0]),t.get(s[1])),invokeWithDynamicDependencies:t},{invoke:(t,e,s)=>new e(t.get(s[0]),t.get(s[1]),t.get(s[2])),invokeWithDynamicDependencies:t},{invoke:(t,e,s)=>new e(t.get(s[0]),t.get(s[1]),t.get(s[2]),t.get(s[3])),invokeWithDynamicDependencies:t},{invoke:(t,e,s)=>new e(t.get(s[0]),t.get(s[1]),t.get(s[2]),t.get(s[3]),t.get(s[4])),invokeWithDynamicDependencies:t}],s={invoke:t,invokeWithDynamicDependencies:t};return function(t){A(t)&&r.write(5,t.name);const n=dt.getDependencies(t),i=e.length>n.length?e[n.length]:s;return new wt(t,i,n)}}(),kt={resolve:(t,e)=>e};function Ct(t){return"function"==typeof t.register}class jt{constructor(t){this.parent=t,this.registerDepth=0,null===t?(this.root=this,this.resolvers=new Map,this.resourceResolvers=Object.create(null)):(this.root=t.root,this.resolvers=new Map,this.resourceResolvers=Object.assign(Object.create(null),this.root.resourceResolvers)),this.resolvers.set(pt,kt)}register(...t){if(100==++this.registerDepth)throw new Error("Unable to autoregister dependency");let e,s,n,i,r;for(let o=0,a=t.length;o<a;++o)if(e=t[o],x(e))if(Ct(e))e.register(this);else if(rt.resource.has(e)){const t=rt.resource.getAll(e);if(1===t.length)t[0].register(this);else{const e=t.length;for(let s=0;s<e;++s)t[s].register(this)}}else if(void 0!==e.prototype)xt.singleton(e,e).register(this);else for(s=Object.keys(e),i=0,r=s.length;i<r;++i)n=e[s[i]],x(n)&&(Ct(n)?n.register(this):this.register(n));return--this.registerDepth,this}registerResolver(t,e){At(t);const s=this.resolvers,n=s.get(t);return null==n?(s.set(t,e),function(t){return"string"==typeof t&&t.indexOf(":")>0}(t)&&(this.resourceResolvers[t]=e)):n instanceof yt&&4===n.strategy?n.state.push(e):s.set(t,new yt(t,4,[n,e])),e}registerTransformer(t,e){const s=this.getResolver(t);if(null==s)return!1;if(s.getFactory){const t=s.getFactory(this);return null!=t&&t.registerTransformer(e)}return!1}getResolver(t,e=!0){if(At(t),void 0!==t.resolve)return t;let s,n=this;for(;null!=n;){if(s=n.resolvers.get(t),null!=s)return s;if(null==n.parent)return e?this.jitRegister(t,n):null;n=n.parent}return null}has(t,e=!1){return!!this.resolvers.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(At(t),void 0!==t.resolve)return t.resolve(this,this);let e,s=this;for(;null!=s;){if(e=s.resolvers.get(t),null!=e)return e.resolve(s,this);if(null==s.parent)return e=this.jitRegister(t,s),e.resolve(s,this);s=s.parent}throw new Error(`Unable to resolve key: ${t}`)}getAll(t){At(t);let e,s=this;for(;null!=s;){if(e=s.resolvers.get(t),null!=e)return It(e,s,this);if(null==this.parent)return i.a.emptyArray;s=s.parent}return i.a.emptyArray}getFactory(t){const e=rt.annotation.keyFor("di:factory");let s=H.getOwn(e,t);return void 0===s&&(H.define(e,s=Ot(t),t),rt.annotation.appendTo(t,e)),s}createChild(){return new jt(this)}jitRegister(t,e){if("function"!=typeof t)throw new Error(`Attempted to jitRegister something that is not a constructor: '${t}'. Did you forget to register this resource?`);if(Ct(t)){const s=t.register(e,t);if(!(s instanceof Object)||null==s.resolve){const s=e.resolvers.get(t);if(null!=s)return s;throw r.error(40)}return s}if(rt.resource.has(t)){const s=rt.resource.getAll(t);if(1===s.length)s[0].register(e);else{const t=s.length;for(let n=0;n<t;++n)s[n].register(e)}const n=e.resolvers.get(t);if(null!=n)return n;throw r.error(40)}{const s=new yt(t,1,t);return e.resolvers.set(t,s),s}}}class St{constructor(t,e){this.key=t,this.params=e}register(t){if(t.has(this.key,!0)){t.get(this.key).register(t,...this.params)}else t.register(...this.params.filter(t=>"object"==typeof t))}}const xt={instance:(t,e)=>new yt(t,0,e),singleton:(t,e)=>new yt(t,1,e),transient:(t,e)=>new yt(t,2,e),callback:(t,e)=>new yt(t,3,e),alias:(t,e)=>new yt(e,5,t),defer:(t,...e)=>new St(t,e)};class Tt{constructor(){this.instance=null}prepare(t){this.instance=t}resolve(t,e){if(void 0===this.instance)throw r.error(50);return this.instance}dispose(){this.instance=null}}function At(t){if(null==t)throw r.error(5)}function It(t,e,s){if(t instanceof yt&&4===t.strategy){const n=t.state;let i=n.length;const r=new Array(i);for(;i--;)r[i]=n[i].resolve(e,s);return r}return[t.resolve(e,s)]}var Vt,$t=s(1);!function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(Vt||(Vt={}));const Et=dt.createInterface("ILogConfig").withDefault(t=>t.instance(new Ft(0,3))),Pt=dt.createInterface("ISink").noDefault(),Rt=dt.createInterface("ILogEventFactory").withDefault(t=>t.singleton(Dt)),Nt=(dt.createInterface("ILogger").withDefault(t=>t.singleton(Ut)),S({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`}));class Ft{constructor(t,e){this.colorOptions=t,this.level=e}}const Bt=function(){const t=[S({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),S({TRC:Nt.grey("TRC"),DBG:Nt.grey("DBG"),INF:Nt.white("INF"),WRN:Nt.yellow("WRN"),ERR:Nt.red("ERR"),FTL:Nt.red("FTL"),QQQ:Nt.grey("???")})];return function(e,s){return e<=0?t[s].TRC:e<=1?t[s].DBG:e<=2?t[s].INF:e<=3?t[s].WRN:e<=4?t[s].ERR:e<=5?t[s].FTL:t[s].QQQ}}();function Lt(t,e){return 0===e?new Date(t).toISOString():Nt.grey(new Date(t).toISOString())}class Mt{constructor(t,e,s,n,i,r){this.severity=t,this.message=e,this.optionalParams=s,this.scope=n,this.colorOptions=i,this.timestamp=r}toString(){const{severity:t,message:e,scope:s,colorOptions:n,timestamp:i}=this;return 0===s.length?`${Lt(i,n)} [${Bt(t,n)}] ${e}`:`${Lt(i,n)} [${Bt(t,n)} ${function(t,e){return 0===e?t.join("."):t.map(Nt.cyan).join(".")}(s,n)}] ${e}`}}let Dt=class{constructor(t){this.config=t}createLogEvent(t,e,s,n){return new Mt(e,s,n,t.scope,this.config.colorOptions,Date.now())}};Dt=Object($t.a)([Object($t.c)(0,Et),Object($t.b)("design:paramtypes",[Object])],Dt);class qt{constructor(t){this.emit=function(e){const s=e.optionalParams;if(void 0===s||0===s.length)switch(e.severity){case 0:case 1:return t.debug(e.toString());case 2:return t.info(e.toString());case 3:return t.warn(e.toString());case 4:case 5:return t.error(e.toString())}else switch(e.severity){case 0:case 1:return t.debug(e.toString(),...s);case 2:return t.info(e.toString(),...s);case 3:return t.warn(e.toString(),...s);case 4:case 5:return t.error(e.toString(),...s)}}}}let Ut=class t{constructor(t,e,s,n=[],i=null){this.config=t,this.factory=e,this.sinks=s,this.scope=n,this.scopedLoggers=Object.create(null),null===i?(this.root=this,this.parent=this):(this.root=i.root,this.parent=i);const r=s.length;let o=0;const a=(t,n,i)=>{const a="function"==typeof n?n():n,c=e.createLogEvent(this,t,a,i);for(o=0;o<r;++o)s[o].emit(c)};this.trace=function(e,...s){t.level<=0&&a(0,e,s)},this.debug=function(e,...s){t.level<=1&&a(1,e,s)},this.info=function(e,...s){t.level<=2&&a(2,e,s)},this.warn=function(e,...s){t.level<=3&&a(3,e,s)},this.error=function(e,...s){t.level<=4&&a(4,e,s)},this.fatal=function(e,...s){t.level<=5&&a(5,e,s)}}scopeTo(e){const s=this.scopedLoggers;let n=s[e];return void 0===n&&(n=s[e]=new t(this.config,this.factory,this.sinks,this.scope.concat(e),this)),n}};Ut=Object($t.a)([Object($t.c)(0,Et),Object($t.c)(1,Rt),Object($t.c)(2,mt(Pt)),Object($t.b)("design:paramtypes",[Object,Object,Array,Array,Object])],Ut);S({create:(t,e=3,s=0)=>S({register:n=>n.register(xt.instance(Et,new Ft(s,e)),xt.instance(Pt,new qt(t)))})});const _t=encodeURIComponent,zt=t=>_t(t).replace("%24","$");function Ht(t,e,s){let n=[];if(null==e)return n;if(Array.isArray(e))for(let i=0,r=e.length;i<r;i++)if(s)n.push(`${zt(t)}=${_t(e[i])}`);else{const s=`${t}[${"object"==typeof e[i]&&null!=e[i]?i:""}]`;n=n.concat(Ht(s,e[i]))}else if("object"!=typeof e||s)n.push(`${zt(t)}=${_t(e)}`);else for(const s in e)n=n.concat(Ht(`${t}[${s}]`,e[s]));return n}function Kt(t,e){if(null==t)return"";const s=[],n=Object.keys(t).sort();let i;for(let r=0,o=n.length;r<o;++r)i=n[r],s.push(...Ht(i,t[i],e));return 0===s.length?"":s.join("&")}function Wt(t,e){return Array.isArray(t)?(t.push(e),t):void 0!==t?[t,e]:e}function Qt(t,e,s){let n=t;const i=e.length-1;let r,o;for(let t=0;t<=i;++t)r=""===e[t]?n.length:e[t],t<i?(o=n[r]&&"object"!=typeof n[r]?[n[r]]:n[r],n=o?n[r]=o:isNaN(e[t+1])?n[r]={}:n[r]=[]):n=n[r]=s}function Gt(t){const e={};if(!t||"string"!=typeof t)return e;let s=t;s.startsWith("?")&&(s=s.slice(1));const n=s.replace(/\+/g," ").split("&");for(let t=0;t<n.length;t++){const s=n[t].split("="),i=decodeURIComponent(s[0]);if(!i)continue;let r=i.split("]["),o=r.length-1;if(r[0].includes("[")&&r[o].endsWith("]")?(r[o]=r[o].replace(/\]$/,""),r=r.shift().split("[").concat(r),o=r.length-1):o=0,s.length>=2){const t=s[1]?decodeURIComponent(s[1]):"";o?Qt(e,r,t):e[i]=Wt(e[i],t)}else e[i]=!0}return e}const Jt=function(){const t=i.a.now,e=[];let s;const n={createTimer:function(n){e.push(n);let i=0,r=0;return{enter:function(){1==++i&&(r=t(),++s[n].topLevelCount);++s[n].totalCount},leave:function(){0==--i&&(s[n].duration+=t()-r)}}},enable:function(){s={};for(const t of e)s[t]={name:t,duration:0,topLevelCount:0,totalCount:0};n.enabled=!0},disable:function(){n.enabled=!1},report:function(t){Object.keys(s).map(t=>s[t]).sort((t,e)=>e.duration-t.duration).forEach(e=>{t(e.name,e.duration,e.topLevelCount,e.totalCount)})},enabled:!1};return n}();class Yt{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}}function Xt(t,e,s){try{t(e,s)}catch(t){r.error(0,t)}}function Zt(t,e){try{t.handle(e)}catch(t){r.error(0,t)}}dt.createInterface("IEventAggregator").withDefault(t=>t.singleton(te));class te{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){let s,n;if(!t)throw r.error(0);if("string"==typeof t){const i=t;if(s=this.eventLookup[i],null!=s)for(s=s.slice(),n=s.length;n--;)Xt(s[n],e,i)}else{const e=t;for(s=this.messageHandlers.slice(),n=s.length;n--;)Zt(s[n],e)}}subscribe(t,e){let s,n;if(!t)throw r.error(0);if("string"==typeof t){const i=t;s=e,void 0===this.eventLookup[i]&&(this.eventLookup[i]=[]),n=this.eventLookup[i]}else s=new Yt(t,e),n=this.messageHandlers;return n.push(s),{dispose(){const t=n.indexOf(s);-1!==t&&n.splice(t,1)}}}subscribeOnce(t,e){const s=this.subscribe(t,(t,n)=>(s.dispose(),e(t,n)));return s}}s.d(e,"l",(function(){return mt})),s.d(e,"a",(function(){return dt})),s.d(e,"b",(function(){return pt})),s.d(e,"v",(function(){return gt})),s.d(e,"c",(function(){return ft})),s.d(e,"i",(function(){return xt})),s.d(e,"d",(function(){return Tt})),s.d(e,"e",(function(){return H})),s.d(e,"n",(function(){return Kt})),s.d(e,"D",(function(){return Gt})),s.d(e,"f",(function(){return i.a})),s.d(e,"j",(function(){return r})),s.d(e,"k",(function(){return o})),s.d(e,"g",(function(){return Jt})),s.d(e,"h",(function(){return rt})),s.d(e,"r",(function(){return at})),s.d(e,"s",(function(){return ct})),s.d(e,"t",(function(){return ht})),s.d(e,"w",(function(){return c})),s.d(e,"o",(function(){return d})),s.d(e,"z",(function(){return f})),s.d(e,"E",(function(){return p})),s.d(e,"F",(function(){return b})),s.d(e,"C",(function(){return m})),s.d(e,"p",(function(){return v})),s.d(e,"B",(function(){return w})),s.d(e,"x",(function(){return h})),s.d(e,"y",(function(){return l})),s.d(e,"m",(function(){return O})),s.d(e,"A",(function(){return k})),s.d(e,"q",(function(){return C})),s.d(e,"u",(function(){return j}))},function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"c",(function(){return i})),s.d(e,"b",(function(){return r}));function n(t,e,s,n){var i,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,s,o):i(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}function i(t,e){return function(s,n){e(s,n,t)}}function r(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}},function(t,e,s){"use strict";var n,i=s(0),r=s(1);function o(){return function(t){const e=t.prototype;e._subscriberFlags=0,e.addSubscriber=c,e.removeSubscriber=u,e.hasSubscriber=m,e.hasSubscribers=f,e.callSubscribers=w,void 0===e.subscribe&&(e.subscribe=c),void 0===e.unsubscribe&&(e.unsubscribe=u)}}function a(){return function(t){const e=t.prototype;e._collectionSubscriberFlags=0,e.addCollectionSubscriber=l,e.removeCollectionSubscriber=p,e.hasCollectionSubscriber=y,e.hasCollectionSubscribers=g,e.callCollectionSubscribers=C,void 0===e.subscribeToCollection&&(e.subscribeToCollection=l),void 0===e.unsubscribeFromCollection&&(e.unsubscribeFromCollection=p)}}function c(t){if(this.hasSubscriber(t))return!1;const e=this._subscriberFlags;return 0==(1&e)?(this._subscriber0=t,this._subscriberFlags|=1):0==(2&e)?(this._subscriber1=t,this._subscriberFlags|=2):0==(4&e)?(this._subscriber2=t,this._subscriberFlags|=4):0==(8&e)?(this._subscribersRest=[t],this._subscriberFlags|=8):this._subscribersRest.push(t),!0}function h(t){if(this.hasProxySubscriber(t))return!1;const e=this._proxySubscriberFlags;return 0==(1&e)?(this._proxySubscriber0=t,this._proxySubscriberFlags|=1):0==(2&e)?(this._proxySubscriber1=t,this._proxySubscriberFlags|=2):0==(4&e)?(this._proxySubscriber2=t,this._proxySubscriberFlags|=4):0==(8&e)?(this._proxySubscribersRest=[t],this._proxySubscriberFlags|=8):this._proxySubscribersRest.push(t),!0}function l(t){if(this.hasCollectionSubscriber(t))return!1;const e=this._collectionSubscriberFlags;return 0==(1&e)?(this._collectionSubscriber0=t,this._collectionSubscriberFlags|=1):0==(2&e)?(this._collectionSubscriber1=t,this._collectionSubscriberFlags|=2):0==(4&e)?(this._collectionSubscriber2=t,this._collectionSubscriberFlags|=4):0==(8&e)?(this._collectionSubscribersRest=[t],this._collectionSubscriberFlags|=8):this._collectionSubscribersRest.push(t),!0}function u(t){const e=this._subscriberFlags;if((1&e)>0&&this._subscriber0===t)return this._subscriber0=void 0,this._subscriberFlags=1^(1|this._subscriberFlags),!0;if((2&e)>0&&this._subscriber1===t)return this._subscriber1=void 0,this._subscriberFlags=2^(2|this._subscriberFlags),!0;if((4&e)>0&&this._subscriber2===t)return this._subscriber2=void 0,this._subscriberFlags=4^(4|this._subscriberFlags),!0;if((8&e)>0){const e=this._subscribersRest;for(let s=0,n=e.length;s<n;++s)if(e[s]===t)return e.splice(s,1),1===n&&(this._subscriberFlags=8^(8|this._subscriberFlags)),!0}return!1}function d(t){const e=this._proxySubscriberFlags;if((1&e)>0&&this._proxySubscriber0===t)return this._proxySubscriber0=void 0,this._proxySubscriberFlags=1^(1|this._proxySubscriberFlags),!0;if((2&e)>0&&this._proxySubscriber1===t)return this._proxySubscriber1=void 0,this._proxySubscriberFlags=2^(2|this._proxySubscriberFlags),!0;if((4&e)>0&&this._proxySubscriber2===t)return this._proxySubscriber2=void 0,this._proxySubscriberFlags=4^(4|this._proxySubscriberFlags),!0;if((8&e)>0){const e=this._proxySubscribersRest;for(let s=0,n=e.length;s<n;++s)if(e[s]===t)return e.splice(s,1),1===n&&(this._proxySubscriberFlags=8^(8|this._proxySubscriberFlags)),!0}return!1}function p(t){const e=this._collectionSubscriberFlags;if((1&e)>0&&this._collectionSubscriber0===t)return this._collectionSubscriber0=void 0,this._collectionSubscriberFlags=1^(1|this._collectionSubscriberFlags),!0;if((2&e)>0&&this._collectionSubscriber1===t)return this._collectionSubscriber1=void 0,this._collectionSubscriberFlags=2^(2|this._collectionSubscriberFlags),!0;if((4&e)>0&&this._collectionSubscriber2===t)return this._collectionSubscriber2=void 0,this._collectionSubscriberFlags=4^(4|this._collectionSubscriberFlags),!0;if((8&e)>0){const e=this._collectionSubscribersRest;for(let s=0,n=e.length;s<n;++s)if(e[s]===t)return e.splice(s,1),1===n&&(this._collectionSubscriberFlags=8^(8|this._collectionSubscriberFlags)),!0}return!1}function f(){return 0!==this._subscriberFlags}function b(){return 0!==this._proxySubscriberFlags}function g(){return 0!==this._collectionSubscriberFlags}function m(t){const e=this._subscriberFlags;if((1&e)>0&&this._subscriber0===t)return!0;if((2&e)>0&&this._subscriber1===t)return!0;if((4&e)>0&&this._subscriber2===t)return!0;if((8&e)>0){const e=this._subscribersRest;for(let s=0,n=e.length;s<n;++s)if(e[s]===t)return!0}return!1}function v(t){const e=this._proxySubscriberFlags;if((1&e)>0&&this._proxySubscriber0===t)return!0;if((2&e)>0&&this._proxySubscriber1===t)return!0;if((4&e)>0&&this._proxySubscriber2===t)return!0;if((8&e)>0){const e=this._proxySubscribersRest;for(let s=0,n=e.length;s<n;++s)if(e[s]===t)return!0}return!1}function y(t){const e=this._collectionSubscriberFlags;if((1&e)>0&&this._collectionSubscriber0===t)return!0;if((2&e)>0&&this._collectionSubscriber1===t)return!0;if((4&e)>0&&this._collectionSubscriber2===t)return!0;if((8&e)>0){const e=this._collectionSubscribersRest;for(let s=0,n=e.length;s<n;++s)if(e[s]===t)return!0}return!1}function w(t,e,s){const n=this._subscriber0,i=this._subscriber1,r=this._subscriber2;let o=this._subscribersRest;if(void 0!==o&&(o=o.slice()),void 0!==n&&O(n,t,e,s,void 0===n.id?0:this[n.id]),void 0!==i&&O(i,t,e,s,void 0===i.id?0:this[i.id]),void 0!==r&&O(r,t,e,s,void 0===r.id?0:this[r.id]),void 0!==o){const{length:n}=o;let i;for(let r=0;r<n;++r)i=o[r],void 0!==i&&O(i,t,e,s,void 0===i.id?0:this[i.id])}}function O(t,e,s,n,i){t.handleChange(e,s,48^(48|n)|i)}function k(t,e,s,n){const i=this._proxySubscriber0,r=this._proxySubscriber1,o=this._proxySubscriber2;let a=this._proxySubscribersRest;if(void 0!==a&&(a=a.slice()),void 0!==i&&i.handleProxyChange(t,e,s,n),void 0!==r&&r.handleProxyChange(t,e,s,n),void 0!==o&&o.handleProxyChange(t,e,s,n),void 0!==a){const{length:i}=a;let r;for(let o=0;o<i;++o)r=a[o],void 0!==r&&r.handleProxyChange(t,e,s,n)}}function C(t,e){const s=this._collectionSubscriber0,n=this._collectionSubscriber1,i=this._collectionSubscriber2;let r=this._collectionSubscribersRest;if(void 0!==r&&(r=r.slice()),void 0!==s&&s.handleCollectionChange(t,e),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==r){const{length:s}=r;let n;for(let i=0;i<s;++i)n=r[i],void 0!==n&&n.handleCollectionChange(t,e)}}const j=new WeakMap;let S=class{constructor(t,e,s){this.proxy=t,this.raw=e,this.key=s,this.inBatch=!1,this.subscribe=this.addSubscriber,this.unsubscribe=this.removeSubscriber,e[s]instanceof Object&&(e[s]=x.getOrCreate(e[s]).proxy)}setValue(t,e){const s=this.raw[this.key];s!==t&&(this.raw[this.key]=t,this.callSubscribers(t,s,18|e))}getValue(){return this.raw[this.key]}flushBatch(t){}};S=Object(r.a)([o(),Object(r.b)("design:paramtypes",[Object,Object,Object])],S);let x=n=class{constructor(t){this.raw=t,this.proxy=new Proxy(t,this),j.set(t,this.proxy),this.subscribers={}}static getProxyOrSelf(t){if(void 0===t.$raw){const e=j.get(t);return void 0===e?t:e}return t}static getRawIfProxy(t){const e=t.$raw;return void 0===e?t:e}static getOrCreate(t,e){let s;if(void 0===t.$raw){const e=j.get(t);s=void 0===e?new n(t):e.$observer}else s=t.$observer;if(void 0===e)return s;let i=s.subscribers[e];if(void 0===i){const n=this.getRawIfProxy(t),r=s.proxy;i=s.subscribers[e]=new S(r,n,e)}return i}static isProxy(t){return void 0!==t.$raw}get(t,e,s){return"$observer"===e?this:"$raw"===e?t:t[e]}set(t,e,s,n){const i=t[e];return i!==s&&(t[e]=s,this.callPropertySubscribers(s,i,e),this.callProxySubscribers(e,s,i,18)),!0}deleteProperty(t,e){const s=t[e];return!!Reflect.deleteProperty(t,e)&&(void 0!==s&&(this.callPropertySubscribers(void 0,s,e),this.callProxySubscribers(e,void 0,s,18)),!0)}defineProperty(t,e,s){const n=t[e];return!!Reflect.defineProperty(t,e,s)&&(s.value!==n&&(this.callPropertySubscribers(s.value,n,e),this.callProxySubscribers(e,s.value,n,18)),!0)}apply(t,e,s=i.f.emptyArray){return Reflect.apply(t,t,s)}subscribe(t,e){if(void 0===e)this.addProxySubscriber(t);else{let s=this.subscribers[e];void 0===s&&(s=this.subscribers[e]=new S(this.proxy,this.raw,e)),s.addSubscriber(t)}}unsubscribe(t,e){if(void 0===e)this.removeProxySubscriber(t);else{const s=this.subscribers[e];void 0!==s&&s.removeSubscriber(t)}}callPropertySubscribers(t,e,s){const n=this.subscribers[s];void 0!==n&&n.callSubscribers(t,e,18)}};var T;x=n=Object(r.a)([function(t){const e=t.prototype;e._proxySubscriberFlags=0,e.addProxySubscriber=h,e.removeProxySubscriber=d,e.hasProxySubscriber=v,e.hasProxySubscribers=b,e.callProxySubscribers=k,void 0===e.subscribeToProxy&&(e.subscribeToProxy=h),void 0===e.unsubscribeFromProxy&&(e.unsubscribeFromProxy=d)},Object(r.b)("design:paramtypes",[Object])],x),function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(T||(T={}));const A=i.a.createInterface("IController").noDefault();var I;!function(t){t[t.insertBefore=1]="insertBefore",t[t.append=2]="append"}(I||(I={}));const V=i.a.createInterface("IViewFactory").noDefault(),$=i.a.createInterface("ILifecycle").withDefault(t=>t.singleton(M));let E=class{constructor(t){this.lifecycle=t,this.depth=0,this.head=void 0,this.tail=void 0}begin(){++this.depth}end(t){void 0===t&&(t=0),0==--this.depth&&this.process(t)}inline(t,e){this.begin(),t(),this.end(e)}add(t){void 0===this.head?this.head=t:(t.prevBound=this.tail,this.tail.nextBound=t),this.tail=t}remove(t){void 0!==t.prevBound&&(t.prevBound.nextBound=t.nextBound),void 0!==t.nextBound&&(t.nextBound.prevBound=t.prevBound),t.prevBound=void 0,t.nextBound=void 0,this.tail===t&&(this.tail=t.prevBound),this.head===t&&(this.head=t.nextBound)}process(t){for(;void 0!==this.head;){let e,s=this.head;this.head=this.tail=void 0;do{s.afterBind(t),e=s.nextBound,s.nextBound=void 0,s.prevBound=void 0,s=e}while(void 0!==s)}}};E=Object(r.a)([Object(r.c)(0,$),Object(r.b)("design:paramtypes",[Object])],E);let P=class{constructor(t){this.lifecycle=t,this.depth=0,this.head=void 0,this.tail=void 0}begin(){++this.depth}end(t){void 0===t&&(t=0),0==--this.depth&&this.process(t)}inline(t,e){this.begin(),t(),this.end(e)}add(t){void 0===this.head?this.head=t:(t.prevUnbound=this.tail,this.tail.nextUnbound=t),this.tail=t}remove(t){void 0!==t.prevUnbound&&(t.prevUnbound.nextUnbound=t.nextUnbound),void 0!==t.nextUnbound&&(t.nextUnbound.prevUnbound=t.prevUnbound),t.prevUnbound=void 0,t.nextUnbound=void 0,this.tail===t&&(this.tail=t.prevUnbound),this.head===t&&(this.head=t.nextUnbound)}process(t){for(;void 0!==this.head;){let e,s=this.head;this.head=this.tail=void 0;do{s.afterUnbind(t),e=s.nextUnbound,s.nextUnbound=void 0,s.prevUnbound=void 0,s=e}while(void 0!==s)}}};P=Object(r.a)([Object(r.c)(0,$),Object(r.b)("design:paramtypes",[Object])],P);let R=class{constructor(t){this.lifecycle=t,this.depth=0,this.head=void 0,this.tail=void 0}begin(){++this.depth}end(t){void 0===t&&(t=0),0==--this.depth&&(this.lifecycle.mount.process(t),this.process(t))}inline(t,e){this.begin(),t(),this.end(e)}add(t){void 0===this.head?this.head=t:(t.prevAttached=this.tail,this.tail.nextAttached=t),this.tail=t}remove(t){void 0!==t.prevAttached&&(t.prevAttached.nextAttached=t.nextAttached),void 0!==t.nextAttached&&(t.nextAttached.prevAttached=t.prevAttached),t.prevAttached=void 0,t.nextAttached=void 0,this.tail===t&&(this.tail=t.prevAttached),this.head===t&&(this.head=t.nextAttached)}process(t){for(;void 0!==this.head;){let e,s=this.head;this.head=this.tail=void 0;do{s.afterAttach(t),e=s.nextAttached,s.nextAttached=void 0,s.prevAttached=void 0,s=e}while(void 0!==s)}}};R=Object(r.a)([Object(r.c)(0,$),Object(r.b)("design:paramtypes",[Object])],R);let N=class{constructor(t){this.lifecycle=t,this.depth=0,this.head=void 0,this.tail=void 0}begin(){++this.depth}end(t){void 0===t&&(t=0),0==--this.depth&&(this.lifecycle.unmount.process(t),this.process(t))}inline(t,e){this.begin(),t(),this.end(e)}add(t){void 0===this.head?this.head=t:(t.prevDetached=this.tail,this.tail.nextDetached=t),this.tail=t}remove(t){void 0!==t.prevDetached&&(t.prevDetached.nextDetached=t.nextDetached),void 0!==t.nextDetached&&(t.nextDetached.prevDetached=t.prevDetached),t.prevDetached=void 0,t.nextDetached=void 0,this.tail===t&&(this.tail=t.prevDetached),this.head===t&&(this.head=t.nextDetached)}process(t){for(;void 0!==this.head;){let e,s=this.head;this.head=this.tail=void 0;do{s.afterDetach(t),e=s.nextDetached,s.nextDetached=void 0,s.prevDetached=void 0,s=e}while(void 0!==s)}}};N=Object(r.a)([Object(r.c)(0,$),Object(r.b)("design:paramtypes",[Object])],N);let F=class{constructor(t){this.lifecycle=t,this.depth=0,this.head=void 0,this.tail=void 0}add(t){void 0===this.head?this.head=t:(t.prevMount=this.tail,this.tail.nextMount=t),this.tail=t}remove(t){void 0!==t.prevMount&&(t.prevMount.nextMount=t.nextMount),void 0!==t.nextMount&&(t.nextMount.prevMount=t.prevMount),t.prevMount=void 0,t.nextMount=void 0,this.tail===t&&(this.tail=t.prevMount),this.head===t&&(this.head=t.nextMount)}process(t){for(;void 0!==this.head;){let e,s=this.head;this.head=this.tail=void 0;do{s.mount(t),e=s.nextMount,s.nextMount=void 0,s.prevMount=void 0,s=e}while(void 0!==s)}}};F=Object(r.a)([Object(r.c)(0,$),Object(r.b)("design:paramtypes",[Object])],F);let B=class{constructor(t){this.lifecycle=t,this.head=void 0,this.tail=void 0}add(t){void 0===this.head?this.head=t:(t.prevUnmount=this.tail,this.tail.nextUnmount=t),this.tail=t}remove(t){void 0!==t.prevUnmount&&(t.prevUnmount.nextUnmount=t.nextUnmount),void 0!==t.nextUnmount&&(t.nextUnmount.prevUnmount=t.prevUnmount),t.prevUnmount=void 0,t.nextUnmount=void 0,this.tail===t&&(this.tail=t.prevUnmount),this.head===t&&(this.head=t.nextUnmount)}process(t){for(;void 0!==this.head;){let e,s=this.head;this.head=this.tail=void 0;do{s.unmount(t),e=s.nextUnmount,s.nextUnmount=void 0,s.prevUnmount=void 0,s=e}while(void 0!==s)}}};B=Object(r.a)([Object(r.c)(0,$),Object(r.b)("design:paramtypes",[Object])],B);let L=class{constructor(t){this.lifecycle=t,this.queue=[],this.depth=0}begin(){++this.depth}end(t){void 0===t&&(t=0),0==--this.depth&&this.process(t)}inline(t,e){this.begin(),t(),this.end(e)}add(t){this.queue.push(t)}remove(t){const e=this.queue.indexOf(t);e>-1&&this.queue.splice(e,1)}process(t){for(t|=512;this.queue.length>0;){const e=this.queue.slice();this.queue=[];const{length:s}=e;for(let n=0;n<s;++n)e[n].flushBatch(t)}}};L=Object(r.a)([Object(r.c)(0,$),Object(r.b)("design:paramtypes",[Object])],L);class M{constructor(){this.batch=new L(this),this.mount=new F(this),this.unmount=new B(this),this.afterBind=new E(this),this.afterUnbind=new P(this),this.afterAttach=new R(this),this.afterDetach=new N(this)}static register(t){return i.i.singleton($,this).register(t)}}let D=class{constructor(t,e,s,n){this.lifecycle=t,this.obj=s,this.propertyKey=n,this.currentValue=void 0,this.oldValue=void 0,this.inBatch=!1,this.observing=!1,this.persistentFlags=2080374799&e}getValue(){return this.currentValue}setValue(t,e){if(this.observing){const s=this.currentValue;this.currentValue=t,0===this.lifecycle.batch.depth?this.callSubscribers(t,s,this.persistentFlags|e):this.inBatch||(this.inBatch=!0,this.oldValue=s,this.lifecycle.batch.add(this))}else this.obj[this.propertyKey]=t}flushBatch(t){this.inBatch=!1;const e=this.currentValue,s=this.oldValue;this.oldValue=e,this.callSubscribers(e,s,this.persistentFlags|t)}subscribe(t){!1===this.observing&&(this.observing=!0,this.currentValue=this.obj[this.propertyKey],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})||i.j.write(1,this.propertyKey,this.obj)),this.addSubscriber(t)}};var q;D=Object(r.a)([o(),Object(r.b)("design:paramtypes",[Object,Number,Object,String])],D),function(t){t[t.NilScope=250]="NilScope",t[t.NilOverrideContext=252]="NilOverrideContext",t[t.NilParentScope=253]="NilParentScope"}(q||(q={}));const U=Object.freeze({});class _{getOrCreate(t,e,s,n){return void 0===this[n]&&(this[n]=new D(t,e,s,n)),this[n]}}class z{constructor(t,e){if(this.$synthetic=!0,void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this[e]=t[e])}static create(t,e,s){const n=new z(e,s);return 2&t?x.getOrCreate(n).proxy:n}static get(t,e,s,n,r){if(null==t)throw i.j.error(250);let o=t.overrideContext;if(s>0){for(;s>0;){if(null==o.parentOverrideContext)return;s--,o=o.parentOverrideContext}return e in o?o:o.bindingContext}for(;o&&!(e in o)&&!(o.bindingContext&&e in o.bindingContext);)o=o.parentOverrideContext;if(o)return e in o?o:o.bindingContext;if((67108864&n)>0){let i=t.parentScope;for(;null!==i;){if(i.scopeParts.includes(r)){const r=this.get(i,e,s,-67108865&n|4194304);return r===U?t.bindingContext||t.overrideContext:r}i=i.parentScope}if(null===i)throw new Error(`No target scope could be found for part "${r}"`)}return 4194304&n?U:t.bindingContext||t.overrideContext}getObservers(t){return null==this.$observers&&(this.$observers=new _),this.$observers}}class H{constructor(t,e,s){this.parentScope=t,this.scopeParts=i.f.emptyArray,this.bindingContext=e,this.overrideContext=s}static create(t,e,s){return new H(null,e,null==s?K.create(t,e,s):s)}static fromOverride(t,e){if(null==e)throw i.j.error(252);return new H(null,e.bindingContext,e)}static fromParent(t,e,s){if(null==e)throw i.j.error(253);return new H(e,s,K.create(t,s,e.overrideContext))}}class K{constructor(t,e){this.$synthetic=!0,this.bindingContext=t,this.parentOverrideContext=e}static create(t,e,s){return new K(e,void 0===s?null:s)}getObservers(){return void 0===this.$observers&&(this.$observers=new _),this.$observers}}const W=i.a.createInterface("ISignaler").withDefault(t=>t.singleton(Q));class Q{constructor(){this.signals=Object.create(null)}dispatchSignal(t,e){const s=this.signals[t];if(void 0!==s)for(const t of s.keys())t.handleChange(void 0,void 0,16|e)}addSignalListener(t,e){const s=this.signals,n=s[t];void 0===n?s[t]=new Set([e]):n.add(e)}removeSignalListener(t,e){const s=this.signals[t];s&&s.delete(e)}}var G;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.callBinding="rh",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk"}(G||(G={}));const J=new WeakMap;function Y(t,e){if(t===e)return t;if(void 0===t)return e;if(void 0===e)return t;let s=J.get(t);void 0===s&&J.set(t,s=new WeakMap);let n=s.get(e);return void 0===n&&s.set(e,n={...t,...e}),n}const X=i.a.createInterface("ITargetedInstruction").noDefault();class Z{constructor(t){this.hasCreate="create"in t,this.hasBeforeCompile="beforeCompile"in t,this.hasAfterCompile="afterCompile"in t,this.hasAfterCompileChildren="afterCompileChildren"in t,this.hasBeforeBind="beforeBind"in t,this.hasAfterBind="afterBind"in t,this.hasBeforeUnbind="beforeUnbind"in t,this.hasAfterUnbind="afterUnbind"in t,this.hasBeforeAttach="beforeAttach"in t,this.hasAfterAttach="afterAttach"in t,this.hasBeforeDetach="beforeDetach"in t,this.hasAfterDetach="afterDetach"in t,this.hasCaching="caching"in t}}function tt(t,e,s,n){for(let r=0,o=t.length;r<o;++r)i.i.alias(s,e.keyFrom(t[r])).register(n)}Z.none=new Z({});Array.prototype.slice;const et=[],st=[];let nt=-1;function it(t){if(t===nt){nt+=5;const e=et.length=st.length=nt+1;for(let s=t+1;s<e;++s)et[s]=`_observer${s}`,st[s]=`_observerVersion${s}`}}function rt(t){const e=null==this.observerSlots?0:this.observerSlots;let s=e;for(;s--&&this[et[s]]!==t;);if(-1===s){for(s=0;this[et[s]];)s++;this[et[s]]=t,t.subscribe(this),t[this.id]|=16,s===e&&(this.observerSlots=s+1)}null==this.version&&(this.version=0),this[st[s]]=this.version,it(s)}function ot(t,e,s){const n=this.observerLocator.getObserver(t,e,s);this.addObserver(n)}function at(t){const e=this.observerSlots;let s,n;if(!0===t)for(let t=0;t<e;++t)s=et[t],n=this[s],null!=n&&(this[s]=void 0,n.unsubscribe(this),n[this.id]&=-17);else{const t=this.version;for(let i=0;i<e;++i)this[st[i]]!==t&&(s=et[i],n=this[s],null!=n&&(this[s]=void 0,n.unsubscribe(this),n[this.id]&=-17))}}function ct(t){const e=t.prototype;return Object.prototype.hasOwnProperty.call(e,"observeProperty")||(e.observeProperty=ot),Object.prototype.hasOwnProperty.call(e,"unobserve")||(e.unobserve=at),Object.prototype.hasOwnProperty.call(e,"addObserver")||(e.addObserver=rt),t}function ht(t){return null==t?ct:ct(t)}it(-1);let lt=0;var ut;function dt(t){return function(e){return gt.define(t,e)}}ht.assignIdTo=t=>{t.id=++lt},function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(ut||(ut={}));class pt{constructor(t,e,s,n,i){this.Type=t,this.name=e,this.aliases=s,this.key=n,this.strategy=i}static create(t,e){let s,n;"string"==typeof t?(s=t,n={name:s}):(s=t.name,n=t);const r=Object.getPrototypeOf(e)===bt;return new pt(e,Object(i.q)(gt.getAnnotation(e,"name"),s),Object(i.A)(gt.getAnnotation(e,"aliases"),n.aliases,e.aliases),gt.keyFrom(s),Object(i.r)("strategy",n,e,()=>r?2:1))}register(t){const{Type:e,key:s,aliases:n,strategy:r}=this;switch(r){case 1:i.i.singleton(s,e).register(t);break;case 2:i.i.instance(s,new ft(t,e)).register(t)}i.i.alias(s,e).register(t),tt(n,gt,s,t)}}class ft{constructor(t,e){this.container=t,this.Type=e,this.deps=i.a.getDependencies(e)}construct(t,e){const s=this.container,n=this.deps;switch(n.length){case 0:case 1:case 2:return new this.Type(t,e);case 3:return new this.Type(s.get(n[0]),t,e);case 4:return new this.Type(s.get(n[0]),s.get(n[1]),t,e);default:return new this.Type(...n.map(t=>s.get(t)),t,e)}}}let bt=class{constructor(t,e){let s;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)s=t.interceptor,t.interceptor=this,t=s}get id(){return this.binding.id}get observerLocator(){return this.binding.observerLocator}get locator(){return this.binding.locator}get $scope(){return this.binding.$scope}get part(){return this.binding.part}get $state(){return this.binding.$state}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,s){this.binding.handleChange(t,e,s)}$bind(t,e,s){this.binding.$bind(t,e,s)}$unbind(t){this.binding.$unbind(t)}};bt=Object(r.a)([ht,Object(r.b)("design:paramtypes",[Object,Object])],bt);const gt={name:i.h.resource.keyFor("binding-behavior"),keyFrom:t=>`${gt.name}:${t}`,isType:t=>"function"==typeof t&&i.e.hasOwn(gt.name,t),define(t,e){const s=pt.create(t,e);return i.e.define(gt.name,s,s.Type),i.e.define(gt.name,s,s),i.h.resource.appendTo(e,gt.name),s.Type},getDefinition(t){const e=i.e.getOwn(gt.name,t);if(void 0===e)throw new Error(`No definition found for type ${t.name}`);return e},annotate(t,e,s){i.e.define(i.h.annotation.keyFor(e),s,t)},getAnnotation:(t,e)=>i.e.getOwn(i.h.annotation.keyFor(e),t)};function mt(t){return function(e){return yt.define(t,e)}}class vt{constructor(t,e,s,n){this.Type=t,this.name=e,this.aliases=s,this.key=n}static create(t,e){let s,n;return"string"==typeof t?(s=t,n={name:s}):(s=t.name,n=t),new vt(e,Object(i.q)(yt.getAnnotation(e,"name"),s),Object(i.A)(yt.getAnnotation(e,"aliases"),n.aliases,e.aliases),yt.keyFrom(s))}register(t){const{Type:e,key:s,aliases:n}=this;i.i.singleton(s,e).register(t),i.i.alias(s,e).register(t),tt(n,yt,s,t)}}const yt={name:i.h.resource.keyFor("value-converter"),keyFrom:t=>`${yt.name}:${t}`,isType:t=>"function"==typeof t&&i.e.hasOwn(yt.name,t),define(t,e){const s=vt.create(t,e);return i.e.define(yt.name,s,s.Type),i.e.define(yt.name,s,s),i.h.resource.appendTo(e,yt.name),s.Type},getDefinition(t){const e=i.e.getOwn(yt.name,t);if(void 0===e)throw new Error(`No definition found for type ${t.name}`);return e},annotate(t,e,s){i.e.define(i.h.annotation.keyFor(e),s,t)},getAnnotation:(t,e)=>i.e.getOwn(i.h.annotation.keyFor(e),t)};function wt(t){return 2048==(2048&t.$kind)}function Ot(t){return 4096==(4096&t.$kind)}var kt;!function(t){t[t.NoLocator=202]="NoLocator",t[t.NoBehaviorFound=203]="NoBehaviorFound",t[t.BehaviorAlreadyApplied=204]="BehaviorAlreadyApplied",t[t.NoConverterFound=205]="NoConverterFound",t[t.NoBinding=206]="NoBinding",t[t.NotAFunction=207]="NotAFunction",t[t.UnknownOperator=208]="UnknownOperator",t[t.NilScope=250]="NilScope"}(kt||(kt={}));class Ct{constructor(t){this.value=t}evaluate(t,e,s,n){return this.value}}class jt{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=38962,this.behaviorKey=gt.keyFrom(e)}evaluate(t,e,s,n){return this.expression.evaluate(t,e,s,n)}assign(t,e,s,n,i){return this.expression.assign(t,e,s,n,i)}connect(t,e,s,n){this.expression.connect(t,e,s,n)}bind(t,e,s){if(null==e)throw i.j.error(250,this);if(!s)throw i.j.error(206,this);const n=s.locator;if(!n)throw i.j.error(202,this);wt(this.expression)&&this.expression.bind(t,e,s);const r=this.behaviorKey,o=n.get(r);if(!o)throw i.j.error(203,this);o instanceof ft||(void 0===s[r]?(s[r]=o,o.bind.call(o,t,e,s,...Gt(t,e,n,this.args))):i.j.write(204,this))}unbind(t,e,s){const n=this.behaviorKey;void 0!==s[n]&&(s[n].unbind(t,e,s),s[n]=void 0),Ot(this.expression)&&this.expression.unbind(t,e,s)}accept(t){return t.visitBindingBehavior(this)}}class St{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind=36913,this.converterKey=yt.keyFrom(e)}evaluate(t,e,s,n){if(!s)throw i.j.error(202,this);const r=s.get(this.converterKey);if(!r)throw i.j.error(205,this);if("toView"in r){const i=this.args,o=i.length,a=Array(o+1);a[0]=this.expression.evaluate(t,e,s,n);for(let r=0;r<o;++r)a[r+1]=i[r].evaluate(t,e,s,n);return r.toView.call(r,...a)}return this.expression.evaluate(t,e,s,n)}assign(t,e,s,n,r){if(!s)throw i.j.error(202,this);const o=s.get(this.converterKey);if(!o)throw i.j.error(205,this);return"fromView"in o&&(n=o.fromView.call(o,n,...Gt(t,e,s,this.args))),this.expression.assign(t,e,s,n,r)}connect(t,e,s,n){if(null==e)throw i.j.error(250,this);if(!s)throw i.j.error(206,this);const r=s.locator;if(!r)throw i.j.error(202,this);this.expression.connect(t,e,s,n);const o=this.args;for(let i=0,r=o.length;i<r;++i)o[i].connect(t,e,s,n);const a=r.get(this.converterKey);if(!a)throw i.j.error(205,this);const c=a.signals;if(void 0===c)return;const h=r.get(W);for(let t=0,e=c.length;t<e;++t)h.addSignalListener(c[t],s)}unbind(t,e,s){const n=s.locator,i=n.get(this.converterKey).signals;if(void 0===i)return;const r=n.get(W);for(let t=0,e=i.length;t<e;++t)r.removeSignalListener(i[t],s)}accept(t){return t.visitValueConverter(this)}}class xt{constructor(t,e){this.target=t,this.value=e,this.$kind=8208}evaluate(t,e,s,n){return this.target.assign(t,e,s,this.value.evaluate(t,e,s),n)}connect(t,e,s,n){}assign(t,e,s,n,i){return this.value.assign(t,e,s,n,i),this.target.assign(t,e,s,n,i)}accept(t){return t.visitAssign(this)}}class Tt{constructor(t,e,s){this.condition=t,this.yes=e,this.no=s,this.$kind=63}evaluate(t,e,s,n){return this.condition.evaluate(t,e,s,n)?this.yes.evaluate(t,e,s,n):this.no.evaluate(t,e,s,n)}assign(t,e,s,n,i){}connect(t,e,s,n){this.condition.evaluate(t,e,null,n)?(this.condition.connect(t,e,s,n),this.yes.connect(t,e,s,n)):(this.condition.connect(t,e,s,n),this.no.connect(t,e,s,n))}accept(t){return t.visitConditional(this)}}class At{constructor(t=0){this.ancestor=t,this.$kind=1793}evaluate(t,e,s,n){if(null==e)throw i.j.error(250,this);if((67108864&t)>0){let t=e.parentScope;for(;null!==t;)t.scopeParts.includes(n)||(t=t.parentScope);if(null===t)throw new Error(`No target scope cold be found for part "${n}"`)}let r=e.overrideContext,o=this.ancestor;for(;o--&&r;)r=r.parentOverrideContext;return o<1&&r?r.bindingContext:void 0}assign(t,e,s,n,i){}connect(t,e,s,n){}accept(t){return t.visitAccessThis(this)}}At.$this=new At(0),At.$parent=new At(1);class It{constructor(t,e=0){this.name=t,this.ancestor=e,this.$kind=10082}evaluate(t,e,s,n){const i=z.get(e,this.name,this.ancestor,t,n)[this.name];return 4&t?i:null==i?"":i}assign(t,e,s,n,i){const r=z.get(e,this.name,this.ancestor,t,i);if(r instanceof Object)return void 0!==r.$observers&&void 0!==r.$observers[this.name]?(r.$observers[this.name].setValue(n,t),n):r[this.name]=n}connect(t,e,s,n){const i=z.get(e,this.name,this.ancestor,t,n);s.observeProperty(t,i,this.name)}accept(t){return t.visitAccessScope(this)}}class Vt{constructor(t,e){this.object=t,this.name=e,this.$kind=9323}evaluate(t,e,s,n){const i=this.object.evaluate(t,e,s,n);return 4&t?null==i?i:i[this.name]:i?i[this.name]:""}assign(t,e,s,n,i){const r=this.object.evaluate(t,e,s,i);return r instanceof Object?void 0!==r.$observers&&void 0!==r.$observers[this.name]?r.$observers[this.name].setValue(n,t):r[this.name]=n:this.object.assign(t,e,s,{[this.name]:n}),n}connect(t,e,s,n){const i=this.object.evaluate(t,e,null,n);0==(134217728&t)&&this.object.connect(t,e,s,n),i instanceof Object&&s.observeProperty(t,i,this.name)}accept(t){return t.visitAccessMember(this)}}class $t{constructor(t,e){this.object=t,this.key=e,this.$kind=9324}evaluate(t,e,s,n){const i=this.object.evaluate(t,e,s,n);if(i instanceof Object){return i[this.key.evaluate(t,e,s,n)]}}assign(t,e,s,n,i){return this.object.evaluate(t,e,s,i)[this.key.evaluate(t,e,s,i)]=n}connect(t,e,s,n){const i=this.object.evaluate(t,e,null,n);if(0==(134217728&t)&&this.object.connect(t,e,s,n),i instanceof Object){this.key.connect(t,e,s,n);const r=this.key.evaluate(t,e,null,n);s.observeProperty(t,i,r)}}accept(t){return t.visitAccessKeyed(this)}}class Et{constructor(t,e,s=0){this.name=t,this.args=e,this.ancestor=s,this.$kind=1448}evaluate(t,e,s,n){const i=Gt(t,e,s,this.args,n),r=z.get(e,this.name,this.ancestor,t,n),o=Jt(t,r,this.name);if(o)return o.apply(r,i)}assign(t,e,s,n,i){}connect(t,e,s,n){const i=this.args;for(let r=0,o=i.length;r<o;++r)i[r].connect(t,e,s,n)}accept(t){return t.visitCallScope(this)}}class Pt{constructor(t,e,s){this.object=t,this.name=e,this.args=s,this.$kind=1161}evaluate(t,e,s,n){const i=this.object.evaluate(t,e,s,n),r=Gt(t,e,s,this.args,n),o=Jt(t,i,this.name);if(o)return o.apply(i,r)}assign(t,e,s,n,i){}connect(t,e,s,n){const i=this.object.evaluate(t,e,null,n);if(0==(134217728&t)&&this.object.connect(t,e,s,n),Jt(-2097153&t,i,this.name)){const i=this.args;for(let r=0,o=i.length;r<o;++r)i[r].connect(t,e,s,n)}}accept(t){return t.visitCallMember(this)}}class Rt{constructor(t,e){this.func=t,this.args=e,this.$kind=1162}evaluate(t,e,s,n){const r=this.func.evaluate(t,e,s,n);if("function"==typeof r)return r(...Gt(t,e,s,this.args,n));if(2097152&t||null!=r)throw i.j.error(207,this)}assign(t,e,s,n,i){}connect(t,e,s,n){const i=this.func.evaluate(t,e,null,n);if(this.func.connect(t,e,s,n),"function"==typeof i){const i=this.args;for(let r=0,o=i.length;r<o;++r)i[r].connect(t,e,s,n)}}accept(t){return t.visitCallFunction(this)}}class Nt{constructor(t,e,s){this.operation=t,this.left=e,this.right=s,this.$kind=46,this.evaluate=this[t]}evaluate(t,e,s,n){throw i.j.error(208,this)}assign(t,e,s,n,i){}connect(t,e,s,n){this.left.connect(t,e,s,n),this.right.connect(t,e,s,n)}"&&"(t,e,s,n){return this.left.evaluate(t,e,s,n)&&this.right.evaluate(t,e,s,n)}"||"(t,e,s,n){return this.left.evaluate(t,e,s,n)||this.right.evaluate(t,e,s,n)}"=="(t,e,s,n){return this.left.evaluate(t,e,s,n)==this.right.evaluate(t,e,s,n)}"==="(t,e,s,n){return this.left.evaluate(t,e,s,n)===this.right.evaluate(t,e,s,n)}"!="(t,e,s,n){return this.left.evaluate(t,e,s,n)!=this.right.evaluate(t,e,s,n)}"!=="(t,e,s,n){return this.left.evaluate(t,e,s,n)!==this.right.evaluate(t,e,s,n)}instanceof(t,e,s,n){const i=this.right.evaluate(t,e,s,n);return"function"==typeof i&&this.left.evaluate(t,e,s,n)instanceof i}in(t,e,s,n){const i=this.right.evaluate(t,e,s,n);return i instanceof Object&&this.left.evaluate(t,e,s,n)in i}"+"(t,e,s,n){const r=this.left.evaluate(t,e,s,n),o=this.right.evaluate(t,e,s,n);if((4&t)>0)return r+o;if(!r||!o){if(Object(i.x)(r)||Object(i.x)(o))return(r||0)+(o||0);if(Object(i.y)(r)||Object(i.y)(o))return(r||"")+(o||"")}return r+o}"-"(t,e,s,n){return this.left.evaluate(t,e,s,n)-this.right.evaluate(t,e,s,n)}"*"(t,e,s,n){return this.left.evaluate(t,e,s,n)*this.right.evaluate(t,e,s,n)}"/"(t,e,s,n){return this.left.evaluate(t,e,s,n)/this.right.evaluate(t,e,s,n)}"%"(t,e,s,n){return this.left.evaluate(t,e,s,n)%this.right.evaluate(t,e,s,n)}"<"(t,e,s,n){return this.left.evaluate(t,e,s,n)<this.right.evaluate(t,e,s,n)}">"(t,e,s,n){return this.left.evaluate(t,e,s,n)>this.right.evaluate(t,e,s,n)}"<="(t,e,s,n){return this.left.evaluate(t,e,s,n)<=this.right.evaluate(t,e,s,n)}">="(t,e,s,n){return this.left.evaluate(t,e,s,n)>=this.right.evaluate(t,e,s,n)}accept(t){return t.visitBinary(this)}}class Ft{constructor(t,e){this.operation=t,this.expression=e,this.$kind=39,this.evaluate=this[t]}evaluate(t,e,s,n){throw i.j.error(208,this)}assign(t,e,s,n,i){}connect(t,e,s,n){this.expression.connect(t,e,s,n)}void(t,e,s,n){this.expression.evaluate(t,e,s,n)}typeof(t,e,s,n){return typeof this.expression.evaluate(4|t,e,s,n)}"!"(t,e,s,n){return!this.expression.evaluate(t,e,s,n)}"-"(t,e,s,n){return-this.expression.evaluate(t,e,s,n)}"+"(t,e,s,n){return+this.expression.evaluate(t,e,s,n)}accept(t){return t.visitUnary(this)}}class Bt{constructor(t){this.value=t,this.$kind=17925}evaluate(t,e,s,n){return this.value}assign(t,e,s,n,i){}connect(t,e,s,n){}accept(t){return t.visitPrimitiveLiteral(this)}}Bt.$undefined=new Bt(void 0),Bt.$null=new Bt(null),Bt.$true=new Bt(!0),Bt.$false=new Bt(!1),Bt.$empty=new Bt("");class Lt{constructor(t){this.parts=t,this.$kind=51}evaluate(t,e,s,n){const i=this.parts;let r,o="";for(let a=0,c=i.length;a<c;++a)r=i[a].evaluate(t,e,s,n),null!=r&&(o+=r);return o}assign(t,e,s,n,i){}connect(t,e,s,n){for(let i=0,r=this.parts.length;i<r;++i)this.parts[i].connect(t,e,s,n)}accept(t){return t.visitHtmlLiteral(this)}}class Mt{constructor(t){this.elements=t,this.$kind=17955}evaluate(t,e,s,n){const i=this.elements,r=i.length,o=Array(r);for(let a=0;a<r;++a)o[a]=i[a].evaluate(t,e,s,n);return o}assign(t,e,s,n,i){}connect(t,e,s,n){const i=this.elements;for(let r=0,o=i.length;r<o;++r)i[r].connect(t,e,s,n)}accept(t){return t.visitArrayLiteral(this)}}Mt.$empty=new Mt(i.f.emptyArray);class Dt{constructor(t,e){this.keys=t,this.values=e,this.$kind=17956}evaluate(t,e,s,n){const i={},r=this.keys,o=this.values;for(let a=0,c=r.length;a<c;++a)i[r[a]]=o[a].evaluate(t,e,s,n);return i}assign(t,e,s,n,i){}connect(t,e,s,n){const i=this.keys,r=this.values;for(let o=0,a=i.length;o<a;++o)r[o].connect(t,e,s,n)}accept(t){return t.visitObjectLiteral(this)}}Dt.$empty=new Dt(i.f.emptyArray,i.f.emptyArray);class qt{constructor(t,e=i.f.emptyArray){this.cooked=t,this.expressions=e,this.$kind=17958}evaluate(t,e,s,n){const i=this.expressions,r=this.cooked;let o=r[0];for(let a=0,c=i.length;a<c;++a)o+=i[a].evaluate(t,e,s,n),o+=r[a+1];return o}assign(t,e,s,n,i){}connect(t,e,s,n){const i=this.expressions;for(let r=0,o=i.length;r<o;++r)i[r].connect(t,e,s,n),r++}accept(t){return t.visitTemplate(this)}}qt.$empty=new qt([""]);class Ut{constructor(t,e,s,n=i.f.emptyArray){this.cooked=t,this.func=s,this.expressions=n,this.$kind=1197,t.raw=e}evaluate(t,e,s,n){const r=this.expressions,o=r.length,a=Array(o);for(let i=0,c=o;i<c;++i)a[i]=r[i].evaluate(t,e,s,n);const c=this.func.evaluate(t,e,s,n);if("function"!=typeof c)throw i.j.error(207,this);return c(this.cooked,...a)}assign(t,e,s,n,i){}connect(t,e,s,n){const i=this.expressions;for(let n=0,r=i.length;n<r;++n)i[n].connect(t,e,s);this.func.connect(t,e,s)}accept(t){return t.visitTaggedTemplate(this)}}class _t{constructor(t){this.elements=t,this.$kind=65556}evaluate(t,e,s,n){}assign(t,e,s,n,i){}connect(t,e,s,n){}accept(t){return t.visitArrayBindingPattern(this)}}class zt{constructor(t,e){this.keys=t,this.values=e,this.$kind=65557}evaluate(t,e,s,n){}assign(t,e,s,n,i){}connect(t,e,s,n){}accept(t){return t.visitObjectBindingPattern(this)}}class Ht{constructor(t){this.name=t,this.$kind=65558}evaluate(t,e,s,n){return this.name}connect(t,e,s,n){}accept(t){return t.visitBindingIdentifier(this)}}const Kt=Object.prototype.toString;class Wt{constructor(t,e){this.declaration=t,this.iterable=e,this.$kind=6199}evaluate(t,e,s,n){return this.iterable.evaluate(t,e,s,n)}assign(t,e,s,n,i){}count(t,e){switch(Kt.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw i.j.error(0)}}iterate(t,e,s){switch(Kt.call(e)){case"[object Array]":return Yt(8388608|t,e,s);case"[object Map]":return function(t,e,s){const n=Array(e.size);let i=-1;for(const t of e.entries())n[++i]=t;Yt(-8388609&t,n,s)}(8388608|t,e,s);case"[object Set]":return function(t,e,s){const n=Array(e.size);let i=-1;for(const t of e.keys())n[++i]=t;Yt(-8388609&t,n,s)}(8388608|t,e,s);case"[object Number]":return function(t,e,s){const n=Array(e);for(let t=0;t<e;++t)n[t]=t;Yt(-8388609&t,n,s)}(8388608|t,e,s);case"[object Null]":case"[object Undefined]":return;default:throw i.j.error(0)}}connect(t,e,s,n){this.declaration.connect(t,e,s,n),this.iterable.connect(t,e,s,n)}bind(t,e,s){wt(this.iterable)&&this.iterable.bind(t,e,s)}unbind(t,e,s){Ot(this.iterable)&&this.iterable.unbind(t,e,s)}accept(t){return t.visitForOfStatement(this)}}class Qt{constructor(t,e=i.f.emptyArray){this.parts=t,this.expressions=e,this.$kind=24,this.isMulti=e.length>1,this.firstExpression=e[0]}evaluate(t,e,s,n){if(this.isMulti){const i=this.expressions,r=this.parts;let o=r[0];for(let a=0,c=i.length;a<c;++a)o+=i[a].evaluate(t,e,s,n),o+=r[a+1];return o}{const i=this.parts;return`${i[0]}${this.firstExpression.evaluate(t,e,s,n)}${i[1]}`}}assign(t,e,s,n,i){}connect(t,e,s,n){}accept(t){return t.visitInterpolation(this)}}function Gt(t,e,s,n,i){const r=n.length,o=Array(r);for(let a=0;a<r;++a)o[a]=n[a].evaluate(t,e,s,i);return o}function Jt(t,e,s){const n=null==e?null:e[s];if("function"==typeof n)return n;if(!(2097152&t)&&null==n)return null;throw i.j.error(207,e,s,n)}function Yt(t,e,s){if(8388610==(8388610&t)){const t=x.getRawIfProxy(e),n=t.length;let i,r=0;for(;r<n;++r)i=t[r],i instanceof Object&&(i=t[r]=x.getOrCreate(i).proxy),s(t,r,i)}else for(let t=0,n=e.length;t<n;++t)s(e,t,e[t])}var Xt,Zt;!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(Xt||(Xt={})),function(t){t[t.getterSetter=1]="getterSetter",t[t.proxies=2]="proxies"}(Zt||(Zt={}));var te,ee,se,ne,ie,re;function oe(t=0){const e=Array(t);let s=0;for(;s<t;)e[s]=s++;return e.deletedItems=[],e.isIndexMap=!0,e}!function(t){t[t.none=0]="none",t[t.isBinding=1]="isBinding",t[t.isUnbinding=2]="isUnbinding",t[t.isBound=4]="isBound",t[t.isBoundOrBinding=5]="isBoundOrBinding",t[t.isBoundOrUnbinding=6]="isBoundOrUnbinding",t[t.isAttaching=8]="isAttaching",t[t.isDetaching=16]="isDetaching",t[t.isAttached=32]="isAttached",t[t.isAttachedOrAttaching=40]="isAttachedOrAttaching",t[t.isAttachedOrDetaching=48]="isAttachedOrDetaching",t[t.isMounted=64]="isMounted",t[t.hasLockedScope=256]="hasLockedScope",t[t.canBeCached=512]="canBeCached"}(te||(te={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=2080374799]="persistentBindingFlags",t[t.allowParentScopeTraversal=67108864]="allowParentScopeTraversal",t[t.observeLeafPropertiesOnly=134217728]="observeLeafPropertiesOnly",t[t.targetObserverFlags=805306383]="targetObserverFlags",t[t.noTargetObserverQueue=268435456]="noTargetObserverQueue",t[t.persistentTargetObserverQueue=536870912]="persistentTargetObserverQueue",t[t.secondaryExpression=1073741824]="secondaryExpression",t[t.bindingStrategy=15]="bindingStrategy",t[t.getterSetterStrategy=1]="getterSetterStrategy",t[t.proxyStrategy=2]="proxyStrategy",t[t.isStrictBindingStrategy=4]="isStrictBindingStrategy",t[t.update=48]="update",t[t.updateTargetInstance=16]="updateTargetInstance",t[t.updateSourceExpression=32]="updateSourceExpression",t[t.from=524224]="from",t[t.fromFlush=960]="fromFlush",t[t.fromAsyncFlush=64]="fromAsyncFlush",t[t.fromSyncFlush=128]="fromSyncFlush",t[t.fromTick=256]="fromTick",t[t.fromBatch=512]="fromBatch",t[t.fromStartTask=1024]="fromStartTask",t[t.fromStopTask=2048]="fromStopTask",t[t.fromBind=4096]="fromBind",t[t.fromUnbind=8192]="fromUnbind",t[t.fromAttach=16384]="fromAttach",t[t.fromDetach=32768]="fromDetach",t[t.fromCache=65536]="fromCache",t[t.fromDOMEvent=131072]="fromDOMEvent",t[t.fromLifecycleTask=262144]="fromLifecycleTask",t[t.allowPublishRoundtrip=524288]="allowPublishRoundtrip",t[t.isPublishing=1048576]="isPublishing",t[t.mustEvaluate=2097152]="mustEvaluate",t[t.isTraversingParentScope=4194304]="isTraversingParentScope",t[t.isOriginalArray=8388608]="isOriginalArray",t[t.isCollectionMutation=16777216]="isCollectionMutation",t[t.reorderNodes=33554432]="reorderNodes"}(ee||(ee={})),function(t){t[t.Connects=32]="Connects",t[t.Observes=64]="Observes",t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation"}(se||(se={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(ne||(ne={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(ie||(ie={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(re||(re={}));let ae=class{constructor(t){this.obj=t,this.currentValue=t.length}getValue(){return this.obj.length}setValue(t,e){const{currentValue:s}=this;t!==s&&(this.currentValue=t,this.callSubscribers(t,s,16|e))}};ae=Object(r.a)([o(),Object(r.b)("design:paramtypes",[Array])],ae);const ce=new WeakMap;function he(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function le(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function ue(t,e,s,n,i){let r,o,a,c,h,l,u;for(l=s+1;l<n;l++){for(r=t[l],o=e[l],u=l-1;u>=s&&(a=t[u],c=e[u],h=i(a,r),h>0);u--)t[u+1]=a,e[u+1]=c;t[u+1]=r,e[u+1]=o}}function de(t,e,s,n,i){let r,o,a,c,h,l,u,d,p,f,b,g,m,v,y,w,O,k,C,j=0,S=0;for(;;){if(n-s<=10)return void ue(t,e,s,n,i);j=s+(n-s>>1),r=t[s],c=e[s],o=t[n-1],h=e[n-1],a=t[j],l=e[j],u=i(r,o),u>0&&(f=r,b=c,r=o,c=h,o=f,h=b),d=i(r,a),d>=0?(f=r,b=c,r=a,c=l,a=o,l=h,o=f,h=b):(p=i(o,a),p>0&&(f=o,b=h,o=a,h=l,a=f,l=b)),t[s]=r,e[s]=c,t[n-1]=a,e[n-1]=l,g=o,m=h,v=s+1,y=n-1,t[j]=t[v],e[j]=e[v],t[v]=g,e[v]=m;t:for(S=v+1;S<y;S++)if(w=t[S],O=e[S],k=i(w,g),k<0)t[S]=t[v],e[S]=e[v],t[v]=w,e[v]=O,v++;else if(k>0){do{if(y--,y==S)break t;C=t[y],k=i(C,g)}while(k>0);t[S]=t[y],e[S]=e[y],t[y]=w,e[y]=O,k<0&&(w=t[S],O=e[S],t[S]=t[v],e[S]=e[v],t[v]=w,e[v]=O,v++)}n-y<v-s?(de(t,e,y,n,i),n=v):(de(t,e,s,v,i),s=y)}}const pe=Array.prototype,fe=pe.push,be=pe.unshift,ge=pe.pop,me=pe.shift,ve=pe.splice,ye=pe.reverse,we=pe.sort,Oe=["push","unshift","pop","shift","splice","reverse","sort"],ke={push:function(...t){let e=this;void 0!==e.$raw&&(e=e.$raw);const s=ce.get(e);if(void 0===s)return fe.apply(e,t);const n=e.length,i=t.length;if(0===i)return n;e.length=s.indexMap.length=n+i;let r=n;for(;r<e.length;)e[r]=t[r-n],s.indexMap[r]=-2,r++;return s.notify(),e.length},unshift:function(...t){let e=this;void 0!==e.$raw&&(e=e.$raw);const s=ce.get(e);if(void 0===s)return be.apply(e,t);const n=t.length,i=new Array(n);let r=0;for(;r<n;)i[r++]=-2;be.apply(s.indexMap,i);const o=be.apply(e,t);return s.notify(),o},pop:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=ce.get(t);if(void 0===e)return ge.call(t);const s=e.indexMap,n=ge.call(t),i=s.length-1;return s[i]>-1&&s.deletedItems.push(s[i]),ge.call(s),e.notify(),n},shift:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=ce.get(t);if(void 0===e)return me.call(t);const s=e.indexMap,n=me.call(t);return s[0]>-1&&s.deletedItems.push(s[0]),me.call(s),e.notify(),n},splice:function(...t){const e=t[0],s=t[1];let n=this;void 0!==n.$raw&&(n=n.$raw);const i=ce.get(n);if(void 0===i)return ve.apply(n,t);const r=this.length,o=0|e,a=o<0?Math.max(r+o,0):Math.min(o,r),c=i.indexMap,h=t.length,l=0===h?0:1===h?r-a:s;if(l>0){let t=a;const e=t+l;for(;t<e;)c[t]>-1&&c.deletedItems.push(c[t]),t++}if(h>2){const t=h-2,n=new Array(t);let i=0;for(;i<t;)n[i++]=-2;ve.call(c,e,s,...n)}else ve.apply(c,t);const u=ve.apply(n,t);return i.notify(),u},reverse:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=ce.get(t);if(void 0===e)return ye.call(t),this;const s=t.length,n=s/2|0;let i=0;for(;i!==n;){const n=s-i-1,r=t[i],o=e.indexMap[i],a=t[n],c=e.indexMap[n];t[i]=a,e.indexMap[i]=c,t[n]=r,e.indexMap[n]=o,i++}return e.notify(),this},sort:function(t){let e=this;void 0!==e.$raw&&(e=e.$raw);const s=ce.get(e);if(void 0===s)return we.call(e,t),this;const n=e.length;if(n<2)return this;de(e,s.indexMap,0,n,le);let i=0;for(;i<n&&void 0!==e[i];)i++;return void 0!==t&&"function"==typeof t||(t=he),de(e,s.indexMap,0,i,t),s.notify(),this}},Ce={writable:!0,enumerable:!1,configurable:!0},je=Reflect.defineProperty;for(const t of Oe)je(ke[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Se=!1;let xe=class{constructor(t,e,s){Se||(Se=!0,function(){for(const t of Oe)!0!==pe[t].observing&&je(pe,t,{...Ce,value:ke[t]})}()),this.inBatch=!1,this.indexObservers={},this.collection=s,this.persistentFlags=2080374799&t,this.indexMap=oe(s.length),this.lifecycle=e,this.lengthObserver=void 0,ce.set(s,this)}notify(){this.lifecycle.batch.depth>0?this.inBatch||(this.inBatch=!0,this.lifecycle.batch.add(this)):this.flushBatch(0)}getLengthObserver(){return void 0===this.lengthObserver&&(this.lengthObserver=new ae(this.collection)),this.lengthObserver}getIndexObserver(t){return this.getOrCreateIndexObserver(t)}flushBatch(t){this.inBatch=!1;const e=this.indexMap,s=this.collection.length;this.indexMap=oe(s),this.callCollectionSubscribers(e,16|this.persistentFlags),void 0!==this.lengthObserver&&this.lengthObserver.setValue(s,16)}addIndexObserver(t){this.addCollectionSubscriber(t)}removeIndexObserver(t){this.removeCollectionSubscriber(t)}getOrCreateIndexObserver(t){const e=this.indexObservers;let s=e[t];return void 0===s&&(s=e[t]=new Te(this,t)),s}};xe=Object(r.a)([a(),Object(r.b)("design:paramtypes",[Number,Object,Object])],xe);let Te=class{constructor(t,e){this.owner=t,this.index=e,this.subscriberCount=0,this.currentValue=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const s=this.owner,n=this.index,i=s.indexMap;i[n]>-1&&i.deletedItems.push(i[n]),i[n]=-2,s.collection[n]=t,s.notify()}handleCollectionChange(t,e){const s=this.index;if(t[s]===s)return;const n=this.currentValue,i=this.currentValue=this.getValue();n!==i&&this.callSubscribers(i,n,e)}subscribe(t){this.addSubscriber(t)&&1==++this.subscriberCount&&this.owner.addIndexObserver(this)}unsubscribe(t){this.removeSubscriber(t)&&0==--this.subscriberCount&&this.owner.removeIndexObserver(this)}};function Ae(t,e,s){const n=ce.get(s);return void 0===n?new xe(t,e,s):n}Te=Object(r.a)([o(),Object(r.b)("design:paramtypes",[xe,Number])],Te);const Ie={static:!1,volatile:!1};let Ve=class{constructor(t,e,s){this.obj=t,this.propertyKey=e,this.descriptor=s,this.currentValue=void 0,this.oldValue=void 0,this.observing=!1}setValue(t){this.descriptor.set.call(this.obj,t),this.currentValue!==t&&(this.oldValue=this.currentValue,this.currentValue=t,this.callSubscribers(t,this.oldValue,16))}subscribe(t){this.observing||this.convertProperty(),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t)}convertProperty(){this.observing=!0,this.currentValue=this.obj[this.propertyKey];Reflect.defineProperty(this.obj,this.propertyKey,{set:t=>{this.setValue(t)},get:this.descriptor.get})}};Ve=Object(r.a)([o(),Object(r.b)("design:paramtypes",[Object,String,Object])],Ve);let $e=class{constructor(t,e,s,n,i,r){this.overrides=e,this.obj=s,this.propertyKey=n,this.descriptor=i,this.currentValue=void 0,this.oldValue=void 0,this.propertyDeps=[],this.collectionDeps=[],this.subscriberCount=0,this.isCollecting=!1,this.proxy=new Proxy(s,Pe(t,r,this));Reflect.defineProperty(s,n,{get:()=>this.getValue(),set:i.set})}addPropertyDep(t){this.propertyDeps.includes(t)||this.propertyDeps.push(t)}addCollectionDep(t){this.collectionDeps.includes(t)||this.collectionDeps.push(t)}getValue(){return this.subscriberCount>0||this.isCollecting?this.currentValue=Reflect.apply(this.descriptor.get,this.proxy,i.f.emptyArray):this.currentValue=Reflect.apply(this.descriptor.get,this.obj,i.f.emptyArray),this.currentValue}subscribe(t){this.addSubscriber(t),1==++this.subscriberCount&&this.getValueAndCollectDependencies(!0)}unsubscribe(t){this.removeSubscriber(t),0==--this.subscriberCount&&this.unsubscribeAllDependencies()}handleChange(){const t=this.currentValue,e=this.getValueAndCollectDependencies(!1);t!==e&&this.callSubscribers(e,t,16)}handleCollectionChange(){const t=this.currentValue,e=this.getValueAndCollectDependencies(!1);t!==e&&this.callSubscribers(e,t,16)}getValueAndCollectDependencies(t){const e=!this.overrides.static||t;return e&&(this.unsubscribeAllDependencies(),this.isCollecting=!0),this.currentValue=this.getValue(),e&&(this.propertyDeps.forEach(t=>{t.subscribe(this)}),this.collectionDeps.forEach(t=>{t.subscribeToCollection(this)}),this.isCollecting=!1),this.currentValue}doNotCollect(t,e,s){return!this.isCollecting||"$observers"===e||"$synthetic"===e||"constructor"===e}unsubscribeAllDependencies(){this.propertyDeps.forEach(t=>{t.unsubscribe(this)}),this.propertyDeps.length=0,this.collectionDeps.forEach(t=>{t.unsubscribeFromCollection(this)}),this.collectionDeps.length=0}};$e=Object(r.a)([o(),Object(r.b)("design:paramtypes",[Number,Object,Object,String,Object,Object])],$e);const Ee=Object.prototype.toString;function Pe(t,e,s){return{get:function(n,r,o){if(s.doNotCollect(n,r,o))return Reflect.get(n,r,o);switch(Ee.call(n)){case"[object Array]":if("length"===r||Object(i.w)(r))return s.addCollectionDep(e.getArrayObserver(t,n)),Re(t,n,r,e,s);break;case"[object Map]":if("size"===r)return s.addCollectionDep(e.getMapObserver(t,n)),Reflect.get(n,r,n);break;case"[object Set]":if("size"===r)return s.addCollectionDep(e.getSetObserver(t,n)),Reflect.get(n,r,n)}return s.addPropertyDep(e.getObserver(t,n,r)),Re(t,n,r,e,s)}}}function Re(t,e,s,n,i){const r=Reflect.get(e,s,e);return"object"!=typeof r||"function"==typeof r||null===r?r:new Proxy(r,Pe(t,n,i))}const Ne={forceUpdateInterval:10,now:i.f.now},{enter:Fe,leave:Be,trace:Le}={enter:function(t,e){},leave:function(t,e){},trace:function(t,e){}},Me=i.a.createInterface("IClock").withDefault(t=>t.instance(qe));class De{constructor(t){const{now:e,forceUpdateInterval:s}={...Ne,...t};this.now=function(t=!1){return e()}}static register(t){return i.i.singleton(Me,this).register(t)}}const qe=new De;var Ue;!function(t){t[t.microTask=0]="microTask",t[t.render=1]="render",t[t.macroTask=2]="macroTask",t[t.postRender=3]="postRender",t[t.idle=4]="idle"}(Ue||(Ue={}));const _e=i.a.createInterface("IScheduler").noDefault(),ze=function(){let t=void 0,e=void 0;function s(s,n){t=s,e=n}return function(){const n=new Promise(s);return n.resolve=t,n.reject=e,t=void 0,e=void 0,n}}(),He={delay:0,preempt:!1,priority:1,persistent:!1,reusable:!0};class Ke{constructor({clock:t,priority:e,scheduler:s}){this.processingSize=0,this.processingHead=void 0,this.processingTail=void 0,this.pendingSize=0,this.pendingHead=void 0,this.pendingTail=void 0,this.delayedSize=0,this.delayedHead=void 0,this.delayedTail=void 0,this.flushRequested=!1,this.yieldPromise=void 0,this.taskPool=[],this.taskPoolSize=0,this.lastRequest=0,this.microTaskRequestFlushTask=null,this.priority=e,this.scheduler=s,this.clock=t}get isEmpty(){return 0===this.processingSize&&0===this.pendingSize&&0===this.delayedSize}flush(){for(Fe(this,"flush"),null!==this.microTaskRequestFlushTask&&(this.microTaskRequestFlushTask.cancel(),this.microTaskRequestFlushTask=null),this.clock.now(!0),this.flushRequested=!1,this.pendingSize>0&&this.movePendingToProcessing(),this.delayedSize>0&&this.moveDelayedToProcessing();this.processingSize>0;)this.processingHead.run();if(this.pendingSize>0&&this.movePendingToProcessing(),this.delayedSize>0&&this.moveDelayedToProcessing(),this.processingSize>0?this.requestFlush():this.delayedSize>0&&(this.priority<=0?this.microTaskRequestFlushTask=this.scheduler.getTaskQueue(2).queueTask(this.requestFlush):this.requestFlush()),void 0!==this.yieldPromise){let t=!0,e=this.processingHead;for(;void 0!==e;){if(!e.persistent){t=!1;break}e=e.next}if(t)for(e=this.pendingHead;void 0!==e;){if(!e.persistent){t=!1;break}e=e.next}if(t)for(e=this.delayedHead;void 0!==e;){if(!e.persistent){t=!1;break}e=e.next}if(t){const t=this.yieldPromise;this.yieldPromise=void 0,t.resolve()}}Be(this,"flush")}cancel(){Fe(this,"cancel"),null!==this.microTaskRequestFlushTask&&(this.microTaskRequestFlushTask.cancel(),this.microTaskRequestFlushTask=null),this.scheduler.cancelFlush(this),this.flushRequested=!1,Be(this,"cancel")}yield(){return Fe(this,"yield"),0===this.processingSize&&0===this.pendingSize&&0===this.delayedSize?(Be(this,"yield empty"),Promise.resolve()):(void 0===this.yieldPromise&&(this.yieldPromise=ze()),Be(this,"yield task"),this.yieldPromise)}queueTask(t,e){Fe(this,"queueTask");const{delay:s,preempt:n,persistent:i,reusable:r}={...He,...e};if(n){if(s>0)throw new Error("Invalid arguments: preempt cannot be combined with a greater-than-zero delay");if(i)throw new Error("Invalid arguments: preempt cannot be combined with persistent")}if(i&&0===this.priority)throw new Error("Invalid arguments: cannot queue persistent tasks on the micro task queue");0===this.processingSize&&this.requestFlush();const o=this.clock.now();let a;if(r){const e=this.taskPool,c=this.taskPoolSize-1;c>=0?(a=e[c],e[c]=void 0,this.taskPoolSize=c,a.reuse(o,s,n,i,t)):a=new Ge(this,o,o+s,n,i,r,t)}else a=new Ge(this,o,o+s,n,i,r,t);return n?0==this.processingSize++?this.processingHead=this.processingTail=a:this.processingTail=(a.prev=this.processingTail).next=a:0===s?0==this.pendingSize++?this.pendingHead=this.pendingTail=a:this.pendingTail=(a.prev=this.pendingTail).next=a:0==this.delayedSize++?this.delayedHead=this.delayedTail=a:this.delayedTail=(a.prev=this.delayedTail).next=a,Be(this,"queueTask"),a}take(t){if(Fe(this,"take"),"pending"!==t.status)throw Be(this,"take error"),new Error("Can only take pending tasks.");0===this.processingSize&&this.requestFlush(),t.taskQueue.remove(t),t.preempt?this.addToProcessing(t):t.queueTime<=this.clock.now()?this.addToPending(t):this.addToDelayed(t),Be(this,"take")}remove(t){if(Fe(this,"remove"),t.preempt)return this.removeFromProcessing(t),void Be(this,"remove processing fast");if(t.queueTime>this.clock.now())return this.removeFromDelayed(t),void Be(this,"remove delayed fast");let e=this.processingHead;for(;void 0!==e;){if(e===t)return this.removeFromProcessing(t),void Be(this,"remove processing slow");e=e.next}for(e=this.pendingHead;void 0!==e;){if(e===t)return this.removeFromPending(t),void Be(this,"remove pending slow");e=e.next}for(e=this.delayedHead;void 0!==e;){if(e===t)return this.removeFromDelayed(t),void Be(this,"remove delayed slow");e=e.next}throw Be(this,"remove error"),new Error(`Task #${t.id} could not be found`)}returnToPool(t){Le(this,"returnToPool"),this.taskPool[this.taskPoolSize++]=t}resetPersistentTask(t){Fe(this,"resetPersistentTask"),t.reset(this.clock.now()),t.createdTime===t.queueTime?0==this.pendingSize++?(this.pendingHead=this.pendingTail=t,t.prev=t.next=void 0):(this.pendingTail=(t.prev=this.pendingTail).next=t,t.next=void 0):0==this.delayedSize++?(this.delayedHead=this.delayedTail=t,t.prev=t.next=void 0):(this.delayedTail=(t.prev=this.delayedTail).next=t,t.next=void 0),Be(this,"resetPersistentTask")}finish(t){Fe(this,"finish"),void 0!==t.next&&(t.next.prev=t.prev),void 0!==t.prev&&(t.prev.next=t.next),Be(this,"finish")}removeFromProcessing(t){Fe(this,"removeFromProcessing"),this.processingHead===t&&(this.processingHead=t.next),this.processingTail===t&&(this.processingTail=t.prev),--this.processingSize,this.finish(t),Be(this,"removeFromProcessing")}removeFromPending(t){Fe(this,"removeFromPending"),this.pendingHead===t&&(this.pendingHead=t.next),this.pendingTail===t&&(this.pendingTail=t.prev),--this.pendingSize,this.finish(t),Be(this,"removeFromPending")}removeFromDelayed(t){Fe(this,"removeFromDelayed"),this.delayedHead===t&&(this.delayedHead=t.next),this.delayedTail===t&&(this.delayedTail=t.prev),--this.delayedSize,this.finish(t),Be(this,"removeFromDelayed")}addToProcessing(t){Fe(this,"addToProcessing"),0==this.processingSize++?this.processingHead=this.processingTail=t:this.processingTail=(t.prev=this.processingTail).next=t,Be(this,"addToProcessing")}addToPending(t){Fe(this,"addToPending"),0==this.pendingSize++?this.pendingHead=this.pendingTail=t:this.pendingTail=(t.prev=this.pendingTail).next=t,Be(this,"addToPending")}addToDelayed(t){Fe(this,"addToDelayed"),0==this.delayedSize++?this.delayedHead=this.delayedTail=t:this.delayedTail=(t.prev=this.delayedTail).next=t,Be(this,"addToDelayed")}movePendingToProcessing(){Fe(this,"movePendingToProcessing"),0===this.processingSize?(this.processingHead=this.pendingHead,this.processingTail=this.pendingTail,this.processingSize=this.pendingSize):(this.processingTail.next=this.pendingHead,this.processingTail=this.pendingTail,this.processingSize+=this.pendingSize),this.pendingHead=void 0,this.pendingTail=void 0,this.pendingSize=0,Be(this,"movePendingToProcessing")}moveDelayedToProcessing(){Fe(this,"moveDelayedToProcessing");const t=this.clock.now(!0),e=this.delayedHead;if(e.queueTime<=t){let s=e,n=s.next,i=1;for(;void 0!==n&&n.queueTime<=t;)s=n,n=s.next,++i;0===this.processingSize?(this.processingHead=e,this.processingTail=s,this.processingSize=i):(this.processingTail.next=e,this.processingTail=s,this.processingSize+=i),this.delayedHead=n,this.delayedSize-=i,0===this.delayedSize&&(this.delayedTail=void 0)}Be(this,"moveDelayedToProcessing")}requestFlush(){Fe(this,"requestFlush"),null!==this.microTaskRequestFlushTask&&(this.microTaskRequestFlushTask.cancel(),this.microTaskRequestFlushTask=null),this.flushRequested||(this.flushRequested=!0,this.lastRequest=this.clock.now(!0),this.scheduler.requestFlush(this)),Be(this,"requestFlush")}}Object(r.a)([i.m,Object(r.b)("design:type",Function),Object(r.b)("design:paramtypes",[]),Object(r.b)("design:returntype",void 0)],Ke.prototype,"requestFlush",null);class We extends Error{constructor(t){super("Task was canceled."),this.task=t}}let Qe=0;class Ge{constructor(t,e,s,n,i,r,o){this.taskQueue=t,this.createdTime=e,this.queueTime=s,this.preempt=n,this.persistent=i,this.reusable=r,this.callback=o,this.id=++Qe,this.next=void 0,this.prev=void 0,this.resolve=void 0,this.reject=void 0,this._result=void 0,this._status="pending",Le(this,"constructor"),this.priority=t.priority}get result(){const t=this._result;if(void 0===t)switch(this._status){case"pending":{const t=this._result=ze();return this.resolve=t.resolve,this.reject=t.reject,t}case"running":throw new Error("Trying to await task from within task will cause a deadlock.");case"completed":return this._result=Promise.resolve();case"canceled":return this._result=Promise.reject(new We(this))}return t}get status(){return this._status}run(){if(Fe(this,"run"),"pending"!==this._status)throw Be(this,"run error"),new Error(`Cannot run task in ${this._status} state`);const t=this.persistent,e=this.reusable,s=this.taskQueue,n=this.callback,i=this.resolve,r=this.reject,o=this.createdTime;s.remove(this),this._status="running";try{const r=n(qe.now()-o);this.persistent?s.resetPersistentTask(this):this._status=t?"canceled":"completed",void 0!==i&&i(r)}catch(t){if(void 0===r)throw t;r(t)}finally{this.persistent||(this.dispose(),e&&s.returnToPool(this)),Be(this,"run finally")}}cancel(){if(Fe(this,"cancel"),"pending"===this._status){const t=this.taskQueue,e=this.reusable,s=this.reject;return t.remove(this),t.isEmpty&&t.cancel(),this._status="canceled",void 0!==s&&s(new We(this)),this.dispose(),e&&t.returnToPool(this),Be(this,"cancel true =pending"),!0}return"running"===this._status&&this.persistent?(this.persistent=!1,Be(this,"cancel true =running+persistent"),!0):(Be(this,"cancel false"),!1)}reset(t){Fe(this,"reset");const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this._status="pending",this.resolve=void 0,this.reject=void 0,this._result=void 0,Be(this,"reset")}reuse(t,e,s,n,i){Fe(this,"reuse"),this.createdTime=t,this.queueTime=t+e,this.preempt=s,this.persistent=n,this.callback=i,this._status="pending",Be(this,"reuse")}dispose(){Le(this,"dispose"),this.prev=void 0,this.next=void 0,this.callback=void 0,this.resolve=void 0,this.reject=void 0,this._result=void 0}}const Je=i.a.createInterface("IDirtyChecker").withDefault(t=>t.singleton(Xe)),Ye={framesPerCheck:6,disabled:!1,warn:!0,throw:!1,resetToDefault(){this.framesPerCheck=6,this.disabled=!1,this.warn=!0,this.throw=!1}};let Xe=class{constructor(t){this.scheduler=t,this.tracked=[],this.task=null,this.elapsedFrames=0}createProperty(t,e){if(Ye.throw)throw i.j.error(800,e);return Ye.warn&&i.j.write(801,e),new Ze(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.task=this.scheduler.queueRenderTask(()=>this.check(),{persistent:!0}))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.task.cancel(),this.task=null)}check(t){if(Ye.disabled)return;if(++this.elapsedFrames<Ye.framesPerCheck)return;this.elapsedFrames=0;const e=this.tracked,s=e.length;let n,i=0;for(;i<s;++i)n=e[i],n.isDirty()&&n.flush(256)}};Xe=Object(r.a)([Object(r.c)(0,_e),Object(r.b)("design:paramtypes",[Object])],Xe);let Ze=class{constructor(t,e,s){this.dirtyChecker=t,this.obj=e,this.propertyKey=s}isDirty(){return this.oldValue!==this.obj[this.propertyKey]}flush(t){const e=this.oldValue,s=this.obj[this.propertyKey];this.callSubscribers(s,e,16|t),this.oldValue=s}subscribe(t){this.hasSubscribers()||(this.oldValue=this.obj[this.propertyKey],this.dirtyChecker.addProperty(this)),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t)&&!this.hasSubscribers()&&this.dirtyChecker.removeProperty(this)}};Ze=Object(r.a)([o(),Object(r.b)("design:paramtypes",[Object,Object,String])],Ze);let ts=class{constructor(t){this.obj=t,this.currentValue=t.size}getValue(){return this.obj.size}setValue(t,e){const{currentValue:s}=this;t!==s&&(this.currentValue=t,this.callSubscribers(t,s,16|e))}};ts=Object(r.a)([o(),Object(r.b)("design:paramtypes",[Object])],ts);const es=new WeakMap,ss=Map.prototype,ns=ss.set,is=ss.clear,rs=ss.delete,os=["set","clear","delete"],as={set:function(t,e){let s=this;void 0!==s.$raw&&(s=s.$raw);const n=es.get(s);if(void 0===n)return ns.call(s,t,e),this;const i=s.get(t),r=s.size;if(ns.call(s,t,e),s.size===r){let e=0;for(const r of s.entries()){if(r[0]===t)return r[1]!==i&&(n.indexMap.deletedItems.push(n.indexMap[e]),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[r]=-2,n.notify(),this},clear:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=es.get(t);if(void 0===e)return is.call(t);if(t.size>0){const s=e.indexMap;let n=0;for(const e of t.keys())s[n]>-1&&s.deletedItems.push(s[n]),n++;is.call(t),s.length=0,e.notify()}},delete:function(t){let e=this;void 0!==e.$raw&&(e=e.$raw);const s=es.get(e);if(void 0===s)return rs.call(e,t);if(0===e.size)return!1;let n=0;const i=s.indexMap;for(const r of e.keys()){if(r===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const r=rs.call(e,t);return!0===r&&s.notify(),r}++n}return!1}},cs={writable:!0,enumerable:!1,configurable:!0},hs=Reflect.defineProperty;for(const t of os)hs(as[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ls=!1;Array.prototype.slice;let us=class{constructor(t,e,s){ls||(ls=!0,function(){for(const t of os)!0!==ss[t].observing&&hs(ss,t,{...cs,value:as[t]})}()),this.inBatch=!1,this.collection=s,this.persistentFlags=2080374799&t,this.indexMap=oe(s.size),this.lifecycle=e,this.lengthObserver=void 0,es.set(s,this)}notify(){this.lifecycle.batch.depth>0?this.inBatch||(this.inBatch=!0,this.lifecycle.batch.add(this)):this.flushBatch(0)}getLengthObserver(){return void 0===this.lengthObserver&&(this.lengthObserver=new ts(this.collection)),this.lengthObserver}getIndexObserver(t){throw new Error("Map index observation not supported")}flushBatch(t){this.inBatch=!1;const{indexMap:e,collection:s}=this,{size:n}=s;this.indexMap=oe(n),this.callCollectionSubscribers(e,16|this.persistentFlags),void 0!==this.lengthObserver&&this.lengthObserver.setValue(n,16)}};function ds(t,e,s){const n=es.get(s);return void 0===n?new us(t,e,s):n}us=Object(r.a)([a(),Object(r.b)("design:paramtypes",[Number,Object,Object])],us);Array.prototype.slice;const ps=i.f.noop;class fs{constructor(t,e){this.doNotCache=!0,"length"===e?(this.obj=t,this.getValue=this.getStringLength):this.getValue=this.returnUndefined}getStringLength(){return this.obj.length}returnUndefined(){}}fs.prototype.setValue=ps,fs.prototype.subscribe=ps,fs.prototype.unsubscribe=ps,fs.prototype.dispose=ps;class bs{constructor(t,e){this.obj=t,this.propertyKey=e,void 0!==t.$observers&&void 0!==t.$observers[e]&&void 0!==t.$observers[e].setValue&&(this.setValue=this.setValueDirect)}getValue(){return this.obj[this.propertyKey]}setValue(t,e){this.obj[this.propertyKey]=t}setValueDirect(t,e){this.obj.$observers[this.propertyKey].setValue(t,e)}}const gs=new WeakMap,ms=Set.prototype,vs=ms.add,ys=ms.clear,ws=ms.delete,Os=["add","clear","delete"],ks={add:function(t){let e=this;void 0!==e.$raw&&(e=e.$raw);const s=gs.get(e);if(void 0===s)return vs.call(e,t),this;const n=e.size;return vs.call(e,t),e.size===n?this:(s.indexMap[n]=-2,s.notify(),this)},clear:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=gs.get(t);if(void 0===e)return ys.call(t);if(t.size>0){const s=e.indexMap;let n=0;for(const e of t.keys())s[n]>-1&&s.deletedItems.push(s[n]),n++;ys.call(t),s.length=0,e.notify()}},delete:function(t){let e=this;void 0!==e.$raw&&(e=e.$raw);const s=gs.get(e);if(void 0===s)return ws.call(e,t);if(0===e.size)return!1;let n=0;const i=s.indexMap;for(const r of e.keys()){if(r===t){i[n]>-1&&i.deletedItems.push(i[n]),i.splice(n,1);const r=ws.call(e,t);return!0===r&&s.notify(),r}n++}return!1}},Cs={writable:!0,enumerable:!1,configurable:!0},js=Reflect.defineProperty;for(const t of Os)js(ks[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Ss=!1;Array.prototype.slice;let xs=class{constructor(t,e,s){Ss||(Ss=!0,function(){for(const t of Os)!0!==ms[t].observing&&js(ms,t,{...Cs,value:ks[t]})}()),this.inBatch=!1,this.collection=s,this.persistentFlags=2080374799&t,this.indexMap=oe(s.size),this.lifecycle=e,this.lengthObserver=void 0,gs.set(s,this)}notify(){this.lifecycle.batch.depth>0?this.inBatch||(this.inBatch=!0,this.lifecycle.batch.add(this)):this.flushBatch(0)}getLengthObserver(){return void 0===this.lengthObserver&&(this.lengthObserver=new ts(this.collection)),this.lengthObserver}getIndexObserver(t){throw new Error("Set index observation not supported")}flushBatch(t){this.inBatch=!1;const{indexMap:e,collection:s}=this,{size:n}=s;this.indexMap=oe(n),this.callCollectionSubscribers(e,16|this.persistentFlags),void 0!==this.lengthObserver&&this.lengthObserver.setValue(n,16)}};function Ts(t,e,s){const n=gs.get(s);return void 0===n?new xs(t,e,s):n}xs=Object(r.a)([a(),Object(r.b)("design:paramtypes",[Number,Object,Object])],xs);const As=Object.prototype.toString,Is=i.a.createInterface("IObserverLocator").noDefault(),Vs=i.a.createInterface("ITargetObserverLocator").noDefault(),$s=i.a.createInterface("ITargetAccessorLocator").noDefault();let Es=class{constructor(t,e,s,n,i){this.lifecycle=t,this.scheduler=e,this.dirtyChecker=s,this.targetObserverLocator=n,this.targetAccessorLocator=i,this.adapters=[]}static register(t){return i.i.singleton(Is,this).register(t)}getObserver(t,e,s){if(2&t&&"object"==typeof e)return x.getOrCreate(e,s);if(function(t){return!0===t.$synthetic}(e))return e.getObservers(t).getOrCreate(this.lifecycle,t,e,s);let n=e.$observers;if(n&&s in n)return n[s];const i=this.createPropertyObserver(t,e,s);return i.doNotCache||(void 0===n&&(n=this.getOrCreateObserversLookup(e)),n[s]=i),i}addAdapter(t){this.adapters.push(t)}getAccessor(t,e,s){return this.targetAccessorLocator.handles(t,e)?this.targetObserverLocator.overridesAccessor(t,e,s)?this.getObserver(t,e,s):this.targetAccessorLocator.getAccessor(t,this.scheduler,this.lifecycle,e,s):2&t?x.getOrCreate(e,s):new bs(e,s)}getArrayObserver(t,e){return Ae(t,this.lifecycle,e)}getMapObserver(t,e){return ds(t,this.lifecycle,e)}getSetObserver(t,e){return Ts(t,this.lifecycle,e)}getOrCreateObserversLookup(t){return t.$observers||this.createObserversLookup(t)}createObserversLookup(t){const e={};return Reflect.defineProperty(t,"$observers",{enumerable:!1,configurable:!1,writable:!1,value:e})||i.j.write(0,t),e}getAdapterObserver(t,e,s,n){for(let i=0,r=this.adapters.length;i<r;i++){const r=this.adapters[i].getObserver(t,e,s,n);if(null!=r)return r}return null}createPropertyObserver(t,e,s){if(!(e instanceof Object))return new fs(e,s);let n=!1;if(this.targetObserverLocator.handles(t,e)){const i=this.targetObserverLocator.getObserver(t,this.scheduler,this.lifecycle,this,e,s);if(null!=i)return i;n=!0}switch(As.call(e)){case"[object Array]":if("length"===s)return this.getArrayObserver(t,e).getLengthObserver();if(Object(i.w)(s))return this.getArrayObserver(t,e).getIndexObserver(Number(s));break;case"[object Map]":if("size"===s)return this.getMapObserver(t,e).getLengthObserver();break;case"[object Set]":if("size"===s)return this.getSetObserver(t,e).getLengthObserver()}const r=function(t,e){let s=Object.getOwnPropertyDescriptor(t,e),n=Object.getPrototypeOf(t);for(;null==s&&null!=n;)s=Object.getOwnPropertyDescriptor(n,e),n=Object.getPrototypeOf(n);return s}(e,s);if(null!=r&&(null!=r.get||null!=r.set)){if(null!=r.get&&null!=r.get.getObserver)return r.get.getObserver(e);const o=this.getAdapterObserver(t,e,s,r);return null!=o?o:n?this.dirtyChecker.createProperty(e,s):function(t,e,s,n,r,o,a){if(!1===a.configurable)return s.createProperty(r,o);if(null!=a.get){const{constructor:{prototype:{computed:s}}}=r,n=s&&s[o]||Ie;return null!=a.set?n.volatile?new $e(t,n,r,o,a,e):new Ve(r,o,a):new $e(t,n,r,o,a,e)}throw i.j.error(18,o)}(t,this,this.dirtyChecker,this.lifecycle,e,s,r)}return new D(this.lifecycle,t,e,s)}};Es=Object(r.a)([Object(r.c)(0,$),Object(r.c)(1,_e),Object(r.c)(2,Je),Object(r.c)(3,Vs),Object(r.c)(4,$s),Object(r.b)("design:paramtypes",[Object,Object,Object,Object,Object])],Es);const{oneTime:Ps,toView:Rs,fromView:Ns}=Xt,Fs=Rs|Ps;let Bs=class{constructor(t,e,s,n,i,r){this.sourceExpression=t,this.target=e,this.targetProperty=s,this.mode=n,this.observerLocator=i,this.locator=r,this.interceptor=this,this.$state=0,this.$scope=void 0,this.targetObserver=void 0,this.persistentFlags=0,ht.assignIdTo(this),this.$lifecycle=r.get($)}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t,this.part)}handleChange(t,e,s){if(0!=(4&this.$state)){if((16&(s|=this.persistentFlags))>0){const e=this.targetObserver.getValue();return(10082!==this.sourceExpression.$kind||this.observerSlots>1)&&(t=this.sourceExpression.evaluate(s,this.$scope,this.locator,this.part)),t!==e&&this.interceptor.updateTarget(t,s),void(0==(this.mode&Ps)&&(this.version++,this.sourceExpression.connect(s,this.$scope,this.interceptor,this.part),this.interceptor.unobserve(!1)))}if(!((32&s)>0))throw i.j.error(15,s);t!==this.sourceExpression.evaluate(s,this.$scope,this.locator,this.part)&&this.interceptor.updateSource(t,s)}}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.interceptor.$unbind(4096|t)}this.$state|=1,t|=4,this.persistentFlags=2080374799&t,this.$scope=e,this.part=s;let n=this.sourceExpression;wt(n)&&n.bind(t,e,this.interceptor);let i=this.targetObserver;i||(i=this.mode&Ns?this.targetObserver=this.observerLocator.getObserver(t,this.target,this.targetProperty):this.targetObserver=this.observerLocator.getAccessor(t,this.target,this.targetProperty)),this.mode!==Xt.oneTime&&i.bind&&i.bind(t),n=this.sourceExpression,this.mode&Fs&&this.interceptor.updateTarget(n.evaluate(t,e,this.locator,s),t),this.mode&Rs&&n.connect(t,e,this.interceptor,s),this.mode&Ns&&(i.subscribe(this.interceptor),i[this.id]|=32),this.$state|=4,this.$state&=-2}$unbind(t){4&this.$state&&(this.$state|=2,this.persistentFlags=0,Ot(this.sourceExpression)&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.targetObserver.unbind&&this.targetObserver.unbind(t),this.targetObserver.unsubscribe&&(this.targetObserver.unsubscribe(this.interceptor),this.targetObserver[this.id]&=-33),this.interceptor.unobserve(!0),this.$state&=-7)}};Bs=Object(r.a)([ht(),Object(r.b)("design:paramtypes",[Object,Object,String,Number,Object,Object])],Bs);class Ls{constructor(t,e,s,n,i){this.sourceExpression=t,this.locator=i,this.interceptor=this,this.$state=0,this.targetObserver=n.getObserver(0,e,s)}callSource(t){const e=this.$scope.overrideContext;Object.assign(e,t);const s=this.sourceExpression.evaluate(2097152,this.$scope,this.locator,this.part);for(const s in t)Reflect.deleteProperty(e,s);return s}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.interceptor.$unbind(4096|t)}this.$state|=1,this.$scope=e,this.part=s,wt(this.sourceExpression)&&this.sourceExpression.bind(t,e,this.interceptor),this.targetObserver.setValue(t=>this.interceptor.callSource(t),t),this.$state|=4,this.$state&=-2}$unbind(t){4&this.$state&&(this.$state|=2,Ot(this.sourceExpression)&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,t),this.$state&=-7)}observeProperty(t,e,s){}handleChange(t,e,s){}}const Ms=i.a.createInterface("IExpressionParser").withDefault(t=>t.singleton(Ds));class Ds{constructor(){this.expressionLookup=Object.create(null),this.forOfLookup=Object.create(null),this.interpolationLookup=Object.create(null)}parse(t,e){switch(e){case 2048:{let s=this.interpolationLookup[t];return void 0===s&&(s=this.interpolationLookup[t]=this.parseCore(t,e)),s}case 539:{let s=this.forOfLookup[t];return void 0===s&&(s=this.forOfLookup[t]=this.parseCore(t,e)),s}default:{if(0===t.length&&55&e)return Bt.$empty;let s=this.expressionLookup[t];return void 0===s&&(s=this.expressionLookup[t]=this.parseCore(t,e)),s}}}cache(t){const{forOfLookup:e,expressionLookup:s,interpolationLookup:n}=this;for(const i in t){const r=t[i];switch(r.$kind){case 24:n[i]=r;break;case 6199:e[i]=r;break;default:s[i]=r}}}parseCore(t,e){try{const e=t.split("."),s=e[0];let n;n=s.endsWith("()")?new Et(s.replace("()",""),i.f.emptyArray):new It(e[0]);let r=1;for(;r<e.length;){const t=e[r];n=t.endsWith("()")?new Pt(n,t.replace("()",""),i.f.emptyArray):new Vt(n,e[r]),r++}return n}catch(t){throw i.j.error(3,t)}}}var qs;!function(t){t[t.None=0]="None",t[t.IgnoreCustomAttr=4096]="IgnoreCustomAttr",t[t.Interpolation=2048]="Interpolation",t[t.IsRef=5376]="IsRef",t[t.IsIterator=512]="IsIterator",t[t.IsCustom=256]="IsCustom",t[t.IsFunction=128]="IsFunction",t[t.IsEvent=64]="IsEvent",t[t.IsProperty=32]="IsProperty",t[t.IsCommand=16]="IsCommand",t[t.IsPropertyCommand=48]="IsPropertyCommand",t[t.IsEventCommand=80]="IsEventCommand",t[t.DelegationStrategyDelta=6]="DelegationStrategyDelta",t[t.Command=15]="Command",t[t.OneTimeCommand=49]="OneTimeCommand",t[t.ToViewCommand=50]="ToViewCommand",t[t.FromViewCommand=51]="FromViewCommand",t[t.TwoWayCommand=52]="TwoWayCommand",t[t.BindCommand=53]="BindCommand",t[t.TriggerCommand=4182]="TriggerCommand",t[t.CaptureCommand=4183]="CaptureCommand",t[t.DelegateCommand=4184]="DelegateCommand",t[t.CallCommand=153]="CallCommand",t[t.OptionsCommand=26]="OptionsCommand",t[t.ForCommand=539]="ForCommand",t[t.CustomCommand=284]="CustomCommand"}(qs||(qs={}));const{toView:Us,oneTime:_s}=Xt;class zs{constructor(t,e,s,n,i,r){this.observerLocator=t,this.interpolation=e,this.target=s,this.targetProperty=n,this.mode=i,this.locator=r,this.interceptor=this,this.$state=0,this.$scope=void 0;const o=e.expressions,a=this.parts=Array(o.length);for(let c=0,h=o.length;c<h;++c)a[c]=new Hs(o[c],e,s,n,i,t,r,0===c)}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.$state|=4,this.$scope=e,this.part=s;const n=this.parts;for(let i=0,r=n.length;i<r;++i)n[i].interceptor.$bind(t,e,s)}$unbind(t){if(!(4&this.$state))return;this.$state&=-5,this.$scope=void 0;const e=this.parts;for(let s=0,n=e.length;s<n;++s)e[s].interceptor.$unbind(t)}}let Hs=class{constructor(t,e,s,n,i,r,o,a){this.sourceExpression=t,this.interpolation=e,this.target=s,this.targetProperty=n,this.mode=i,this.observerLocator=r,this.locator=o,this.isFirst=a,this.interceptor=this,this.$state=0,ht.assignIdTo(this),this.targetObserver=r.getAccessor(0,s,n)}updateTarget(t,e){this.targetObserver.setValue(t,16|e)}handleChange(t,e,s){if(!(4&this.$state))return;const n=this.targetObserver.getValue(),i=this.interpolation.evaluate(s,this.$scope,this.locator,this.part);i!==n&&this.interceptor.updateTarget(i,s),0==(this.mode&_s)&&(this.version++,this.sourceExpression.connect(s,this.$scope,this.interceptor,this.part),this.interceptor.unobserve(!1))}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.$state|=4,this.$scope=e,this.part=s;const n=this.sourceExpression;n.bind&&n.bind(t,e,this.interceptor),this.mode!==Xt.oneTime&&this.targetObserver.bind&&this.targetObserver.bind(t),this.isFirst&&this.interceptor.updateTarget(this.interpolation.evaluate(t,e,this.locator,s),t),this.mode&Us&&n.connect(t,e,this.interceptor,s)}$unbind(t){if(!(4&this.$state))return;this.$state&=-5;const e=this.sourceExpression;e.unbind&&e.unbind(t,this.$scope,this.interceptor),this.targetObserver.unbind&&this.targetObserver.unbind(t),this.$scope=void 0,this.interceptor.unobserve(!0)}};Hs=Object(r.a)([ht(),Object(r.b)("design:paramtypes",[Object,Object,Object,String,Number,Object,Object,Boolean])],Hs);let Ks=class{constructor(t,e,s,n,i=!1){this.sourceExpression=t,this.targetProperty=e,this.observerLocator=s,this.locator=n,this.toBindingContext=i,this.interceptor=this,this.$state=0,this.$scope=void 0,this.target=null,ht.assignIdTo(this),this.$lifecycle=n.get($)}handleChange(t,e,s){if(4&this.$state){if(!(16&s))throw i.j.error(15,s);{const{target:t,targetProperty:e}=this,n=t[e],i=this.sourceExpression.evaluate(s,this.$scope,this.locator,this.part);i!==n&&(t[e]=i)}}}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.interceptor.$unbind(4096|t)}this.$state|=1,this.$scope=e,this.part=s,this.target=this.toBindingContext?e.bindingContext:e.overrideContext;const n=this.sourceExpression;n.bind&&n.bind(t,e,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(4096|t,e,this.locator,s),this.sourceExpression.connect(t,e,this.interceptor,s),this.$state|=4,this.$state&=-2}$unbind(t){if(!(4&this.$state))return;this.$state|=2;const e=this.sourceExpression;e.unbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.interceptor.unobserve(!0),this.$state&=-7}};Ks=Object(r.a)([ht(),Object(r.b)("design:paramtypes",[Object,String,Object,Object,Boolean])],Ks);class Ws{constructor(t,e,s){this.sourceExpression=t,this.target=e,this.locator=s,this.interceptor=this,this.$state=0,this.$scope=void 0}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.interceptor.$unbind(4096|t)}this.$state|=1,this.$scope=e,this.part=s,wt(this.sourceExpression)&&this.sourceExpression.bind(t,e,this),this.sourceExpression.assign(32|t,this.$scope,this.locator,this.target,s),this.$state|=4,this.$state&=-2}$unbind(t){if(!(4&this.$state))return;this.$state|=2;let e=this.sourceExpression;e.evaluate(t,this.$scope,this.locator,this.part)===this.target&&e.assign(t,this.$scope,this.locator,null,this.part),e=this.sourceExpression,Ot(e)&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.$state&=-7}observeProperty(t,e,s){}handleChange(t,e,s){}}let Qs=class{constructor(t,e,s,n,r,o){this.lifecycle=t,this.obj=s,this.propertyKey=n,this.$set=o,this.currentValue=void 0,this.oldValue=void 0,this.inBatch=!1;let a=!1;x.isProxy(s)&&(a=!0,s.$observer.subscribe(this,n),this.obj=s.$raw),this.callback=this.obj[r];const c=this.propertyChangedCallback=this.obj.propertyChanged,h=this.hasPropertyChangedCallback="function"==typeof c,l=this.shouldInterceptSet=o!==i.f.noop;if(void 0!==this.callback||h||l){this.observing=!0;const t=s[n];this.currentValue=l?t:o(t),a||this.createGetterSetter()}else this.observing=!1;this.persistentFlags=2080374799&e}handleChange(t,e,s){this.setValue(t,s)}getValue(){return this.currentValue}setValue(t,e){if(this.shouldInterceptSet&&(t=this.$set(t)),this.observing){const s=this.currentValue;if(Object.is(t,s))return;if(this.currentValue=t,0===this.lifecycle.batch.depth){if(this.callSubscribers(t,s,this.persistentFlags|e),0==(4096&e)||(32&e)>0){const n=this.callback;void 0!==n&&n.call(this.obj,t,s,this.persistentFlags|e),this.hasPropertyChangedCallback&&this.propertyChangedCallback.call(this.obj,this.propertyKey,t,s,this.persistentFlags|e)}}else this.inBatch||(this.inBatch=!0,this.oldValue=s,this.lifecycle.batch.add(this))}else this.obj[this.propertyKey]=t}subscribe(t){if(!1===this.observing){this.observing=!0;const t=this.obj[this.propertyKey];this.currentValue=this.shouldInterceptSet?this.$set(t):t,this.createGetterSetter()}this.addSubscriber(t)}createGetterSetter(){Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.currentValue,set:t=>{this.setValue(t,0)}})||i.j.write(1,this.propertyKey,this.obj)}};Qs=Object(r.a)([o(),Object(r.b)("design:paramtypes",[Object,Number,Object,String,String,Function])],Qs);class Gs{constructor(t){this.mode=t,this.originalModes=new WeakMap}bind(t,e,s){this.originalModes.set(s,s.mode),s.mode=this.mode}unbind(t,e,s){s.mode=this.originalModes.get(s)}}let Js=class extends Gs{constructor(){super(Xt.oneTime)}};Js=Object(r.a)([dt("oneTime"),Object(r.b)("design:paramtypes",[])],Js);let Ys=class extends Gs{constructor(){super(Xt.toView)}};Ys=Object(r.a)([dt("toView"),Object(r.b)("design:paramtypes",[])],Ys);let Xs=class extends Gs{constructor(){super(Xt.fromView)}};Xs=Object(r.a)([dt("fromView"),Object(r.b)("design:paramtypes",[])],Xs);let Zs=class extends Gs{constructor(){super(Xt.twoWay)}};Zs=Object(r.a)([dt("twoWay"),Object(r.b)("design:paramtypes",[])],Zs);let tn=class extends bt{constructor(t,e){super(t,e),this.opts={delay:0},this.firstArg=null,this.task=null,this.taskQueue=t.locator.get(_e).getPostRenderTaskQueue(),e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask(()=>this.binding.callSource(t))}handleChange(t,e,s){this.queueTask(()=>this.binding.handleChange(t,e,s))}queueTask(t){null!==this.task&&this.task.cancel(),this.task=this.taskQueue.queueTask(t,this.opts)}$bind(t,e,s){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,s));isNaN(n)||(this.opts.delay=n)}this.binding.$bind(t,e,s)}};tn=Object(r.a)([dt("debounce"),Object(r.b)("design:paramtypes",[Object,jt])],tn);let en=class{constructor(t){this.signaler=t}bind(t,e,s,...n){if(!s.updateTarget)throw i.j.error(11);if(4===arguments.length){const t=n[0];this.signaler.addSignalListener(t,s),s.signal=t}else{if(!(arguments.length>4))throw i.j.error(12);{const t=Array.prototype.slice.call(n.length+3,3);let e=t.length;for(;e--;){const n=t[e];this.signaler.addSignalListener(n,s)}s.signal=t}}}unbind(t,e,s){const n=s.signal;if(s.signal=null,Array.isArray(n)){const t=n;let e=t.length;for(;e--;)this.signaler.removeSignalListener(t[e],s)}else this.signaler.removeSignalListener(n,s)}};en=Object(r.a)([dt("signal"),Object(r.c)(0,W),Object(r.b)("design:paramtypes",[Object])],en);let sn=class extends bt{constructor(t,e){super(t,e),this.opts={delay:0},this.firstArg=null,this.task=null,this.lastCall=0,this.taskQueue=t.locator.get(_e).getPostRenderTaskQueue(),this.clock=t.locator.get(Me),e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask(()=>this.binding.callSource(t))}handleChange(t,e,s){this.queueTask(()=>this.binding.handleChange(t,e,s))}queueTask(t){const e=this.opts,s=this.clock,n=this.lastCall+e.delay-s.now();n>0?(null!==this.task&&this.task.cancel(),e.delay=n,this.task=this.taskQueue.queueTask(()=>{this.lastCall=s.now(),t()},e)):(this.lastCall=s.now(),t())}$bind(t,e,s){if(null!==this.firstArg){const n=Number(this.firstArg.evaluate(t,e,this.locator,s));isNaN(n)||(this.opts.delay=n)}this.binding.$bind(t,e,s)}};function nn(t,e){let s;function n(t,e){arguments.length>1&&(s.property=e),i.e.define(on.name,an.create(e,s),t.constructor,e),i.h.annotation.appendTo(t.constructor,on.keyFrom(e))}return arguments.length>1?(s={},void n(t,e)):"string"==typeof t?(s={},n):(s=void 0===t?{}:t,n)}function rn(t){return t.startsWith(on.name)}sn=Object(r.a)([dt("throttle"),Object(r.b)("design:paramtypes",[Object,jt])],sn);const on={name:i.h.annotation.keyFor("bindable"),keyFrom:t=>`${on.name}:${t}`,from(...t){const e={},s=Array.isArray;function n(t){e[t]=an.create(t)}return t.forEach((function(t){s(t)?t.forEach(n):t instanceof an?e[t.property]=t:void 0!==t&&Object.keys(t).forEach(s=>function(t,s){e[t]=s instanceof an?s:an.create(t,s)}(s,t[s]))})),e},for(t){let e;const s={add(n){let r,o;return"string"==typeof n?(r=n,o={property:r}):(r=n.property,o=n),e=an.create(r,o),i.e.hasOwn(on.name,t,r)||i.h.annotation.appendTo(t,on.keyFrom(r)),i.e.define(on.name,e,t,r),s},mode:t=>(e.mode=t,s),callback:t=>(e.callback=t,s),attribute:t=>(e.attribute=t,s),primary:()=>(e.primary=!0,s),set:t=>(e.set=t,s)};return s},getAll(t){const e=on.name.length+1,s=[],n=Object(i.u)(t);let r,o,a,c=n.length,h=0;for(;--c>=0;){a=n[c],r=i.h.annotation.getKeys(a).filter(rn),o=r.length;for(let t=0;t<o;++t)s[h++]=i.e.getOwn(on.name,a,r[t].slice(e))}return s}};class an{constructor(t,e,s,n,i,r){this.attribute=t,this.callback=e,this.mode=s,this.primary=n,this.property=i,this.set=r}static create(t,e={}){return new an(Object(i.q)(e.attribute,Object(i.z)(t)),Object(i.q)(e.callback,`${t}Changed`),Object(i.q)(e.mode,Xt.toView),Object(i.q)(e.primary,!1),Object(i.q)(e.property,t),Object(i.q)(e.set,i.f.noop))}}function cn(t){return function(e){return un.define(t,e)}}function hn(t){return function(e){return un.define("string"==typeof t?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class ln{constructor(t,e,s,n,i,r,o,a,c,h){this.Type=t,this.name=e,this.aliases=s,this.key=n,this.defaultBindingMode=i,this.isTemplateController=r,this.bindables=o,this.strategy=a,this.hooks=c,this.noMultiBindings=h}static create(t,e){let s,n;return"string"==typeof t?(s=t,n={name:s}):(s=t.name,n=t),new ln(e,Object(i.q)(un.getAnnotation(e,"name"),s),Object(i.A)(un.getAnnotation(e,"aliases"),n.aliases,e.aliases),un.keyFrom(s),Object(i.q)(un.getAnnotation(e,"defaultBindingMode"),n.defaultBindingMode,e.defaultBindingMode,Xt.toView),Object(i.q)(un.getAnnotation(e,"isTemplateController"),n.isTemplateController,e.isTemplateController,!1),on.from(...on.getAll(e),un.getAnnotation(e,"bindables"),e.bindables,n.bindables),Object(i.q)(un.getAnnotation(e,"strategy"),n.strategy,e.strategy,1),Object(i.q)(un.getAnnotation(e,"hooks"),n.hooks,e.hooks,new Z(e.prototype)),Object(i.q)(un.getAnnotation(e,"noMultiBindings"),n.noMultiBindings,e.noMultiBindings,!1))}register(t){const{Type:e,key:s,aliases:n}=this;i.i.transient(s,e).register(t),i.i.alias(s,e).register(t),tt(n,un,s,t)}}const un={name:i.h.resource.keyFor("custom-attribute"),keyFrom:t=>`${un.name}:${t}`,isType:t=>"function"==typeof t&&i.e.hasOwn(un.name,t),for:(t,e)=>i.e.getOwn(un.keyFrom(e),t),define(t,e){const s=ln.create(t,e);return i.e.define(un.name,s,s.Type),i.e.define(un.name,s,s),i.h.resource.appendTo(e,un.name),s.Type},getDefinition(t){const e=i.e.getOwn(un.name,t);if(void 0===e)throw new Error(`No definition found for type ${t.name}`);return e},annotate(t,e,s){i.e.define(i.h.annotation.keyFor(e),s,t)},getAnnotation:(t,e)=>i.e.getOwn(i.h.annotation.keyFor(e),t)},dn=i.a.createInterface("INode").noDefault(),pn=i.a.createInterface("IRenderLocation").noDefault(),fn=i.a.createInterface("IDOM").noDefault(),bn=function(...t){throw i.j.error(1e3)},gn={addEventListener:bn,appendChild:bn,cloneNode:bn,convertToRenderLocation:bn,createDocumentFragment:bn,createNodeSequence:bn,createElement:bn,createCustomEvent:bn,dispatchEvent:bn,createNodeObserver:bn,createTemplate:bn,createTextNode:bn,getEffectiveParentNode:bn,setEffectiveParentNode:bn,insertBefore:bn,isMarker:bn,isNodeInstance:bn,isRenderLocation:bn,makeTarget:bn,registerElementResolver:bn,remove:bn,removeEventListener:bn,setAttribute:bn},mn={...gn,scheduler:void 0,get isInitialized(){return!0===Reflect.get(this,"$initialized")},initialize(t){if(this.isInitialized)throw i.j.error(1001);const e={},s=[t];let n=Object.getPrototypeOf(t);for(;n&&n!==Object.prototype;)s.unshift(n),n=Object.getPrototypeOf(n);for(n of s)Object.assign(e,Object.getOwnPropertyDescriptors(n));const r=[];let o,a;for(o in e)a=e[o],a.configurable&&a.writable&&(Reflect.defineProperty(this,o,a),r.push(o));Reflect.set(this,"$domKeys",r),Reflect.set(this,"$initialized",!0)},destroy(){if(!this.isInitialized)throw i.j.error(1002);Reflect.get(this,"$domKeys").forEach(t=>{Reflect.deleteProperty(this,t)}),Object.assign(this,gn),Reflect.set(this,"$domKeys",i.f.emptyArray),Reflect.set(this,"$initialized",!1)}};i.f.emptyArray;class vn{constructor(t,e,s){this.factory=t,this.flags=s,this.id=Object(i.C)("au$component"),this.view=this.factory.create(),this.view.hold(e,1)}beforeBind(t){return this.view.parent=this.$controller,this.view.bind(t|this.flags,this.$controller.scope)}beforeAttach(t){this.view.attach(t)}beforeDetach(t){this.view.detach(t)}beforeUnbind(t){const e=this.view.unbind(t);return this.view.parent=void 0,e}}let yn=class extends vn{constructor(t,e){super(t,e,268435456)}};yn=Object(r.a)([hn("infrequent-mutations"),Object(r.c)(0,V),Object(r.c)(1,pn),Object(r.b)("design:paramtypes",[Object,Object])],yn);let wn=class extends vn{constructor(t,e){super(t,e,536870912)}};wn=Object(r.a)([hn("frequent-mutations"),Object(r.c)(0,V),Object(r.c)(1,pn),Object(r.b)("design:paramtypes",[Object,Object])],wn);let On=class extends vn{constructor(t,e){super(t,e,134217728)}};On=Object(r.a)([hn("observe-shallow"),Object(r.c)(0,V),Object(r.c)(1,pn),Object(r.b)("design:paramtypes",[Object,Object])],On);const kn={done:{done:!0,canCancel:()=>!1,cancel(){},wait:()=>Promise.resolve()}};var Cn;!function(t){t[t.beforeCreate=0]="beforeCreate",t[t.beforeRender=1]="beforeRender",t[t.beforeBind=2]="beforeBind",t[t.beforeAttach=3]="beforeAttach"}(Cn||(Cn={}));const jn=i.a.createInterface("IStartTask").noDefault();var Sn;!function(t){t[t.with=0]="with",t[t.from=1]="from"}(Sn||(Sn={}));const xn=i.a.createInterface("IStartTaskManager").noDefault();let Tn=class{constructor(t){this.locator=t}static register(t){return i.i.singleton(xn,this).register(t)}runBeforeCreate(t=this.locator){return this.run(0,t)}runBeforeRender(t=this.locator){return this.run(1,t)}runBeforeBind(t=this.locator){return this.run(2,t)}runBeforeAttach(t=this.locator){return this.run(3,t)}run(t,e=this.locator){const s=e.getAll(jn).filter(e=>e.slot===t).map(t=>t.resolveTask()).filter(t=>!t.done);return 0===s.length?kn.done:new Pn(s)}};Tn=Object(r.a)([Object(r.c)(0,i.c),Object(r.b)("design:paramtypes",[Object])],Tn);class An{constructor(t,e,s,...n){this.done=!1,this.hasStarted=!1,this.isCancelled=!1,this.promise=t.then(t=>{if(!0!==this.isCancelled&&(this.hasStarted=!0,null!==e)){const i=e.call(s,t,...n);if(void 0!==i){return(i.then instanceof Function?i:i.wait()).then(()=>{this.done=!0})}this.done=!0}})}canCancel(){return!this.hasStarted}cancel(){this.canCancel()&&(this.isCancelled=!0)}wait(){return this.promise}}class In{constructor(t,e,s){this.container=t,this.key=e,this.callback=s,this.done=!1}canCancel(){return!1}cancel(){}wait(){if(void 0===this.promise){const t=this.container.get(this.key),e=this.callback.call(void 0,t);this.promise=void 0===e?Promise.resolve():e.then instanceof Function?e:e.wait(),this.promise=this.promise.then(()=>{this.done=!0,this.container=void 0,this.key=void 0,this.callback=void 0}).catch(t=>{throw t})}return this.promise}}class Vn{constructor(t,e,s,...n){this.done=!1,this.hasStarted=!1,this.isCancelled=!1;const i=t.then instanceof Function?t:t.wait();this.promise=i.then(()=>{if(!0===this.isCancelled)return;this.hasStarted=!0;const t=e.call(s,...n);if(void 0!==t){return(t.then instanceof Function?t:t.wait()).then(()=>{this.done=!0})}this.done=!0})}canCancel(){return!this.hasStarted}cancel(){this.canCancel()&&(this.isCancelled=!0)}wait(){return this.promise}}class $n{constructor(t){this.done=!1,this.promise=t.then instanceof Function?t:t.wait(),this.promise.then(()=>{this.done=!0}).catch(t=>{throw t})}canCancel(){return!1}cancel(){}wait(){return this.promise}}class En{constructor(t,e,s,...n){this.done=!1,this.hasStarted=!1,this.isCancelled=!1,this.promise=Promise.all(t.map(t=>t.wait())).then(()=>{if(!0===this.isCancelled)return;this.hasStarted=!0;const t=e.call(s,...n);if(void 0!==t)return t.wait().then(()=>{this.done=!0});this.done=!0})}canCancel(){return!this.hasStarted}cancel(){this.canCancel()&&(this.isCancelled=!0)}wait(){return this.promise}}class Pn{constructor(t){this.done=!1,this.promise=Promise.all(t.map(t=>t.wait())).then(()=>{this.done=!0})}canCancel(){return!1}cancel(){}wait(){return this.promise}}function Rn(t){return!(void 0===t||!0===t.done)}let Nn=class{constructor(t,e){this.ifFactory=t,this.location=e,this.id=Object(i.C)("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.task=kn.done,this.value=!1}beforeBind(t){return this.task.done?this.task=this.swap(this.value,t):this.task=new Vn(this.task,this.swap,this,this.value,t),this.task}beforeAttach(t){this.task.done?this.attachView(t):this.task=new Vn(this.task,this.attachView,this,t)}beforeDetach(t){return void 0!==this.view&&(this.task.done?this.view.detach(t):this.task=new Vn(this.task,this.view.detach,this.view,t)),this.task}beforeUnbind(t){return void 0!==this.view&&(this.task.done?this.task=this.view.unbind(t):this.task=new Vn(this.task,this.view.unbind,this.view,t)),this.task}caching(t){void 0!==this.ifView&&this.ifView.release(t)&&(this.ifView=void 0),void 0!==this.elseView&&this.elseView.release(t)&&(this.elseView=void 0),this.view=void 0}valueChanged(t,e,s){0!=(4&this.$controller.state)&&(this.task.done?this.task=this.swap(this.value,s):this.task=new Vn(this.task,this.swap,this,this.value,s))}updateView(t,e){let s;return s=t?this.ifView=this.ensureView(this.ifView,this.ifFactory,e):null!=this.elseFactory?this.elseView=this.ensureView(this.elseView,this.elseFactory,e):void 0,s}ensureView(t,e,s){return void 0===t&&(t=e.create(s)),t.hold(this.location,1),t}swap(t,e){let s=kn.done;if((!0===t&&void 0!==this.elseView||!0!==t&&void 0!==this.ifView)&&(s=this.deactivate(e)),s.done){const n=this.updateView(t,e);s=this.activate(n,e)}else s=new An(s.wait().then(()=>this.updateView(t,e)),this.activate,this,e);return s}deactivate(t){const e=this.view;if(void 0===e)return kn.done;e.detach(t);const s=e.unbind(t);return e.parent=void 0,s}activate(t,e){if(this.view=t,void 0===t)return kn.done;let s=this.bindView(e);return 0==(32&this.$controller.state)?s:(s.done?this.attachView(e):s=new Vn(s,this.attachView,this,e),s)}bindView(t){return void 0!==this.view&&(5&this.$controller.state)>0?(this.view.parent=this.$controller,this.view.bind(t,this.$controller.scope,this.$controller.part)):kn.done}attachView(t){void 0!==this.view&&(40&this.$controller.state)>0&&this.view.attach(t)}};Object(r.a)([nn,Object(r.b)("design:type",Boolean)],Nn.prototype,"value",void 0),Nn=Object(r.a)([hn("if"),Object(r.c)(0,V),Object(r.c)(1,pn),Object(r.b)("design:paramtypes",[Object,Object])],Nn);let Fn=class{constructor(t){this.factory=t,this.id=Object(i.C)("au$component")}link(t){if(t instanceof Nn)t.elseFactory=this.factory;else{if(!(t.viewModel instanceof Nn))throw new Error("Unsupported IfBehavior");t.viewModel.elseFactory=this.factory}}};Fn=Object(r.a)([hn("else"),Object(r.c)(0,V),Object(r.b)("design:paramtypes",[Object])],Fn);let Bn=class{constructor(t,e,s){this.location=t,this.renderable=e,this.factory=s,this.id=Object(i.C)("au$component"),this.hasPendingInstanceMutation=!1,this.observer=void 0,this.views=[],this.key=void 0,this.task=kn.done,this.normalizedItems=void 0}beforeBind(t){this.checkCollectionObserver(t);const e=this.renderable.bindings,{length:s}=e;let n;for(let t=0;t<s;++t)if(n=e[t],n.target===this&&"items"===n.targetProperty){this.forOf=n.sourceExpression;break}return this.local=this.forOf.declaration.evaluate(t,this.$controller.scope,null),this.normalizeToArray(t),this.processViewsKeyed(void 0,t),this.task}beforeAttach(t){this.task.done?this.attachViews(void 0,t):this.task=new Vn(this.task,this.attachViews,this,void 0,t)}beforeDetach(t){this.task.done?this.detachViewsByRange(0,this.views.length,t):this.task=new Vn(this.task,this.detachViewsByRange,this,0,this.views.length,t)}beforeUnbind(t){return this.checkCollectionObserver(t),this.task.done?this.task=this.unbindAndRemoveViewsByRange(0,this.views.length,t,!1):this.task=new Vn(this.task,this.unbindAndRemoveViewsByRange,this,0,this.views.length,t,!1),this.task}itemsChanged(t){t|=this.$controller.flags,this.checkCollectionObserver(t),t|=16,this.normalizeToArray(t),this.processViewsKeyed(void 0,t)}handleCollectionChange(t,e){e|=this.$controller.flags,e|=976,this.normalizeToArray(e),this.processViewsKeyed(t,e)}processViewsKeyed(t,e){const s=this.views.length;void 0===t?((5&this.$controller.state)>0&&(this.detachViewsByRange(0,s,e),this.task.done?this.task=this.unbindAndRemoveViewsByRange(0,s,e,!1):this.task=new Vn(this.task,this.unbindAndRemoveViewsByRange,this,0,s,e,!1),this.task.done?this.task=this.createAndBindAllViews(e):this.task=new Vn(this.task,this.createAndBindAllViews,this,e)),(40&this.$controller.state)>0&&(this.task.done?this.attachViewsKeyed(e):this.task=new Vn(this.task,this.attachViewsKeyed,this,e))):(!function(t){let e=0,s=0;const n=t.length;for(let i=0;i<n;++i){for(;t.deletedItems[s]<=i-e;)++s,--e;-2===t[i]?++e:t[i]+=e}}(t),(5&this.$controller.state)>0&&(t.deletedItems.length>0&&(t.deletedItems.sort(i.p),this.task.done?this.detachViewsByKey(t,e):this.task=new Vn(this.task,this.detachViewsByKey,this,t,e),this.task.done?this.task=this.unbindAndRemoveViewsByKey(t,e):this.task=new Vn(this.task,this.unbindAndRemoveViewsByKey,this,t,e)),this.task.done?this.task=this.createAndBindNewViewsByKey(t,e):this.task=new Vn(this.task,this.createAndBindNewViewsByKey,this,t,e)),(40&this.$controller.state)>0&&(this.task.done?this.sortViewsByKey(s,t,e):this.task=new Vn(this.task,this.sortViewsByKey,this,s,t,e)))}checkCollectionObserver(t){const e=this.observer;if(8192&t)void 0!==e&&e.unsubscribeFromCollection(this);else if((5&this.$controller.state)>0){const s=this.observer=function(t,e,s){const n=s instanceof Object?x.getRawIfProxy(s):s;switch(As.call(s)){case"[object Array]":return Ae(t,e,n);case"[object Map]":return ds(t,e,n);case"[object Set]":return Ts(t,e,n)}}(t,this.$controller.lifecycle,this.items);e!==s&&e&&e.unsubscribeFromCollection(this),s&&s.subscribeToCollection(this)}}normalizeToArray(t){const e=this.items;if(e instanceof Array)return void(this.normalizedItems=e);if(void 0===this.forOf)return;const s=[];this.forOf.iterate(t,e,(t,e,n)=>{s[e]=n}),this.normalizedItems=s}detachViewsByRange(t,e,s){const n=this.views;let i;this.$controller.lifecycle.afterDetach.begin();for(let r=t;r<e;++r)i=n[r],i.release(s),i.detach(s);this.$controller.lifecycle.afterDetach.end(s)}unbindAndRemoveViewsByRange(t,e,s,n){const i=this.views;let r,o,a=void 0;this.$controller.lifecycle.afterUnbind.begin();for(let n=t;n<e;++n)o=i[n],r=o.unbind(s),o.parent=void 0,r.done||(void 0===a&&(a=[]),a.push(r));return n&&(this.views.length=t),void 0===a?(this.$controller.lifecycle.afterUnbind.end(s),kn.done):new En(a,this.$controller.lifecycle.afterUnbind.end,this.$controller.lifecycle.afterUnbind,s)}detachViewsByKey(t,e){const s=this.views;this.$controller.lifecycle.afterDetach.begin();const n=t.deletedItems,i=n.length;let r;for(let t=0;t<i;++t)r=s[n[t]],r.release(e),r.detach(e);this.$controller.lifecycle.afterDetach.end(e)}unbindAndRemoveViewsByKey(t,e){const s=this.views;let n,i=void 0;this.$controller.lifecycle.afterUnbind.begin();const r=t.deletedItems,o=r.length;let a,c=0;for(;c<o;++c)a=s[r[c]],n=a.unbind(e),a.parent=void 0,n.done||(void 0===i&&(i=[]),i.push(n));c=0;let h=0;for(;c<o;++c)h=r[c]-c,this.views.splice(h,1);return void 0===i?(this.$controller.lifecycle.afterUnbind.end(e),kn.done):new En(i,this.$controller.lifecycle.afterUnbind.end,this.$controller.lifecycle.afterUnbind,e)}createAndBindAllViews(t){let e,s,n,i=void 0;const r=this.$controller,o=r.lifecycle,a=r.scope;o.afterBind.begin();const c=r.part,h=this.factory,l=this.local,u=this.items,d=this.forOf.count(t,u),p=this.views=Array(d);return this.forOf.iterate(t,u,(o,u,f)=>{s=p[u]=h.create(t),s.parent=r,n=H.fromParent(t,a,z.create(t,l,f)),qn(n.overrideContext,u,d),e=s.bind(t,n,c),e.done||(void 0===i&&(i=[]),i.push(e))}),void 0===i?(o.afterBind.end(t),kn.done):new En(i,o.afterBind.end,o.afterBind,t)}createAndBindNewViewsByKey(t,e){let s,n,i,r=void 0;const o=this.factory,a=this.views,c=this.local,h=this.normalizedItems,l=this.$controller,u=l.lifecycle,d=l.scope;u.afterBind.begin();const p=l.part,f=t.length;for(let u=0;u<f;++u)-2===t[u]&&(n=o.create(e),n.parent=l,i=H.fromParent(e,d,z.create(e,c,h[u])),qn(i.overrideContext,u,f),s=n.bind(e,i,p),a.splice(u,0,n),s.done||(void 0===r&&(r=[]),r.push(s)));if(a.length!==f)throw new Error(`viewsLen=${a.length}, mapLen=${f}`);return void 0===r?(u.afterBind.end(e),kn.done):new En(r,u.afterBind.end,u.afterBind,e)}attachViews(t,e){let s;const n=this.views,i=this.location,r=this.$controller.lifecycle;if(r.afterAttach.begin(),void 0===t)for(let t=0,r=n.length;t<r;++t)s=n[t],s.hold(i,1),s.nodes.unlink(),s.attach(e);else for(let r=0,o=n.length;r<o;++r)t[r]!==r&&(s=n[r],s.hold(i,1),s.nodes.unlink(),s.attach(e));r.afterAttach.end(e)}attachViewsKeyed(t){let e;const{views:s,location:n}=this;this.$controller.lifecycle.afterAttach.begin();for(let i=0,r=s.length;i<r;++i)e=s[i],e.hold(n,1),e.nodes.unlink(),e.attach(t);this.$controller.lifecycle.afterAttach.end(t)}sortViewsByKey(t,e,s){const n=this.location,i=this.views,r=e.length;!function(t,e){const s=t.slice(),n=e.length;let i=0,r=0;for(;i<n;)r=e[i],-2!==r&&(t[i]=s[r]),++i}(i,e);const o=function(t){const e=t.length;e>Ln&&(Ln=e,Mn=new Int32Array(e),Dn=new Int32Array(e));let s=0,n=0,i=0,r=0,o=0,a=0,c=0,h=0;for(;r<e;r++)if(n=t[r],-2!==n){if(o=Mn[s],i=t[o],-2!==i&&i<n){Dn[r]=o,Mn[++s]=r;continue}for(a=0,c=s;a<c;)h=a+c>>1,i=t[Mn[h]],-2!==i&&i<n?a=h+1:c=h;i=t[Mn[a]],(n<i||-2===i)&&(a>0&&(Dn[r]=Mn[a-1]),Mn[a]=r)}r=++s;const l=new Int32Array(r);n=Mn[s-1];for(;s-- >0;)l[s]=n,n=Dn[n];for(;r-- >0;)Mn[r]=0;return l}(e),a=o.length;let c;this.$controller.lifecycle.afterAttach.begin(),s|=33554432;let h,l=a-1,u=r-1;for(;u>=0;--u)h=i[u],-2===e[u]?(qn(h.scope.overrideContext,u,r),h.hold(n,1),h.attach(s)):l<0||1===a||u!==o[l]?(qn(h.scope.overrideContext,u,r),h.attach(s)):(t!==r&&qn(h.scope.overrideContext,u,r),--l),c=i[u+1],void 0!==c?h.nodes.link(c.nodes):h.nodes.link(n);this.$controller.lifecycle.afterAttach.end(s)}};Object(r.a)([nn,Object(r.b)("design:type",Object)],Bn.prototype,"items",void 0),Bn=Object(r.a)([hn("repeat"),Object(r.c)(0,pn),Object(r.c)(1,A),Object(r.c)(2,V),Object(r.b)("design:paramtypes",[Object,Object,Object])],Bn);let Ln=16,Mn=new Int32Array(Ln),Dn=new Int32Array(Ln);function qn(t,e,s){const n=0===e,i=e===s-1,r=e%2==0;t.$index=e,t.$first=n,t.$last=i,t.$middle=!n&&!i,t.$even=r,t.$odd=!r,t.$length=s}let Un=class{constructor(t,e){this.factory=t,this.location=e,this.id=Object(i.C)("au$component"),this.view=this.factory.create(),this.view.hold(e,1)}beforeBind(t){return this.view.parent=this.$controller,this.view.bind(67108864|t,this.$controller.scope,this.factory.name)}beforeAttach(t){this.view.attach(t)}beforeDetach(t){this.view.detach(t)}beforeUnbind(t){const e=this.view.unbind(t);return this.view.parent=void 0,e}};Un=Object(r.a)([hn("replaceable"),Object(r.c)(0,V),Object(r.c)(1,pn),Object(r.b)("design:paramtypes",[Object,Object])],Un);let _n=class{constructor(t,e){this.factory=t,this.location=e,this.id=Object(i.C)("au$component"),this.id=Object(i.C)("au$component"),this.view=this.factory.create(),this.view.hold(e,1)}valueChanged(t,e,s){(5&this.$controller.state)>0&&this.bindChild(4096)}beforeBind(t){this.view.parent=this.$controller,this.bindChild(t)}beforeAttach(t){this.view.attach(t)}beforeDetach(t){this.view.detach(t)}beforeUnbind(t){this.view.unbind(t),this.view.parent=void 0}bindChild(t){const e=H.fromParent(t,this.$controller.scope,void 0===this.value?{}:this.value);this.view.bind(t,e,this.$controller.part)}};function zn(t){return t.startsWith(Hn.name)}Object(r.a)([nn,Object(r.b)("design:type",Object)],_n.prototype,"value",void 0),_n=Object(r.a)([hn("with"),Object(r.c)(0,V),Object(r.c)(1,pn),Object(r.b)("design:paramtypes",[Object,Object])],_n);const Hn={name:i.h.annotation.keyFor("children-observer"),keyFrom:t=>`${Hn.name}:${t}`,from(...t){const e={},s=Array.isArray;function n(t){e[t]=Kn.create(t)}return t.forEach((function(t){s(t)?t.forEach(n):t instanceof Kn?e[t.property]=t:void 0!==t&&Object.keys(t).forEach(s=>function(t,s){e[t]=Kn.create(t,s)}(s,t))})),e},getAll(t){const e=Hn.name.length+1,s=[],n=Object(i.u)(t);let r,o,a,c=n.length,h=0;for(;--c>=0;){a=n[c],r=i.h.annotation.getKeys(a).filter(zn),o=r.length;for(let t=0;t<o;++t)s[h++]=i.e.getOwn(Hn.name,a,r[t].slice(e))}return s}};class Kn{constructor(t,e,s,n,i,r){this.callback=t,this.property=e,this.options=s,this.query=n,this.filter=i,this.map=r}static create(t,e={}){return new Kn(Object(i.q)(e.callback,`${t}Changed`),Object(i.q)(e.property,t),e.options,e.query,e.filter,e.map)}}let Wn=class{constructor(t,e,s,n,i,r=Qn,o=Gn,a=Jn,c){this.controller=t,this.obj=e,this.propertyKey=n,this.query=r,this.filter=o,this.map=a,this.options=c,this.observing=!1,this.children=void 0,this.callback=e[i],this.persistentFlags=2080374799&s,this.createGetterSetter()}getValue(){return this.tryStartObserving(),this.children}setValue(t){}subscribe(t){this.tryStartObserving(),this.addSubscriber(t)}tryStartObserving(){if(!this.observing){this.observing=!0;const t=this.controller.projector;this.children=Yn(t,this.query,this.filter,this.map),t.subscribeToChildrenChange(()=>{this.onChildrenChanged()},this.options)}}onChildrenChanged(){this.children=Yn(this.controller.projector,this.query,this.filter,this.map),void 0!==this.callback&&this.callback.call(this.obj),this.callSubscribers(this.children,void 0,16|this.persistentFlags)}createGetterSetter(){Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})||i.j.write(1,this.propertyKey,this.obj)}};function Qn(t){return t.children}function Gn(t,e,s){return!!s}function Jn(t,e,s){return s}function Yn(t,e,s,n){const i=e(t),r=[];for(let t=0,e=i.length;t<e;++t){const e=i[t],o=ei.for(e),a=o?o.viewModel:null;s(e,o,a)&&r.push(n(e,o,a))}return r}function Xn(t){return function(e){return ei.define(t,e)}}Wn=Object(r.a)([o(),Object(r.b)("design:paramtypes",[Object,Object,Number,String,String,Object,Object,Object,Object])],Wn);const Zn=new WeakMap;class ti{constructor(t,e,s,n,i,r,o,a,c,h,l,u,d,p,f,b,g,m,v,y){this.Type=t,this.name=e,this.aliases=s,this.key=n,this.cache=i,this.template=r,this.instructions=o,this.dependencies=a,this.injectable=c,this.needsCompile=h,this.surrogates=l,this.bindables=u,this.childrenObservers=d,this.containerless=p,this.isStrictBinding=f,this.shadowOptions=b,this.hasSlots=g,this.strategy=m,this.hooks=v,this.scopeParts=y}static create(t,e=null){if(null===e){const s=t;if("string"==typeof s)throw new Error(`Cannot create a custom element definition with only a name and no type: ${t}`);const n=Object(i.t)("name",s,ei.generateName);return e="function"==typeof s.Type?s.Type:ei.generateType(Object(i.E)(n)),new ti(e,n,Object(i.A)(s.aliases),Object(i.t)("key",s,()=>ei.keyFrom(n)),Object(i.t)("cache",s,()=>0),Object(i.t)("template",s,()=>null),Object(i.A)(s.instructions),Object(i.A)(s.dependencies),Object(i.t)("injectable",s,()=>null),Object(i.t)("needsCompile",s,()=>!0),Object(i.A)(s.surrogates),on.from(s.bindables),Hn.from(s.childrenObservers),Object(i.t)("containerless",s,()=>!1),Object(i.t)("isStrictBinding",s,()=>!1),Object(i.t)("shadowOptions",s,()=>null),Object(i.t)("hasSlots",s,()=>!1),Object(i.t)("strategy",s,()=>1),Object(i.t)("hooks",s,()=>Z.none),Object(i.A)(s.scopeParts))}if("string"==typeof t)return new ti(e,t,Object(i.A)(ei.getAnnotation(e,"aliases"),e.aliases),ei.keyFrom(t),Object(i.s)("cache",e,()=>0),Object(i.s)("template",e,()=>null),Object(i.A)(ei.getAnnotation(e,"instructions"),e.instructions),Object(i.A)(ei.getAnnotation(e,"dependencies"),e.dependencies),Object(i.s)("injectable",e,()=>null),Object(i.s)("needsCompile",e,()=>!0),Object(i.A)(ei.getAnnotation(e,"surrogates"),e.surrogates),on.from(...on.getAll(e),ei.getAnnotation(e,"bindables"),e.bindables),Hn.from(...Hn.getAll(e),ei.getAnnotation(e,"childrenObservers"),e.childrenObservers),Object(i.s)("containerless",e,()=>!1),Object(i.s)("isStrictBinding",e,()=>!1),Object(i.s)("shadowOptions",e,()=>null),Object(i.s)("hasSlots",e,()=>!1),Object(i.s)("strategy",e,()=>1),Object(i.s)("hooks",e,()=>new Z(e.prototype)),Object(i.A)(ei.getAnnotation(e,"scopeParts"),e.scopeParts));const s=Object(i.t)("name",t,ei.generateName);return new ti(e,s,Object(i.A)(ei.getAnnotation(e,"aliases"),t.aliases,e.aliases),ei.keyFrom(s),Object(i.r)("cache",t,e,()=>0),Object(i.r)("template",t,e,()=>null),Object(i.A)(ei.getAnnotation(e,"instructions"),t.instructions,e.instructions),Object(i.A)(ei.getAnnotation(e,"dependencies"),t.dependencies,e.dependencies),Object(i.r)("injectable",t,e,()=>null),Object(i.r)("needsCompile",t,e,()=>!0),Object(i.A)(ei.getAnnotation(e,"surrogates"),t.surrogates,e.surrogates),on.from(...on.getAll(e),ei.getAnnotation(e,"bindables"),e.bindables,t.bindables),Hn.from(...Hn.getAll(e),ei.getAnnotation(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),Object(i.r)("containerless",t,e,()=>!1),Object(i.r)("isStrictBinding",t,e,()=>!1),Object(i.r)("shadowOptions",t,e,()=>null),Object(i.r)("hasSlots",t,e,()=>!1),Object(i.r)("strategy",t,e,()=>1),Object(i.s)("hooks",e,()=>new Z(e.prototype)),Object(i.A)(ei.getAnnotation(e,"scopeParts"),t.scopeParts,e.scopeParts))}static getOrCreate(t){if(t instanceof ti)return t;if(Zn.has(t))return Zn.get(t);const e=ti.create(t);return Zn.set(t,e),i.e.define(ei.name,e,e.Type),e}register(t){const{Type:e,key:s,aliases:n}=this;i.i.transient(s,e).register(t),i.i.alias(s,e).register(t),tt(n,ei,s,t)}}const ei={name:i.h.resource.keyFor("custom-element"),keyFrom:t=>`${ei.name}:${t}`,isType:t=>"function"==typeof t&&i.e.hasOwn(ei.name,t),for(t,e,s){if(void 0===e)return i.e.getOwn(ei.name,t);if("string"==typeof e){if(!0!==s){const s=i.e.getOwn(ei.name,t);if(void 0===s)return;return s.is(e)?s:void 0}let n=t;for(;null!==n;){const t=i.e.getOwn(ei.name,n);if(void 0!==t&&t.is(e))return t;n=mn.getEffectiveParentNode(n)}return}let n=t;for(;null!==n;){const t=i.e.getOwn(ei.name,n);if(void 0!==t)return t;n=mn.getEffectiveParentNode(n)}},define(t,e){const s=ti.create(t,e);return i.e.define(ei.name,s,s.Type),i.e.define(ei.name,s,s),i.h.resource.appendTo(s.Type,ei.name),s.Type},getDefinition(t){const e=i.e.getOwn(ei.name,t);if(void 0===e)throw new Error(`No definition found for type ${t.name}`);return e},annotate(t,e,s){i.e.define(i.h.annotation.keyFor(e),s,t)},getAnnotation:(t,e)=>i.e.getOwn(i.h.annotation.keyFor(e),t),generateName:function(){let t=0;return function(){return`unnamed-${++t}`}}(),createInjectable(){const t=function(e,s,n){return i.a.getOrCreateAnnotationParamTypes(e)[n]=t,e};return t.register=function(e){return{resolve:(e,s)=>s.has(t,!0)?s.get(t):null}},t},generateType:function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(s,n=e){const i=class{};return t.value=s,Reflect.defineProperty(i,"name",t),n!==e&&Object.assign(i.prototype,n),i}}()},si=i.a.createInterface("IProjectorLocator").noDefault(),ni=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ii=i.a.createInterface("ISanitizer").withDefault(t=>t.singleton(class{sanitize(t){return t.replace(ni,"")}}));let ri=class{constructor(t){this.sanitizer=t}toView(t){return null==t?null:this.sanitizer.sanitize(t)}};ri=Object(r.a)([mt("sanitize"),Object(r.c)(0,ii),Object(r.b)("design:paramtypes",[Object])],ri);const oi=i.a.createInterface("ITemplateCompiler").noDefault(),ai=i.a.createInterface("IInstructionRenderer").noDefault(),ci=i.a.createInterface("IRenderer").noDefault();function hi(t){return function(e){const s=function(...s){const n=new e(...s);return n.instructionType=t,n};s.register=function(t){i.i.singleton(ai,s).register(t)};const n=i.e.getOwnKeys(e);for(const t of n)i.e.define(t,i.e.getOwn(t,e),s);const r=Object.getOwnPropertyDescriptors(e);return Object.keys(r).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(s,t,r[t])}),s}}let li=class{constructor(t){const e=this.instructionRenderers={};t.forEach(t=>{e[t.instructionType]=t.render.bind(t)})}static register(t){return i.i.singleton(ci,this).register(t)}render(t,e,s,n,i,r,o){const a=i.instructions;if(n.length!==a.length)throw new Error(`The compiled template is not aligned with the render instructions. There are ${n.length} targets and ${a.length} instructions.`);for(let i=0,r=n.length;i<r;++i)this.renderInstructions(t,e,a[i],s,n[i],o);null!=r&&this.renderInstructions(t,e,i.surrogates,s,r,o)}renderInstructions(t,e,s,n,i,r){const o=this.instructionRenderers;let a;for(let c=0,h=s.length;c<h;++c)a=s[c],o[a.type](t,e,n,i,a,r)}};function ui(t,e,s){return"string"==typeof e?t.parse(e,s):e}function di(t){return void 0!==t.bindingContext?t.bindingContext:t}li=Object(r.a)([Object(r.c)(0,Object(i.l)(ai)),Object(r.b)("design:paramtypes",[Array])],li);let pi=class{render(t,e,s,n,i){const r=di(n);void 0!==r.$observers&&void 0!==r.$observers[i.to]?r.$observers[i.to].setValue(i.value,4096):r[i.to]=i.value}};pi=Object(r.a)([hi("re")],pi);let fi=class{render(t,e,s,n,r,o){o=Y(o,r.parts);const a=e.getComponentFactory(s,n,r,void 0,n),c=ei.keyFrom(r.res),h=a.createComponent(c),l=e.get($),u=Ri.forCustomElement(h,l,n,e,o,t);t=u.flags,i.e.define(c,u,n),e.renderInstructions(t,r.instructions,s,u,o),s.addController(u),a.dispose()}};fi=Object(r.a)([hi("ra")],fi);let bi=class{render(t,e,s,n,r,o){const a=e.getComponentFactory(s,n,r,void 0,void 0),c=un.keyFrom(r.res),h=a.createComponent(c),l=e.get($),u=Ri.forCustomAttribute(h,l,t);i.e.define(c,u,n),e.renderInstructions(t,r.instructions,s,u,o),s.addController(u),a.dispose()}};bi=Object(r.a)([hi("rb")],bi);let gi=class{render(t,e,s,n,r,o){o=Y(o,r.parts);const a=Vi(r.def,e,o).getViewFactory(),c=e.dom.convertToRenderLocation(n),h=e.getComponentFactory(s,n,r,a,c),l=un.keyFrom(r.res),u=h.createComponent(l),d=e.get($),p=Ri.forCustomAttribute(u,d,t);if(i.e.define(l,p,c),r.link){const t=s.controllers;u.link(t[t.length-1])}e.renderInstructions(t,r.instructions,s,p,o),s.addController(p),h.dispose()}};gi=Object(r.a)([hi("rc")],gi);let mi=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,n,i){e.dom.remove(n);const r=i.instructions,o=i.toBindingContext;let a,c,h;for(let t=0,n=r.length;t<n;++t)a=r[t],c=ui(this.parser,a.from,48),h=Si(new Ks(c,a.to,this.observerLocator,e,o),c,e),s.addBinding(h)}};mi=Object(r.a)([hi("rd"),Object(r.c)(0,Ms),Object(r.c)(1,Is),Object(r.b)("design:paramtypes",[Object,Object])],mi);let vi=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,n,i){const r=ui(this.parser,i.from,153),o=Si(new Ls(r,di(n),i.to,this.observerLocator,e),r,e);s.addBinding(o)}};vi=Object(r.a)([hi("rh"),Object(r.c)(0,Ms),Object(r.c)(1,Is),Object(r.b)("design:paramtypes",[Object,Object])],vi);let yi=class{constructor(t){this.parser=t}render(t,e,s,n,i){const r=ui(this.parser,i.from,5376),o=Si(new Ws(r,function(t,e){if("element"===e)return t;switch(e){case"controller":return ei.for(t);case"view":throw new Error("Not supported API");case"view-model":return ei.for(t).viewModel;default:{const s=un.for(t,e);if(void 0!==s)return s.viewModel;const n=ei.for(t,e);if(void 0===n)throw new Error(`Attempted to reference "${e}", but it was not found amongst the target's API.`);return n.viewModel}}}(n,i.to),e),r,e);s.addBinding(o)}};yi=Object(r.a)([hi("rj"),Object(r.c)(0,Ms),Object(r.b)("design:paramtypes",[Object])],yi);let wi=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,n,i){let r;const o=ui(this.parser,i.from,2048);r=o.isMulti?Si(new zs(this.observerLocator,o,di(n),i.to,Xt.toView,e),o,e):Si(new Hs(o.firstExpression,o,di(n),i.to,Xt.toView,this.observerLocator,e,!0),o,e),s.addBinding(r)}};wi=Object(r.a)([hi("rf"),Object(r.c)(0,Ms),Object(r.c)(1,Is),Object(r.b)("design:paramtypes",[Object,Object])],wi);let Oi=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,n,i){const r=ui(this.parser,i.from,48|i.mode),o=Si(new Bs(r,di(n),i.to,i.mode,this.observerLocator,e),r,e);s.addBinding(o)}};Oi=Object(r.a)([hi("rg"),Object(r.c)(0,Ms),Object(r.c)(1,Is),Object(r.b)("design:paramtypes",[Object,Object])],Oi);let ki=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,n,i){const r=ui(this.parser,i.from,539),o=Si(new Bs(r,di(n),i.to,Xt.toView,this.observerLocator,e),r,e);s.addBinding(o)}};ki=Object(r.a)([hi("rk"),Object(r.c)(0,Ms),Object(r.c)(1,Is),Object(r.b)("design:paramtypes",[Object,Object])],ki);let Ci=0;const ji=[];function Si(t,e,s){for(;e instanceof jt;)ji[Ci++]=e,e=e.expression;for(;Ci>0;){const e=ji[--Ci],n=s.get(e.behaviorKey);n instanceof ft&&(t=n.construct(t,e))}return ji.length=0,t}const xi=new WeakMap,Ti=new WeakMap,Ai=new WeakMap;function Ii(t){return t instanceof $i}function Vi(t,e,s){const n=ti.getOrCreate(t);if(Ii(e)&&(s=Y(e.parts,s)),null!==n.injectable)return new $i(n,e,s);if(void 0===s){let t=xi.get(n);void 0===t&&xi.set(n,t=new WeakMap);let i=t.get(e);return void 0===i&&t.set(e,i=new $i(n,e,s)),i}let i=Ti.get(n);void 0===i&&Ti.set(n,i=new WeakMap);let r=i.get(e);void 0===r&&i.set(e,r=new WeakMap);let o=r.get(s);return void 0===o&&r.set(s,o=new $i(n,e,s)),o}class $i{constructor(t,e,s){this.definition=t,this.parentContainer=e,this.parts=s,this.viewModelProvider=void 0,this.fragment=null,this.factory=void 0,this.isCompiled=!1,this.compiledDefinition=void 0;const n=this.container=e.createChild();this.renderer=n.get(ci),n.registerResolver(V,this.factoryProvider=new Ei),n.registerResolver(A,this.parentControllerProvider=new i.d),n.registerResolver(X,this.instructionProvider=new i.d),n.registerResolver(pn,this.renderLocationProvider=new i.d),(this.dom=n.get(fn)).registerElementResolver(n,this.elementProvider=new i.d),n.register(...t.dependencies)}has(t,e){return this.container.has(t,e)}get(t){return this.container.get(t)}getAll(t){return this.container.getAll(t)}register(...t){return this.container.register(...t)}registerResolver(t,e){return this.container.registerResolver(t,e)}registerTransformer(t,e){return this.container.registerTransformer(t,e)}getResolver(t,e){return this.container.getResolver(t,e)}getFactory(t){return this.container.getFactory(t)}createChild(){return this.container.createChild()}compile(){let t;if(this.isCompiled)return this;this.isCompiled=!0;const e=this.definition;if(e.needsCompile){const s=this.container,n=s.get(oi);t=this.compiledDefinition=n.compile(e,s)}else t=this.compiledDefinition=e;if(t.register(this),Ai.has(t))this.fragment=Ai.get(t);else{const e=t.template;null===e?Ai.set(t,null):Ai.set(t,this.fragment=this.dom.createDocumentFragment(e))}return this}getViewFactory(t){let e=this.factory;if(void 0===e){void 0===t&&(t=this.definition.name);const s=this.parentContainer.get($);e=this.factory=new Li(t,this,s,this.parts)}return e}beginChildComponentOperation(t){const e=this.definition;return null!==e.injectable&&(void 0===this.viewModelProvider&&this.container.registerResolver(e.injectable,this.viewModelProvider=new i.d),this.viewModelProvider.prepare(t)),this}createNodes(){return this.dom.createNodeSequence(this.fragment)}getComponentFactory(t,e,s,n,i){return void 0!==t&&this.parentControllerProvider.prepare(t),void 0!==e&&this.elementProvider.prepare(e),void 0!==s&&this.instructionProvider.prepare(s),void 0!==i&&this.renderLocationProvider.prepare(i),void 0!==n&&this.factoryProvider.prepare(n),this}createComponent(t){return this.container.get(t)}render(t,e,s,n,i,r){this.renderer.render(t,this,e,s,n,i,r)}renderInstructions(t,e,s,n,i){this.renderer.renderInstructions(t,this,e,s,n,i)}dispose(){this.factoryProvider.dispose(),this.parentControllerProvider.dispose(),this.instructionProvider.dispose(),this.elementProvider.dispose(),this.renderLocationProvider.dispose()}}class Ei{constructor(){this.factory=null}prepare(t){this.factory=t}resolve(t,e){const s=this.factory;if(null===s)throw i.j.error(50);if("string"!=typeof s.name||0===s.name.length)throw i.j.error(51);return s.resolve(e)}dispose(){this.factory=null}}const Pi=new WeakMap;class Ri{constructor(t,e,s,n,r,o,a,c){this.vmKind=t,this.flags=e,this.lifecycle=s,this.hooks=n,this.viewFactory=r,this.viewModel=o,this.bindingContext=a,this.host=c,this.id=Object(i.C)("au$component"),this.nextBound=void 0,this.nextUnbound=void 0,this.prevBound=void 0,this.prevUnbound=void 0,this.nextAttached=void 0,this.nextDetached=void 0,this.prevAttached=void 0,this.prevDetached=void 0,this.nextMount=void 0,this.nextUnmount=void 0,this.prevMount=void 0,this.prevUnmount=void 0,this.parent=void 0,this.bindings=void 0,this.controllers=void 0,this.state=0,this.scopeParts=void 0,this.isStrictBinding=!1,this.scope=void 0,this.part=void 0,this.projector=void 0,this.nodes=void 0,this.context=void 0,this.location=void 0,this.mountStrategy=1}static getCached(t){return Pi.get(t)}static getCachedOrThrow(t){const e=Ri.getCached(t);if(void 0===e)throw new Error(`There is no cached controller for the provided ViewModel: ${String(t)}`);return e}static forCustomElement(t,e,s,n,i,r=0){if(Pi.has(t))return Pi.get(t);const o=ei.getDefinition(t.constructor);r|=o.strategy;const a=new Ri(0,r,e,o.hooks,void 0,t,Ni(r,t),s);return Pi.set(t,a),a.hydrateCustomElement(o,n,i),a}static forCustomAttribute(t,e,s=0){if(Pi.has(t))return Pi.get(t);const n=un.getDefinition(t.constructor);s|=n.strategy;const i=new Ri(1,s,e,n.hooks,void 0,t,Ni(s,t),void 0);return Pi.set(t,i),i.hydrateCustomAttribute(n),i}static forSyntheticView(t,e,s,n=0){const i=new Ri(2,n,e,Z.none,t,void 0,void 0,void 0);return i.hydrateSynthetic(s,t.parts),i}hydrateCustomElement(t,e,s){const n=this.flags|=t.strategy,i=this.viewModel;Bi(this.lifecycle,t,n,i),function(t,e,s,n){const i=e.childrenObservers,r=Object.getOwnPropertyNames(i),o=r.length;if(o>0){const e=Fi(n);let a;for(let c=0;c<o;++c)if(a=r[c],null==e[a]){const r=i[a];e[a]=new Wn(t,n,s,a,r.callback,r.query,r.filter,r.map,r.options)}}}(this,t,n,i),this.scope=H.create(n,this.bindingContext,null);const r=this.hooks;if(r.hasCreate){const n=i.create(this,e,t,s);void 0!==n&&n!==t&&(t=ti.getOrCreate(n))}const o=this.context=Vi(t,e,s);t.register(o),null!==t.injectable&&o.beginChildComponentOperation(i),r.hasBeforeCompile&&i.beforeCompile(this);const a=o.compile(),c=a.compiledDefinition;this.scopeParts=c.scopeParts,this.isStrictBinding=c.isStrictBinding;const h=e.get(si);this.projector=h.getElementProjector(o.dom,this,this.host,c),i.$controller=this;const l=this.nodes=a.createNodes();r.hasAfterCompile&&i.afterCompile(this);const u=l.findTargets();a.render(this.flags,this,u,c,this.host,s),r.hasAfterCompileChildren&&i.afterCompileChildren(this)}hydrateCustomAttribute(t){const e=this.flags|t.strategy,s=this.viewModel;Bi(this.lifecycle,t,e,s),s.$controller=this}hydrateSynthetic(t,e){this.context=t;const s=t.compile(),n=s.compiledDefinition;this.scopeParts=n.scopeParts,this.isStrictBinding=n.isStrictBinding;const i=(this.nodes=s.createNodes()).findTargets();s.render(this.flags,this,i,n,void 0,e)}addBinding(t){void 0===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addController(t){void 0===this.controllers?this.controllers=[t]:this.controllers[this.controllers.length]=t}is(t){switch(this.vmKind){case 1:return un.getDefinition(this.viewModel.constructor).name===t;case 0:return ei.getDefinition(this.viewModel.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.state|=256}hold(t,e){this.state=512^(512|this.state),this.location=t,this.mountStrategy=e}release(t){return this.state|=512,(32&this.state)>0?this.viewFactory.canReturnToCache(this):this.unmountSynthetic(t)}bind(t,e,s){switch(this.part=s,t|=4096,this.vmKind){case 0:return this.bindCustomElement(t,e);case 1:return this.bindCustomAttribute(t,e);case 2:return this.bindSynthetic(t,e)}}unbind(t){switch(t|=8192,this.vmKind){case 0:return this.unbindCustomElement(t);case 1:return this.unbindCustomAttribute(t);case 2:return this.unbindSynthetic(t)}}afterBind(t){this.bindingContext.afterBind(t)}afterUnbind(t){this.bindingContext.afterUnbind(t)}attach(t){if(!((40&this.state)>0&&0==(33554432&t)))switch(t|=16384,this.vmKind){case 0:this.attachCustomElement(t);break;case 1:this.attachCustomAttribute(t);break;case 2:this.attachSynthetic(t)}}detach(t){if(0!=(40&this.state))switch(t|=32768,this.vmKind){case 0:this.detachCustomElement(t);break;case 1:this.detachCustomAttribute(t);break;case 2:this.detachSynthetic(t)}}afterAttach(t){this.bindingContext.afterAttach(t)}afterDetach(t){this.bindingContext.afterDetach(t)}mount(t){switch(this.vmKind){case 0:this.mountCustomElement(t);break;case 2:this.mountSynthetic(t)}}unmount(t){switch(this.vmKind){case 0:this.unmountCustomElement(t);break;case 2:this.unmountSynthetic(t)}}cache(t){switch(this.vmKind){case 0:this.cacheCustomElement(t);break;case 1:this.cacheCustomAttribute(t);break;case 2:this.cacheSynthetic(t)}}getTargetAccessor(t){const{bindings:e}=this;if(void 0!==e){const s=e.find(e=>e.targetProperty===t);if(void 0!==s)return s.targetObserver}}bindCustomElement(t,e){const s=this.scope;if(s.parentScope=void 0===e?null:e,s.scopeParts=this.scopeParts,(4&this.state)>0)return kn.done;if(t|=4096,this.state|=1,this.lifecycle.afterBind.begin(),this.hooks.hasBeforeBind){const e=this.bindingContext.beforeBind(t);if(Rn(e))return new Vn(e,this.bindBindings,this,t,this.scope)}return this.bindBindings(t,this.scope)}bindCustomAttribute(t,e){if((4&this.state)>0){if(this.scope===e)return kn.done;t|=4096;const s=this.unbind(t);if(!s.done)return new Vn(s,this.bind,this,t,e)}else t|=4096;if(this.state|=1,this.scope=e,this.lifecycle.afterBind.begin(),this.hooks.hasBeforeBind){const e=this.bindingContext.beforeBind(t);if(Rn(e))return new Vn(e,this.endBind,this,t)}return this.endBind(t),kn.done}bindSynthetic(t,e){if(null==e)throw new Error("Scope is null or undefined");if(e.scopeParts=Object(i.B)(e.scopeParts,this.scopeParts,!1),(4&this.state)>0){if(this.scope===e||(256&this.state)>0)return kn.done;t|=4096;const s=this.unbind(t);if(!s.done)return new Vn(s,this.bind,this,t,e)}else t|=4096;return 0==(256&this.state)&&(this.scope=e),this.state|=1,this.lifecycle.afterBind.begin(),this.bindBindings(t,this.scope)}bindBindings(t,e){const{bindings:s}=this;if(void 0!==s){const{length:n}=s;this.isStrictBinding&&(t|=4);for(let i=0;i<n;++i)s[i].$bind(t,e,this.part)}return this.bindControllers(t,this.scope)}bindControllers(t,e){let s,n=void 0;const{controllers:i}=this;if(void 0!==i){const{length:r}=i;for(let o=0;o<r;++o)i[o].parent=this,s=i[o].bind(t,e,this.part),s.done||(void 0===n&&(n=[]),n.push(s))}return void 0===n?(this.endBind(t),kn.done):new En(n,this.endBind,this,t)}endBind(t){this.hooks.hasAfterBind&&this.lifecycle.afterBind.add(this),this.state=1^this.state|4,this.lifecycle.afterBind.end(t)}unbindCustomElement(t){if(0==(4&this.state))return kn.done;if(this.scope.parentScope=null,this.state|=2,t|=8192,this.lifecycle.afterUnbind.begin(),this.hooks.hasBeforeUnbind){const e=this.bindingContext.beforeUnbind(t);if(Rn(e))return new Vn(e,this.unbindControllers,this,t)}return this.unbindControllers(t)}unbindCustomAttribute(t){if(0==(4&this.state))return kn.done;if(this.state|=2,t|=8192,this.lifecycle.afterUnbind.begin(),this.hooks.hasBeforeUnbind){const e=this.bindingContext.beforeUnbind(t);if(Rn(e))return new Vn(e,this.endUnbind,this,t)}return this.endUnbind(t),kn.done}unbindSynthetic(t){return 0==(4&this.state)?kn.done:(this.state|=2,t|=8192,this.lifecycle.afterUnbind.begin(),this.unbindControllers(t))}unbindBindings(t){const{bindings:e}=this;if(void 0!==e)for(let s=e.length-1;s>=0;--s)e[s].$unbind(t);this.endUnbind(t)}unbindControllers(t){let e,s=void 0;const{controllers:n}=this;if(void 0!==n)for(let i=n.length-1;i>=0;--i)e=n[i].unbind(t),n[i].parent=void 0,e.done||(void 0===s&&(s=[]),s.push(e));return void 0===s?(this.unbindBindings(t),kn.done):new En(s,this.unbindBindings,this,t)}endUnbind(t){switch(this.vmKind){case 1:this.scope=void 0;break;case 2:0==(256&this.state)&&(this.scope=void 0)}this.hooks.hasAfterUnbind&&this.lifecycle.afterUnbind.add(this),this.state=6^(6|this.state),this.lifecycle.afterUnbind.end(t)}attachCustomElement(t){t|=16384,this.state|=8,this.lifecycle.mount.add(this),this.lifecycle.afterAttach.begin(),this.hooks.hasBeforeAttach&&this.bindingContext.beforeAttach(t),this.attachControllers(t),this.hooks.hasAfterAttach&&this.lifecycle.afterAttach.add(this),this.state=8^this.state|32,this.lifecycle.afterAttach.end(t)}attachCustomAttribute(t){t|=16384,this.state|=8,this.lifecycle.afterAttach.begin(),this.hooks.hasBeforeAttach&&this.bindingContext.beforeAttach(t),this.hooks.hasAfterAttach&&this.lifecycle.afterAttach.add(this),this.state=8^this.state|32,this.lifecycle.afterAttach.end(t)}attachSynthetic(t){((32&this.state)>0&&33554432&t)>0?this.lifecycle.mount.add(this):(t|=16384,this.state|=8,this.lifecycle.mount.add(this),this.lifecycle.afterAttach.begin(),this.attachControllers(t),this.state=8^this.state|32,this.lifecycle.afterAttach.end(t))}detachCustomElement(t){t|=32768,this.state|=16,this.lifecycle.afterDetach.begin(),this.lifecycle.unmount.add(this),this.hooks.hasBeforeDetach&&this.bindingContext.beforeDetach(t),this.detachControllers(t),this.hooks.hasAfterDetach&&this.lifecycle.afterDetach.add(this),this.state=48^(48|this.state),this.lifecycle.afterDetach.end(t)}detachCustomAttribute(t){t|=32768,this.state|=16,this.lifecycle.afterDetach.begin(),this.hooks.hasBeforeDetach&&this.bindingContext.beforeDetach(t),this.hooks.hasAfterDetach&&this.lifecycle.afterDetach.add(this),this.state=48^(48|this.state),this.lifecycle.afterDetach.end(t)}detachSynthetic(t){t|=32768,this.state|=16,this.lifecycle.afterDetach.begin(),this.lifecycle.unmount.add(this),this.detachControllers(t),this.state=48^(48|this.state),this.lifecycle.afterDetach.end(t)}attachControllers(t){const{controllers:e}=this;if(void 0!==e){const{length:s}=e;for(let n=0;n<s;++n)e[n].attach(t)}}detachControllers(t){const{controllers:e}=this;if(void 0!==e)for(let s=e.length-1;s>=0;--s)e[s].detach(t)}mountCustomElement(t){(64&this.state)>0||(this.state|=64,this.projector.project(this.nodes))}mountSynthetic(t){const e=this.nodes,s=this.location;switch(this.state|=64,this.mountStrategy){case 2:e.appendTo(s);break;default:e.insertBefore(s)}}unmountCustomElement(t){0!=(64&this.state)&&(this.state=64^(64|this.state),this.projector.take(this.nodes))}unmountSynthetic(t){return 0!=(64&this.state)&&(this.state=64^(64|this.state),this.nodes.remove(),this.nodes.unlink(),!!((512&this.state)>0&&(this.state=512^(512|this.state),this.viewFactory.tryReturnToCache(this))))}cacheCustomElement(t){t|=65536,this.hooks.hasCaching&&this.bindingContext.caching(t)}cacheCustomAttribute(t){t|=65536,this.hooks.hasCaching&&this.bindingContext.caching(t);const{controllers:e}=this;if(void 0!==e){const{length:s}=e;for(let n=s-1;n>=0;--n)e[n].cache(t)}}cacheSynthetic(t){const{controllers:e}=this;if(void 0!==e){const{length:s}=e;for(let n=s-1;n>=0;--n)e[n].cache(t)}}}function Ni(t,e){return!0===e.noProxy||0==(2&t)?e:x.getOrCreate(e).proxy}function Fi(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function Bi(t,e,s,n){const i=e.bindables,r=Object.getOwnPropertyNames(i),o=r.length;if(o>0){let e,a;if((2&s)>0)for(let c=0;c<o;++c)e=r[c],a=i[e],new Qs(t,s,x.getOrCreate(n).proxy,e,a.callback,a.set);else{const c=Fi(n);for(let h=0;h<o;++h)e=r[h],void 0===c[e]&&(a=i[e],c[e]=new Qs(t,s,n,e,a.callback,a.set))}}}class Li{constructor(t,e,s,n){this.name=t,this.context=e,this.lifecycle=s,this.parts=n,this.isCaching=!1,this.cache=null,this.cacheSize=-1}setCacheSize(t,e){t&&("*"===t?t=Li.maxCacheSize:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.cacheSize&&e||(this.cacheSize=t)),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}canReturnToCache(t){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(t.cache(0),this.cache.push(t),!0)}create(t){const e=this.cache;let s;return null!=e&&e.length>0?(s=e.pop(),s):(s=Ri.forSyntheticView(this,this.lifecycle,this.context,t),s)}resolve(t,e){if(void 0===(e=Y(this.parts,e)))return this;const s=e[this.name];return void 0===s?this:Vi(s,t,e).getViewFactory(this.name)}}Li.maxCacheSize=65535;const Mi=new WeakSet;function Di(t){return!Mi.has(t)}function qi(t){return Mi.add(t),ti.create(t)}const Ui={name:i.h.resource.keyFor("views"),has:t=>"function"==typeof t&&(i.e.hasOwn(Ui.name,t)||"$views"in t),get(t){if("function"==typeof t&&"$views"in t){const e=t.$views.filter(Di).map(qi);for(const s of e)Ui.add(t,s)}let e=i.e.getOwn(Ui.name,t);return void 0===e&&i.e.define(Ui.name,e=[],t),e},add(t,e){const s=ti.create(e);let n=i.e.getOwn(Ui.name,t);return void 0===n?i.e.define(Ui.name,n=[s],t):n.push(s),n}};const _i=i.a.createInterface("IViewLocator").noDefault();let zi=class{constructor(t){this.viewLocator=t}toView(t,e){return this.viewLocator.getViewComponentForObject(t,e)}};zi=Object(r.a)([mt("view"),Object(r.c)(0,_i),Object(r.b)("design:paramtypes",[Object])],zi);const Hi=i.a.createInterface("IActivator").withDefault(t=>t.singleton(Ki));class Ki{constructor(t){this.taskManager=t}static register(t){return i.i.singleton(Hi,this).register(t)}activate(t,e,s,n=1024,i){n=void 0===n?0:n;const r=this.taskManager;let o=r.runBeforeRender();return o.done?this.render(t,e,s,n):o=new Vn(o,this.render,this,t,e,s,n),o=o.done?r.runBeforeBind():new Vn(o,r.runBeforeBind,r),o=o.done?this.bind(e,n,i):new Vn(o,this.bind,this,e,n,i),o=o.done?r.runBeforeAttach():new Vn(o,r.runBeforeAttach,r),o.done?this.attach(e,n):o=new Vn(o,this.attach,this,e,n),o}deactivate(t,e=2048){const s=Ri.getCachedOrThrow(t);return s.detach(32768|e),s.unbind(8192|e)}render(t,e,s,n){const i=s.get($);Ri.forCustomElement(e,i,t,s,void 0,n)}bind(t,e,s){return Ri.getCachedOrThrow(t).bind(4096|e,s)}attach(t,e){Ri.getCachedOrThrow(t).attach(16384|e)}}Ki.inject=[xn];class Wi{constructor(t,e){if(this.config=t,null!=t.host)e.has(dn,!1)?this.container=e.createChild():this.container=e,i.i.instance(dn,t.host).register(this.container),this.host=t.host;else{if(!e.has(dn,!0))throw new Error("No host element found.");this.container=e,this.host=e.get(dn)}this.strategy=null!=t.strategy?t.strategy:1;const s=this.container.get(Gi);this.dom=s.initialize(t),this.lifecycle=this.container.get($),this.activator=this.container.get(Hi);const n=this.container.get(xn).runBeforeCreate();n.done?(this.task=kn.done,this.create()):this.task=new Vn(n,this.create,this)}activate(t){const{task:e,host:s,viewModel:n,container:i,activator:r,strategy:o}=this,a=1024|o;if(void 0===n)return void 0===this.createTask&&(this.createTask=new Vn(e,this.activate,this,t)),this.createTask;if(e.done)null==t||t.done?this.task=r.activate(s,n,i,a,void 0):this.task=new Vn(t,r.activate,r,s,n,i,a,void 0);else if(null==t||t.done)this.task=new Vn(e,r.activate,r,s,n,i,a,void 0);else{const o=new Vn(e,t.wait,t);this.task=new Vn(o,r.activate,r,s,n,i,a,void 0)}return this.task}deactivate(t){const{task:e,viewModel:s,activator:n,strategy:i}=this,r=2048|i;if(void 0===s)return void 0===this.createTask&&(this.createTask=new Vn(e,this.deactivate,this,t)),this.createTask;if(e.done)null==t||t.done?this.task=n.deactivate(s,r):this.task=new Vn(t,n.deactivate,n,s,r);else if(null==t||t.done)this.task=new Vn(e,n.deactivate,n,s,r);else{const i=new Vn(e,t.wait,t);this.task=new Vn(i,n.deactivate,n,s,r)}return this.task}create(){const t=this.config,e=this.viewModel=ei.isType(t.component)?this.container.get(t.component):t.component,s=this.container,n=s.get($);this.controller=Ri.forCustomElement(e,n,this.host,s,void 0,this.strategy)}}class Qi{constructor(t=i.a.createContainer()){this.container=t,this.task=kn.done,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,i.i.instance(Qi,this).register(t)}get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(null==this._root){if(null==this.next)throw new Error("root is not defined");return this.next}return this._root}register(...t){return this.container.register(...t),this}app(t){return this.next=new Wi(t,this.container),this.isRunning&&this.start(),this}start(t=this.next){if(null==t)throw new Error("There is no composition root");return this.stop(t),this.task.done?this.onBeforeStart(t):this.task=new Vn(this.task,this.onBeforeStart,this,t),this.task=this.root.activate(this.task),this.task.done?this.task=this.onAfterStart(t):this.task=new Vn(this.task,this.onAfterStart,this,t),this.task}stop(t=this._root){return this._isRunning&&null!=t&&(this.task.done?this.onBeforeStop(t):this.task=new Vn(this.task,this.onBeforeStop,this,t),this.task=t.deactivate(this.task),this.task.done?this.task=this.onAfterStop(t):this.task=new Vn(this.task,this.onAfterStop,this,t)),this.task}wait(){return this.task.wait()}onBeforeStart(t){Reflect.set(t.host,"$aurelia",this),this._root=t,this._isStarting=!0}onAfterStart(t){return this._isRunning=!0,this._isStarting=!1,this.dispatchEvent(t,"aurelia-composed",t.dom),this.dispatchEvent(t,"au-started",t.host),kn.done}onBeforeStop(t){this._isRunning=!1,this._isStopping=!0}onAfterStop(t){return Reflect.deleteProperty(t.host,"$aurelia"),this._root=void 0,this._isStopping=!1,this.dispatchEvent(t,"au-stopped",t.host),kn.done}dispatchEvent(t,e,s){(s="dispatchEvent"in s?s:t.dom).dispatchEvent(t.dom.createCustomEvent(e,{detail:this,bubbles:!0,cancelable:!0}))}}i.f.global.Aurelia=Qi;const Gi=i.a.createInterface("IDOMInitializer").noDefault(),Ji=[Es,M,li,Tn,class{constructor(){this.modelInstanceToBoundComponent=new WeakMap,this.modelTypeToUnboundComponent=new Map}static register(t){return i.i.singleton(_i,this).register(t)}getViewComponentForObject(t,e){if(t){const s=Ui.has(t.constructor)?Ui.get(t.constructor):[],n="function"==typeof e?e(t,s):this.getViewName(s,e);return this.getOrCreateBoundComponent(t,s,n)}return null}getOrCreateBoundComponent(t,e,s){let n,i=this.modelInstanceToBoundComponent.get(t);if(void 0===i?(i={},this.modelInstanceToBoundComponent.set(t,i)):n=i[s],void 0===n){const r=this.getOrCreateUnboundComponent(t,e,s);n=ei.define(ei.getDefinition(r),class extends r{constructor(){super(t)}}),i[s]=n}return n}getOrCreateUnboundComponent(t,e,s){let n,i=this.modelTypeToUnboundComponent.get(t.constructor);if(void 0===i?(i={},this.modelTypeToUnboundComponent.set(t.constructor,i)):n=i[s],void 0===n){n=ei.define(this.getView(e,s),class{constructor(t){this.viewModel=t}create(t,e,s,n){const i=this.viewModel;if(t.scope=H.fromParent(t.flags,t.scope,i),void 0!==i.create)return i.create(t,e,s,n)}});const r=n.prototype;"beforeCompile"in t&&(r.beforeCompile=function(t){this.viewModel.beforeCompile(t)}),"afterCompile"in t&&(r.afterCompile=function(t){this.viewModel.afterCompile(t)}),"afterCompileChildren"in t&&(r.afterCompileChildren=function(t){this.viewModel.afterCompileChildren(t)}),"beforeBind"in t&&(r.beforeBind=function(t){return this.viewModel.beforeBind(t)}),"afterBind"in t&&(r.afterBind=function(t){this.viewModel.afterBind(t)}),"beforeUnbind"in t&&(r.beforeUnbind=function(t){return this.viewModel.beforeUnbind(t)}),"afterUnbind"in t&&(r.afterUnbind=function(t){this.viewModel.afterUnbind(t)}),"beforeAttach"in t&&(r.beforeAttach=function(t){this.viewModel.beforeAttach(t)}),"afterAttach"in t&&(r.afterAttach=function(t){this.viewModel.afterAttach(t)}),"beforeDetach"in t&&(r.beforeDetach=function(t){this.viewModel.beforeDetach(t)}),"afterDetach"in t&&(r.afterDetach=function(t){this.viewModel.afterDetach(t)}),"caching"in t&&(r.caching=function(t){this.viewModel.caching(t)}),i[s]=n}return n}getViewName(t,e){return e||(1===t.length?t[0].name:"default-view")}getView(t,e){const s=t.find(t=>t.name===e);if(void 0===s)throw new Error(`Could not find view: ${e}`);return s}},De],Yi=[wn,yn,On,Nn,Fn,Bn,Un,_n,ri,zi,tn,Js,Ys,Xs,en,sn,Zs],Xi=[Oi,ki,vi,yi,wi,pi,fi,bi,gi,mi],Zi={register:t=>t.register(...Ji,...Yi,...Xi),createContainer(){return this.register(i.a.createContainer())}};class tr{constructor(t,e){this.from=t,this.to=e,this.type="rf"}}class er{constructor(t,e){this.from=t,this.to=e,this.type="rg",this.mode=Xt.oneTime,this.oneTime=!0}}class sr{constructor(t,e){this.from=t,this.to=e,this.type="rg",this.mode=Xt.toView,this.oneTime=!1}}class nr{constructor(t,e){this.from=t,this.to=e,this.type="rg",this.mode=Xt.fromView,this.oneTime=!1}}class ir{constructor(t,e){this.from=t,this.to=e,this.type="rg",this.mode=Xt.twoWay,this.oneTime=!1}}class rr{constructor(t,e){this.from=t,this.to=e,this.type="rk"}}class or{constructor(t,e){this.from=t,this.to=e,this.type="rh"}}class ar{constructor(t,e){this.from=t,this.to=e,this.type="rj",this.type="rj"}}class cr{constructor(t,e){this.value=t,this.to=e,this.type="re"}}class hr{constructor(t,e,s){this.res=t,this.instructions=e,this.parts=s,this.type="ra"}}class lr{constructor(t,e){this.res=t,this.instructions=e,this.type="rb"}}class ur{constructor(t,e,s,n,i){this.def=t,this.res=e,this.instructions=s,this.link=n,this.parts=i,this.type="rc"}}class dr{constructor(t,e){this.instructions=t,this.toBindingContext=e,this.type="rd"}}class pr{constructor(t,e){this.from=t,this.to=e,this.type="ri"}}s.d(e,"n",(function(){return Rt})),s.d(e,"Eb",(function(){return wt})),s.d(e,"Fb",(function(){return Ot})),s.d(e,"w",(function(){return Ct})),s.d(e,"j",(function(){return jt})),s.d(e,"vb",(function(){return St})),s.d(e,"g",(function(){return xt})),s.d(e,"q",(function(){return Tt})),s.d(e,"d",(function(){return At})),s.d(e,"c",(function(){return It})),s.d(e,"b",(function(){return Vt})),s.d(e,"a",(function(){return $t})),s.d(e,"p",(function(){return Et})),s.d(e,"o",(function(){return Pt})),s.d(e,"i",(function(){return Nt})),s.d(e,"ub",(function(){return Ft})),s.d(e,"gb",(function(){return Bt})),s.d(e,"B",(function(){return Lt})),s.d(e,"f",(function(){return Mt})),s.d(e,"eb",(function(){return Dt})),s.d(e,"qb",(function(){return qt})),s.d(e,"ob",(function(){return Ut})),s.d(e,"e",(function(){return _t})),s.d(e,"db",(function(){return zt})),s.d(e,"k",(function(){return Ht})),s.d(e,"z",(function(){return Wt})),s.d(e,"V",(function(){return Qt})),s.d(e,"ib",(function(){return Bs})),s.d(e,"zb",(function(){return ht})),s.d(e,"J",(function(){return Ms})),s.d(e,"cb",(function(){return zs})),s.d(e,"W",(function(){return Hs})),s.d(e,"M",(function(){return Is})),s.d(e,"R",(function(){return Vs})),s.d(e,"Q",(function(){return $s})),s.d(e,"mb",(function(){return D})),s.d(e,"Jb",(function(){return o})),s.d(e,"yb",(function(){return dt})),s.d(e,"Ab",(function(){return cn})),s.d(e,"t",(function(){return un})),s.d(e,"Kb",(function(){return hn})),s.d(e,"Bb",(function(){return Xn})),s.d(e,"u",(function(){return ei})),s.d(e,"v",(function(){return ti})),s.d(e,"N",(function(){return si})),s.d(e,"F",(function(){return Me})),s.d(e,"P",(function(){return _e})),s.d(e,"pb",(function(){return Ke})),s.d(e,"xb",(function(){return nn})),s.d(e,"s",(function(){return Ri})),s.d(e,"h",(function(){return Qi})),s.d(e,"I",(function(){return Gi})),s.d(e,"kb",(function(){return Zi})),s.d(e,"S",(function(){return X})),s.d(e,"Ib",(function(){return tt})),s.d(e,"x",(function(){return mn})),s.d(e,"L",(function(){return dn})),s.d(e,"O",(function(){return pn})),s.d(e,"H",(function(){return fn})),s.d(e,"l",(function(){return Xt})),s.d(e,"m",(function(){return or})),s.d(e,"A",(function(){return nr})),s.d(e,"C",(function(){return lr})),s.d(e,"D",(function(){return hr})),s.d(e,"E",(function(){return ur})),s.d(e,"X",(function(){return tr})),s.d(e,"Y",(function(){return rr})),s.d(e,"Z",(function(){return pr})),s.d(e,"ab",(function(){return dr})),s.d(e,"fb",(function(){return er})),s.d(e,"jb",(function(){return ar})),s.d(e,"lb",(function(){return cr})),s.d(e,"sb",(function(){return sr})),s.d(e,"tb",(function(){return ir})),s.d(e,"K",(function(){return $})),s.d(e,"G",(function(){return A})),s.d(e,"U",(function(){return V})),s.d(e,"Db",(function(){return Vi})),s.d(e,"Hb",(function(){return Ii})),s.d(e,"rb",(function(){return $n})),s.d(e,"r",(function(){return Vn})),s.d(e,"bb",(function(){return kn})),s.d(e,"hb",(function(){return An})),s.d(e,"nb",(function(){return class t{constructor(t){this.type=t,this._slot=void 0,this._promiseOrTask=void 0,this._container=void 0,this._key=void 0,this._callback=void 0,this._task=void 0}get slot(){if(void 0===this._slot)throw new Error("StartTask.slot is not set");return this._slot}get promiseOrTask(){if(void 0===this._promiseOrTask)throw new Error("StartTask.promiseOrTask is not set");return this._promiseOrTask}get container(){if(void 0===this._container)throw new Error("StartTask.container is not set");return this._container}get key(){if(void 0===this._key)throw new Error("StartTask.key is not set");return this._key}get callback(){if(void 0===this._callback)throw new Error("StartTask.callback is not set");return this._callback}get task(){if(void 0===this._task)throw new Error("StartTask.task is not set");return this._task}static with(e){const s=new t(0);return s._key=e,s}static from(e){const s=new t(1);return s._promiseOrTask=e,s}beforeCreate(){return this.at(0)}beforeRender(){return this.at(1)}beforeBind(){return this.at(2)}beforeAttach(){return this.at(3)}at(t){return this._slot=t,this}call(t){return this._callback=t,this}register(t){return this._container=t.register(i.i.instance(jn,this))}resolveTask(){if(void 0===this._task)switch(this.type){case 0:this._task=new In(this.container,this.key,this.callback);break;case 1:this._task=new $n(this.promiseOrTask)}return this.task}}})),s.d(e,"y",(function(){return ie})),s.d(e,"wb",(function(){return Si})),s.d(e,"T",(function(){return oi})),s.d(e,"Gb",(function(){return hi})),s.d(e,"Cb",(function(){return ui}))},function(t,e,s){"use strict";var n=s(2);class i{constructor(t,e,s,n,i,r,o,a){this.dom=t,this.targetEvent=e,this.delegationStrategy=s,this.sourceExpression=n,this.target=i,this.preventDefault=r,this.eventManager=o,this.locator=a,this.interceptor=this,this.$state=0}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const s=this.sourceExpression.evaluate(2097152,this.$scope,this.locator,this.part);return Reflect.deleteProperty(e,"$event"),!0!==s&&this.preventDefault&&t.preventDefault(),s}handleEvent(t){this.interceptor.callSource(t)}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.interceptor.$unbind(4096|t)}this.$state|=1,this.$scope=e,this.part=s;const i=this.sourceExpression;Object(n.Eb)(i)&&i.bind(t,e,this.interceptor),this.handler=this.eventManager.addEventListener(this.dom,this.target,this.targetEvent,this.interceptor,this.delegationStrategy),this.$state|=4,this.$state&=-2}$unbind(t){if(!(4&this.$state))return;this.$state|=2;const e=this.sourceExpression;Object(n.Fb)(e)&&e.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.handler.dispose(),this.handler=null,this.$state&=-7}observeProperty(t,e,s){}handleChange(t,e,s){}}var r=s(1),o=s(0);let a=class{constructor(t,e,s,n,i,r){this.scheduler=t,this.observerLocator=s,this.obj=n,this.propertyKey=i,this.targetAttribute=r,this.currentValue=null,this.oldValue=null,this.hasChanges=!1,this.task=null,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:t}=this;switch(this.oldValue=t,this.targetAttribute){case"class":t?this.obj.classList.add(this.propertyKey):this.obj.classList.remove(this.propertyKey);break;case"style":{let e="",s=t;"string"==typeof s&&s.includes("!important")&&(e="important",s=s.replace("!important","")),this.obj.style.setProperty(this.propertyKey,s,e)}}}}handleMutation(t){let e=!1;for(let s=0,n=t.length;n>s;++s){const n=t[s];if("attributes"===n.type&&n.attributeName===this.propertyKey){e=!0;break}}if(e){let t;switch(this.targetAttribute){case"class":t=this.obj.classList.contains(this.propertyKey);break;case"style":t=this.obj.style.getPropertyValue(this.propertyKey);break;default:throw new Error(`Unsupported targetAttribute: ${this.targetAttribute}`)}if(t!==this.currentValue){const{currentValue:e}=this;this.currentValue=this.oldValue=t,this.hasChanges=!1,this.callSubscribers(t,e,131072)}}}subscribe(t){this.hasSubscribers()||(this.currentValue=this.oldValue=this.obj.getAttribute(this.propertyKey),c(this.obj,this)),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||h(this.obj,this)}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0}))}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}};a=Object(r.a)([Object(n.Jb)(),Object(r.b)("design:paramtypes",[Object,Number,Object,Object,String,String])],a);const c=(t,e)=>{void 0===t.$eMObservers&&(t.$eMObservers=new Set),void 0===t.$mObserver&&(t.$mObserver=n.x.createNodeObserver(t,l,{attributes:!0})),t.$eMObservers.add(e)},h=(t,e)=>{const s=t.$eMObservers;return!(!s||!s.delete(e))&&(0===s.size&&(t.$mObserver.disconnect(),t.$mObserver=void 0),!0)},l=t=>{t[0].target.$eMObservers.forEach(u,t)};function u(t){t.handleMutation(this)}const{oneTime:d,toView:p,fromView:f}=n.l,b=p|d;let g=class{constructor(t,e,s,i,r,o,a){this.sourceExpression=t,this.targetAttribute=s,this.targetProperty=i,this.mode=r,this.observerLocator=o,this.locator=a,this.interceptor=this,this.$state=0,this.$scope=null,this.persistentFlags=0,this.target=e,n.zb.assignIdTo(this),this.$scheduler=a.get(n.P)}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,16|e)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(32|e,this.$scope,this.locator,t)}handleChange(t,e,s){if(4&this.$state){if(s|=this.persistentFlags,this.mode===n.l.fromView&&(s&=-17,s|=32),16&s){const e=this.targetObserver.getValue();return(10082!==this.sourceExpression.$kind||this.observerSlots>1)&&(t=this.sourceExpression.evaluate(s,this.$scope,this.locator,this.part)),t!==e&&this.interceptor.updateTarget(t,s),void(0==(this.mode&d)&&(this.version++,this.sourceExpression.connect(s,this.$scope,this.interceptor,this.part),this.interceptor.unobserve(!1)))}if(!(32&s))throw o.j.error(15,s);t!==this.sourceExpression.evaluate(s,this.$scope,this.locator,this.part)&&this.interceptor.updateSource(t,s)}}$bind(t,e,s){if(4&this.$state){if(this.$scope===e)return;this.interceptor.$unbind(4096|t)}this.$state|=1,this.persistentFlags=2080374799&t,this.$scope=e,this.part=s;let i=this.sourceExpression;Object(n.Eb)(i)&&i.bind(t,e,this.interceptor);let r=this.targetObserver;r||(r=this.targetObserver=new a(this.$scheduler,t,this.observerLocator,this.target,this.targetProperty,this.targetAttribute)),r.bind&&r.bind(t),i=this.sourceExpression,this.mode&b&&this.interceptor.updateTarget(i.evaluate(t,e,this.locator,s),t),this.mode&p&&i.connect(t,e,this,s),this.mode&f&&(r[this.id]|=32,r.subscribe(this.interceptor)),this.$state|=4,this.$state&=-2}$unbind(t){4&this.$state&&(this.$state|=2,this.persistentFlags=0,Object(n.Fb)(this.sourceExpression)&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.targetObserver.unbind&&this.targetObserver.unbind(t),this.targetObserver.unsubscribe&&(this.targetObserver.unsubscribe(this.interceptor),this.targetObserver[this.id]&=-33),this.interceptor.unobserve(!0),this.$state&=-7)}connect(t){4&this.$state&&(t|=this.persistentFlags,this.sourceExpression.connect(2097152|t,this.$scope,this.interceptor,this.part))}};g=Object(r.a)([Object(n.zb)(),Object(r.b)("design:paramtypes",[Object,Object,String,String,Number,Object,Object])],g);class m{constructor(t,e,s,n,i){this.scheduler=t,this.propertyKey=n,this.namespace=i,this.currentValue=null,this.oldValue=null,this.hasChanges=!1,this.task=null,this.obj=s,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:t}=this;this.oldValue=t,null==t?this.obj.removeAttributeNS(this.namespace,this.propertyKey):this.obj.setAttributeNS(this.namespace,this.propertyKey,t)}}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0})),this.currentValue=this.oldValue=this.obj.getAttributeNS(this.namespace,this.propertyKey)}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}}function v(t,e){return t===e}let y=class{constructor(t,e,s,n,i){this.scheduler=t,this.observerLocator=s,this.handler=n,this.obj=i,this.currentValue=void 0,this.oldValue=void 0,this.hasChanges=!1,this.task=null,this.arrayObserver=void 0,this.valueObserver=void 0,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const e=this.currentValue;this.oldValue=e,void 0===this.valueObserver&&(void 0!==this.obj.$observers&&(void 0!==this.obj.$observers.model?this.valueObserver=this.obj.$observers.model:void 0!==this.obj.$observers.value&&(this.valueObserver=this.obj.$observers.value)),void 0!==this.valueObserver&&this.valueObserver.subscribe(this)),void 0!==this.arrayObserver&&(this.arrayObserver.unsubscribeFromCollection(this),this.arrayObserver=void 0),"checkbox"===this.obj.type&&Array.isArray(e)&&(this.arrayObserver=this.observerLocator.getArrayObserver(t,e),this.arrayObserver.subscribeToCollection(this)),this.synchronizeElement()}}handleCollectionChange(t,e){const{currentValue:s,oldValue:n}=this;(4096&e)>0||268435456===this.persistentFlags?(this.oldValue=s,this.synchronizeElement()):this.hasChanges=!0,536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null})),this.callSubscribers(s,n,e)}handleChange(t,e,s){(4096&s)>0||268435456===this.persistentFlags?this.synchronizeElement():this.hasChanges=!0,536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(s))),this.callSubscribers(t,e,s)}synchronizeElement(){const t=this.currentValue,e=this.obj,s=Object.prototype.hasOwnProperty.call(e,"model")?e.model:e.value,n="radio"===e.type,i=void 0!==e.matcher?e.matcher:v;n?e.checked=!!i(t,s):!0===t?e.checked=!0:Array.isArray(t)?e.checked=-1!==t.findIndex(t=>!!i(t,s)):e.checked=!1}handleEvent(){this.oldValue=this.currentValue;let{currentValue:t}=this;const{obj:e}=this,s=Object.prototype.hasOwnProperty.call(e,"model")?e.model:e.value;let n;const i=void 0!==e.matcher?e.matcher:v;if("checkbox"===e.type){if(Array.isArray(t))return n=t.findIndex(t=>!!i(t,s)),void(e.checked&&-1===n?t.push(s):e.checked||-1===n||t.splice(n,1));t=e.checked}else{if(!e.checked)return;t=s}this.currentValue=t,this.callSubscribers(this.currentValue,this.oldValue,655360)}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0})),this.currentValue=this.obj.checked}unbind(t){void 0!==this.arrayObserver&&(this.arrayObserver.unsubscribeFromCollection(this),this.arrayObserver=void 0),void 0!==this.valueObserver&&this.valueObserver.unsubscribe(this),null!==this.task&&(this.task.cancel(),this.task=null)}subscribe(t){this.hasSubscribers()||this.handler.subscribe(this.obj,this),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||this.handler.dispose()}};y=Object(r.a)([Object(n.Jb)(),Object(r.b)("design:paramtypes",[Object,Number,Object,Object,Object])],y);class w{constructor(t,e,s){this.scheduler=t,this.currentValue="",this.oldValue="",this.doNotCache=!0,this.nameIndex={},this.version=0,this.hasChanges=!1,this.isActive=!1,this.task=null,this.obj=s,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:t,nameIndex:e}=this;let{version:s}=this;this.oldValue=t;const n=O(t);if(n.length>0&&this.addClassesAndUpdateIndex(n),this.version+=1,0===s)return;s-=1;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&e[t]===s&&this.obj.classList.remove(t)}}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0}))}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}addClassesAndUpdateIndex(t){const e=this.obj;for(let s=0,n=t.length;s<n;s++){const n=t[s];0!==n.length&&(this.nameIndex[n]=this.version,e.classList.add(n))}}}function O(t){function e(t){const e=t.match(/\S+/g);return null===e?o.f.emptyArray:e}if("string"==typeof t)return e(t);if(t instanceof Array){const e=t.length;if(e>0){const s=[];for(let n=0;n<e;++n)s.push(...O(t[n]));return s}return o.f.emptyArray}if(t instanceof Object){const s=[];for(const n in t)Boolean(t[n])&&(n.includes(" ")?s.push(...e(n)):s.push(n));return s}return o.f.emptyArray}class k{constructor(t,e,s,n){this.scheduler=t,this.propertyKey=n,this.currentValue=null,this.oldValue=null,this.hasChanges=!1,this.task=null,this.obj=s,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:t}=this;this.oldValue=t,null==t?this.obj.removeAttribute(this.propertyKey):this.obj.setAttribute(this.propertyKey,t)}}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0})),this.currentValue=this.oldValue=this.obj.getAttribute(this.propertyKey)}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}}class C{constructor(t,e,s,n){this.scheduler=t,this.obj=s,this.propertyKey=n,this.currentValue=void 0,this.oldValue=void 0,this.hasChanges=!1,this.task=null,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:t}=this;this.oldValue=t,this.obj[this.propertyKey]=t}}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0})),this.currentValue=this.oldValue=this.obj[this.propertyKey]}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}}function j(t){return t.composedPath&&t.composedPath()[0]||t.deepPath&&t.deepPath()[0]||t.path&&t.path[0]||t.target}function S(){this.standardStopPropagation(),this.propagationStopped=!0}function x(t){t.propagationStopped=!1;let e=j(t);const s=[];for(;e;){if(e.capturedCallbacks){const n=e.capturedCallbacks[t.type];n&&(t.stopPropagation!==S&&(t.standardStopPropagation=t.stopPropagation,t.stopPropagation=S),s.push(n))}e=e.parentNode}for(let e=s.length-1;e>=0&&!t.propagationStopped;e--){const n=s[e];"handleEvent"in n?n.handleEvent(t):n(t)}}function T(t){t.propagationStopped=!1;let e=j(t);for(;e&&!t.propagationStopped;){if(e.delegatedCallbacks){const s=e.delegatedCallbacks[t.type];s&&(t.stopPropagation!==S&&(t.standardStopPropagation=t.stopPropagation,t.stopPropagation=S),"handleEvent"in s?s.handleEvent(t):s(t))}e=e.parentNode}}class A{constructor(t,e,s,n){this.dom=t,this.eventName=e,this.listener=s,this.capture=n,this.count=0}increment(){this.count++,1===this.count&&this.dom.addEventListener(this.eventName,this.listener,null,this.capture)}decrement(){this.count--,0===this.count&&this.dom.removeEventListener(this.eventName,this.listener,null,this.capture)}dispose(){this.count>0&&(this.count=0,this.dom.removeEventListener(this.eventName,this.listener,null,this.capture))}}class I{constructor(t,e,s,n){this.entry=t,this.lookup=e,this.targetEvent=s,e[s]=n}dispose(){this.entry.decrement(),this.lookup[this.targetEvent]=null}}class V{constructor(t,e,s,n){this.dom=t,this.target=e,this.targetEvent=s,this.callback=n,t.addEventListener(s,n,e)}dispose(){this.dom.removeEventListener(this.targetEvent,this.callback,this.target)}}class ${constructor(t,e){this.dom=t,this.events=e,this.target=null,this.handler=null}subscribe(t,e){this.target=t,this.handler=e;const s=this.dom.addEventListener,n=this.events;for(let i=0,r=n.length;r>i;++i)s(n[i],e,t)}dispose(){const t=this.target,e=this.handler,s=this.events,n=this.dom;for(let i=0,r=s.length;r>i;++i)n.removeEventListener(s[i],e,t);this.target=this.handler=null}}const E=o.a.createInterface("IEventManager").withDefault(t=>t.singleton(P));class P{constructor(){this.delegatedHandlers={},this.capturedHandlers={}}addEventListener(t,e,s,i,r){let o,a,c;if(r===n.y.bubbling){o=this.delegatedHandlers,c=o[s]||(o[s]=new A(t,s,T,!1)),c.increment();const n=e.delegatedCallbacks||(e.delegatedCallbacks={});return new I(c,n,s,i)}if(r===n.y.capturing){a=this.capturedHandlers,c=a[s]||(a[s]=new A(t,s,x,!0)),c.increment();const n=e.capturedCallbacks||(e.capturedCallbacks={});return new I(c,n,s,i)}return new V(t,e,s,i)}dispose(){let t;const{delegatedHandlers:e,capturedHandlers:s}=this;for(t in e)e[t].dispose();for(t in s)s[t].dispose()}}const R={childList:!0,subtree:!0,characterData:!0};function N(t,e){return t===e}let F=class{constructor(t,e,s,n,i,r){this.scheduler=t,this.observerLocator=s,this.dom=n,this.handler=i,this.obj=r,this.currentValue=void 0,this.oldValue=void 0,this.hasChanges=!1,this.task=null,this.arrayObserver=void 0,this.nodeObserver=void 0,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:e}=this;this.oldValue=e;const s=Array.isArray(e);if(!s&&null!=e&&this.obj.multiple)throw new Error("Only null or Array instances can be bound to a multi-select.");this.arrayObserver&&(this.arrayObserver.unsubscribeFromCollection(this),this.arrayObserver=void 0),s&&(this.arrayObserver=this.observerLocator.getArrayObserver(t,e),this.arrayObserver.subscribeToCollection(this)),this.synchronizeOptions(),this.notify(t)}}handleCollectionChange(t,e){(4096&e)>0||268435456===this.persistentFlags?this.synchronizeOptions():this.hasChanges=!0,536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null})),this.callSubscribers(this.currentValue,this.oldValue,e)}handleChange(t,e,s){(4096&s)>0||268435456===this.persistentFlags?this.synchronizeOptions():this.hasChanges=!0,536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(s),this.task=null})),this.callSubscribers(t,e,s)}notify(t){if((4096&t)>0||268435456===this.persistentFlags)return;const e=this.oldValue,s=this.currentValue;s!==e&&this.callSubscribers(s,e,t)}handleEvent(){this.synchronizeValue()&&this.callSubscribers(this.currentValue,this.oldValue,655360)}synchronizeOptions(t){const{currentValue:e,obj:s}=this,n=Array.isArray(e),i=void 0!==s.matcher?s.matcher:N,r=s.options;let o=r.length;for(;o-- >0;){const t=r[o],s=Object.prototype.hasOwnProperty.call(t,"model")?t.model:t.value;n?t.selected=-1!==e.findIndex(t=>!!i(s,t)):t.selected=!!i(s,e)}}synchronizeValue(){const t=this.obj,e=t.options,s=e.length,n=this.currentValue;let i=0;if(t.multiple){if(!Array.isArray(n))return!0;let r;const o=t.matcher||N,a=[];for(;i<s;)r=e[i],r.selected&&a.push(Object.prototype.hasOwnProperty.call(r,"model")?r.model:r.value),++i;for(i=0;i<n.length;){const t=n[i];-1===a.findIndex(e=>!!o(t,e))?n.splice(i,1):++i}for(i=0;i<a.length;){const t=a[i];-1===n.findIndex(e=>!!o(t,e))&&n.push(t),++i}return!1}let r=null;for(;i<s;){const t=e[i];if(t.selected){r=Object.prototype.hasOwnProperty.call(t,"model")?t.model:t.value;break}++i}return this.oldValue=this.currentValue,this.currentValue=r,!0}bind(t){this.nodeObserver=this.dom.createNodeObserver(this.obj,this.handleNodeChange,R),536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0}))}unbind(t){this.nodeObserver.disconnect(),this.nodeObserver=null,null!==this.task&&(this.task.cancel(),this.task=null),this.arrayObserver&&(this.arrayObserver.unsubscribeFromCollection(this),this.arrayObserver=null)}handleNodeChange(){this.synchronizeOptions(),this.synchronizeValue()&&this.notify(131072)}subscribe(t){this.hasSubscribers()||this.handler.subscribe(this.obj,this),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||this.handler.dispose()}};Object(r.a)([o.m,Object(r.b)("design:type",Function),Object(r.b)("design:paramtypes",[]),Object(r.b)("design:returntype",void 0)],F.prototype,"handleNodeChange",null),F=Object(r.a)([Object(n.Jb)(),Object(r.b)("design:paramtypes",[Object,Number,Object,Object,Object,Object])],F);class B{constructor(t,e,s){this.scheduler=t,this.currentValue="",this.oldValue="",this.styles={},this.version=0,this.hasChanges=!1,this.task=null,this.obj=s,this.persistentFlags=805306383&e}getValue(){return this.obj.style.cssText}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}getStyleTuplesFromString(t){const e=[],s=/\s*([\w-]+)\s*:\s*((?:(?:[\w-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^)]*)\),?|[^)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;let n,i;for(;null!==(n=s.exec(t));)i=n[1],0!==i.length&&e.push([i,n[2]]);return e}getStyleTuplesFromObject(t){let e;const s=[];for(const n in t)e=t[n],null!=e&&("string"!=typeof e?s.push(...this.getStyleTuples(e)):s.push([Object(o.z)(n),e]));return s}getStyleTuplesFromArray(t){const e=t.length;if(e>0){const s=[];for(let n=0;n<e;++n)s.push(...this.getStyleTuples(t[n]));return s}return o.f.emptyArray}getStyleTuples(t){return"string"==typeof t?this.getStyleTuplesFromString(t):t instanceof Array?this.getStyleTuplesFromArray(t):t instanceof Object?this.getStyleTuplesFromObject(t):o.f.emptyArray}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:t}=this;this.oldValue=t;const e=this.styles;let s,n=this.version;const i=this.getStyleTuples(t);let r,o,a;const c=i.length;for(let t=0;t<c;++t)r=i[t],o=r[0],a=r[1],this.setProperty(o,a),e[o]=n;if(this.styles=e,this.version+=1,0===n)return;for(s in n-=1,e)Object.prototype.hasOwnProperty.call(e,s)&&e[s]===n&&this.obj.style.removeProperty(s)}}setProperty(t,e){let s="";null!=e&&"function"==typeof e.indexOf&&e.includes("!important")&&(s="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,s)}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0})),this.oldValue=this.currentValue=this.obj.style.cssText}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}}const L=o.a.createInterface("ISVGAnalyzer").withDefault(t=>t.singleton(class{isStandardSvgAttribute(t,e){return!1}}));let M=class{constructor(t,e,s,n,i){this.scheduler=t,this.handler=s,this.obj=n,this.propertyKey=i,this.currentValue="",this.oldValue="",this.hasChanges=!1,this.task=null,this.persistentFlags=805306383&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,(4096&e)>0||268435456===this.persistentFlags?this.flushChanges(e):536870912!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null}))}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const{currentValue:e,oldValue:s}=this;this.oldValue=e,this.obj[this.propertyKey]=null==e?"":e,0==(4096&t)&&this.callSubscribers(e,s,t)}}handleEvent(){const t=this.oldValue=this.currentValue,e=this.currentValue=this.obj[this.propertyKey];t!==e&&(this.oldValue=e,this.callSubscribers(e,t,655360))}subscribe(t){this.hasSubscribers()||(this.handler.subscribe(this.obj,this),this.currentValue=this.oldValue=this.obj[this.propertyKey]),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||this.handler.dispose()}bind(t){536870912===this.persistentFlags&&(null!==this.task&&this.task.cancel(),this.task=this.scheduler.queueRenderTask(()=>this.flushChanges(t),{persistent:!0}))}unbind(t){null!==this.task&&(this.task.cancel(),this.task=null)}};M=Object(r.a)([Object(n.Jb)(),Object(r.b)("design:paramtypes",[Object,Number,Object,Object,String])],M);const D="http://www.w3.org/1999/xlink",q="http://www.w3.org/XML/1998/namespace",U="http://www.w3.org/2000/xmlns/",_=Object.assign(Object.create(null),{"xlink:actuate":["actuate",D],"xlink:arcrole":["arcrole",D],"xlink:href":["href",D],"xlink:role":["role",D],"xlink:show":["show",D],"xlink:title":["title",D],"xlink:type":["type",D],"xml:lang":["lang",q],"xml:space":["space",q],xmlns:["xmlns",U],"xmlns:xlink":["xlink",U]}),z=["change","input"],H=["change"],K=["change","input","blur","keyup","paste"],W=["scroll"],Q=Object.assign(Object.create(null),{class:!0,style:!0,css:!0,checked:!0,value:!0,model:!0,"xlink:actuate":!0,"xlink:arcrole":!0,"xlink:href":!0,"xlink:role":!0,"xlink:show":!0,"xlink:title":!0,"xlink:type":!0,"xml:lang":!0,"xml:space":!0,xmlns:!0,"xmlns:xlink":!0});let G=class{constructor(t,e){this.dom=t,this.svgAnalyzer=e}static register(t){return o.i.singleton(n.R,this).register(t)}getObserver(t,e,s,i,r,o){switch(o){case"checked":return new y(e,t,i,new $(this.dom,z),r);case"value":return"SELECT"===r.tagName?new F(e,t,i,this.dom,new $(this.dom,H),r):new M(e,t,new $(this.dom,z),r,o);case"files":return new M(e,t,new $(this.dom,z),r,o);case"textContent":case"innerHTML":return new M(e,t,new $(this.dom,K),r,o);case"scrollTop":case"scrollLeft":return new M(e,t,new $(this.dom,W),r,o);case"class":return new w(e,t,r);case"style":case"css":return new B(e,t,r);case"model":return new n.mb(s,t,r,o);case"role":return new k(e,t,r,o);default:if(void 0!==_[o]){const s=_[o];return new m(e,t,r,s[0],s[1])}if(X(r,o,this.svgAnalyzer))return new k(e,t,r,o)}return null}overridesAccessor(t,e,s){return!0===Q[s]}handles(t,e){return this.dom.isNodeInstance(e)}};G=Object(r.a)([Object(r.c)(0,n.H),Object(r.c)(1,L),Object(r.b)("design:paramtypes",[Object,Object])],G);let J=class{constructor(t,e){this.dom=t,this.svgAnalyzer=e}static register(t){return o.i.singleton(n.Q,this).register(t)}getAccessor(t,e,s,n,i){switch(i){case"textContent":return new C(e,t,n,i);case"class":return new w(e,t,n);case"style":case"css":return new B(e,t,n);case"src":case"href":case"role":return new k(e,t,n,i);default:if(void 0!==_[i]){const s=_[i];return new m(e,t,n,s[0],s[1])}return X(n,i,this.svgAnalyzer)?new k(e,t,n,i):new C(e,t,n,i)}}handles(t,e){return this.dom.isNodeInstance(e)}};J=Object(r.a)([Object(r.c)(0,n.H),Object(r.c)(1,L),Object(r.b)("design:paramtypes",[Object,Object])],J);const Y={};function X(t,e,s){if(!0===Y[e])return!0;const n=e.slice(0,5);return Y[e]="aria-"===n||"data-"===n||s.isStandardSvgAttribute(t,e)}let Z=class{bind(t,e,s){s.targetObserver=new k(s.locator.get(n.P),t,s.target,s.targetProperty)}unbind(t,e,s){}};function tt(t){const e=j(t);if(this.target===e)return this.selfEventCallSource(t)}Z=Object(r.a)([Object(n.yb)("attr")],Z);let et=class{bind(t,e,s){if(!s.callSource||!s.targetEvent)throw o.j.error(8);s.selfEventCallSource=s.callSource,s.callSource=tt}unbind(t,e,s){s.callSource=s.selfEventCallSource,s.selfEventCallSource=null}};et=Object(r.a)([Object(n.yb)("self")],et);let st=class{constructor(t){this.observerLocator=t}bind(t,e,s,...i){if(0===i.length)throw o.j.error(9);if(s.mode!==n.l.twoWay&&s.mode!==n.l.fromView)throw o.j.error(10);this.persistentFlags=2080374799&t;const r=this.observerLocator.getObserver(this.persistentFlags|t,s.target,s.targetProperty);if(!r.handler)throw o.j.error(10);s.targetObserver=r,r.originalHandler=s.targetObserver.handler,r.handler=new $(s.locator.get(n.H),i)}unbind(t,e,s){s.targetObserver.handler.dispose(),s.targetObserver.handler=s.targetObserver.originalHandler,s.targetObserver.originalHandler=null}};st=Object(r.a)([Object(n.yb)("updateTrigger"),Object(r.c)(0,n.M),Object(r.b)("design:paramtypes",[Object])],st);const nt=Object.freeze({applyTo:o.f.noop}),it=o.a.createInterface("IShadowDOMStyles").noDefault(),rt=o.a.createInterface("IShadowDOMGlobalStyles").withDefault(t=>t.instance(nt));const ot={mode:"open"};const at={childList:!0};class ct{constructor(t,e,s,i){let r;this.dom=t,this.$controller=e,this.host=s,r=i.shadowOptions instanceof Object&&"mode"in i.shadowOptions?i.shadowOptions:ot,this.shadowRoot=s.attachShadow(r),o.e.define(n.u.name,e,this.host),o.e.define(n.u.name,e,this.shadowRoot)}get children(){return this.host.childNodes}subscribeToChildrenChange(t,e=at){this.dom.createNodeObserver(this.host,t,e)}provideEncapsulationSource(){return this.shadowRoot}project(t){const e=this.$controller.context;(e.has(it,!1)?e.get(it):e.get(rt)).applyTo(this.shadowRoot),t.appendTo(this.shadowRoot)}take(t){t.remove(),t.unlink()}}class ht{constructor(t,e,s){s.childNodes.length?this.childNodes=Object(o.F)(s.childNodes):this.childNodes=o.f.emptyArray,this.host=t.convertToRenderLocation(s),o.e.define(n.u.name,e,this.host)}get children(){return this.childNodes}subscribeToChildrenChange(t){}provideEncapsulationSource(){return this.host.getRootNode()}project(t){t.insertBefore(this.host)}take(t){t.remove(),t.unlink()}}class lt{constructor(t,e){this.host=e,o.e.define(n.u.name,t,e)}get children(){return this.host.childNodes}subscribeToChildrenChange(t){}provideEncapsulationSource(){return this.host.getRootNode()}project(t){t.appendTo(this.host)}take(t){t.remove(),t.unlink()}}var ut;!function(t){t[t.Element=1]="Element",t[t.Attr=2]="Attr",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",t[t.EntityReference=5]="EntityReference",t[t.Entity=6]="Entity",t[t.ProcessingInstruction=7]="ProcessingInstruction",t[t.Comment=8]="Comment",t[t.Document=9]="Document",t[t.DocumentType=10]="DocumentType",t[t.DocumentFragment=11]="DocumentFragment",t[t.Notation=12]="Notation"}(ut||(ut={}));const dt=new WeakMap;class pt{constructor(t,e,s,i,r,a,c,h){this.window=t,this.document=e,this.Node=s,this.Element=i,this.HTMLElement=r,this.CustomEvent=a,this.CSSStyleSheet=c,this.ShadowRoot=h,n.x.isInitialized&&(o.j.write(1001),n.x.destroy()),n.x.initialize(this),this.emptyNodes=new bt(this,e.createDocumentFragment())}static register(t){return o.i.alias(n.H,this).register(t)}addEventListener(t,e,s,n){(s||this.document).addEventListener(t,e,n)}appendChild(t,e){t.appendChild(e)}cloneNode(t,e){return t.cloneNode(!1!==e)}convertToRenderLocation(t){if(this.isRenderLocation(t))return t;if(null==t.parentNode)throw o.j.error(52);const e=this.document.createComment("au-end"),s=this.document.createComment("au-start");return t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(s,e),e.$start=s,s.$nodes=null,e}createDocumentFragment(t){if(null==t)return this.document.createDocumentFragment();if(this.isNodeInstance(t)){if(void 0!==t.content)return t.content;const e=this.document.createDocumentFragment();return e.appendChild(t),e}return this.createTemplate(t).content}createNodeSequence(t){return null===t?this.emptyNodes:new bt(this,t.cloneNode(!0))}createElement(t){return this.document.createElement(t)}fetch(t,e){return this.window.fetch(t,e)}createCustomEvent(t,e){return new this.CustomEvent(t,e)}dispatchEvent(t){this.document.dispatchEvent(t)}createNodeObserver(t,e,s){if("undefined"==typeof MutationObserver)return{disconnect(){},observe(){},takeRecords:()=>o.f.emptyArray};const n=new MutationObserver(e);return n.observe(t,s),n}createTemplate(t){if(null==t)return this.document.createElement("template");const e=this.document.createElement("template");return e.innerHTML=t.toString(),e}createTextNode(t){return this.document.createTextNode(t)}getEffectiveParentNode(t){if(dt.has(t))return dt.get(t);let e=0,s=t.nextSibling;for(;null!==s;){if(8===s.nodeType)switch(s.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return s}s=s.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=n.u.for(t);if(void 0===e)return null;const s=e.projector;if(s instanceof ct)return this.getEffectiveParentNode(s.host)}return t.parentNode}setEffectiveParentNode(t,e){if(this.isNodeInstance(t))dt.set(t,e);else{const s=t.childNodes;for(let t=0,n=s.length;t<n;++t)dt.set(s[t],e)}}insertBefore(t,e){e.parentNode.insertBefore(t,e)}isMarker(t){return"AU-M"===t.nodeName}isNodeInstance(t){return null!=t&&t.nodeType>0}isRenderLocation(t){return"au-end"===t.textContent}makeTarget(t){t.className="au"}registerElementResolver(t,e){t.registerResolver(n.L,e),t.registerResolver(this.Node,e),t.registerResolver(this.Element,e),t.registerResolver(this.HTMLElement,e)}remove(t){t.remove?t.remove():t.parentNode.removeChild(t)}removeEventListener(t,e,s,n){(s||this.document).removeEventListener(t,e,n)}setAttribute(t,e,s){t.setAttribute(e,s)}}const ft=n.x;class bt{constructor(t,e){this.dom=t,this.fragment=e,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const s=e.querySelectorAll(".au");let n=0,i=s.length;const r=this.targets=Array(i);for(;n<i;){const t=s[n];"AU-M"===t.nodeName?r[n]=this.dom.convertToRenderLocation(t):r[n]=t,++n}const o=e.childNodes;n=0,i=o.length;const a=this.childNodes=Array(i);for(;n<i;)a[n]=o[n],++n;this.firstChild=e.firstChild,this.lastChild=e.lastChild}findTargets(){return this.targets}insertBefore(t){if(this.isLinked&&this.refNode)this.addToLinked();else{const e=t.parentNode;if(this.isMounted){let s=this.firstChild;const n=this.lastChild;let i;for(;null!=s&&(i=s.nextSibling,e.insertBefore(s,t),s!==n);)s=i}else this.isMounted=!0,t.parentNode.insertBefore(this.fragment,t)}}appendTo(t){if(this.isMounted){let e=this.firstChild;const s=this.lastChild;let n;for(;null!=e&&(n=e.nextSibling,t.appendChild(e),e!==s);)e=n}else this.isMounted=!0,t.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const t=this.fragment,e=this.lastChild;let s,n=this.firstChild;for(;null!==n&&(s=n.nextSibling,t.appendChild(n),n!==e);)n=s}}addToLinked(){const t=this.refNode,e=t.parentNode;if(this.isMounted){let s=this.firstChild;const n=this.lastChild;let i;for(;null!=s&&(i=s.nextSibling,e.insertBefore(s,t),s!==n);)s=i}else this.isMounted=!0,e.insertBefore(this.fragment,t)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(t){this.isLinked=!0,this.dom.isRenderLocation(t)?this.refNode=t:(this.next=t,this.obtainRefNode())}obtainRefNode(){void 0!==this.next?this.refNode=this.next.firstChild:this.refNode=void 0}}var gt;(gt=class{constructor(t){this.nextSibling=t,this.textContent=""}get parentNode(){return this.nextSibling.parentNode}remove(){}}.prototype).previousSibling=null,gt.childNodes=o.f.emptyArray,gt.nodeName="AU-M",gt.nodeType=1;const mt=Symbol(),vt={passive:!0,capture:!0},yt={passive:!0},wt=new WeakMap;class Ot{constructor(t,e){this.dom=t,this.scheduler=e,this.blurs=[],wt.set(t.document,this),this.handler=jt(this,this.blurs)}static createFor(t,e){return wt.get(t.document)||new Ot(t,e)}register(t){const e=this.blurs;e.includes(t)||1!==e.push(t)||this.addListeners()}unregister(t){const e=this.blurs,s=e.indexOf(t);s>-1&&e.splice(s,1),0===e.length&&this.removeListeners()}addListeners(){const t=this.dom,e=t.document,s=t.window,n=this.handler;s.navigator.pointerEnabled&&e.addEventListener("pointerdown",n,vt),e.addEventListener("touchstart",n,vt),e.addEventListener("mousedown",n,vt),e.addEventListener("focus",n,vt),s.addEventListener("blur",n,yt)}removeListeners(){const t=this.dom,e=t.document,s=t.window,n=this.handler;s.navigator.pointerEnabled&&e.removeEventListener("pointerdown",n,vt),e.removeEventListener("touchstart",n,vt),e.removeEventListener("mousedown",n,vt),e.removeEventListener("focus",n,vt),s.removeEventListener("blur",n,yt)}}let kt=class{constructor(t,e,s){this.dom=e,this.element=t,this.linkedMultiple=!0,this.searchSubTree=!0,this.linkingContext=null,this.value=mt,this.manager=Ot.createFor(e,s)}afterAttach(){this.manager.register(this)}beforeDetach(){this.manager.unregister(this)}handleEventTarget(t){if(!1===this.value)return;const e=this.dom;t!==e.window&&t!==e.document&&this.contains(t)||this.triggerBlur()}contains(t){if(!this.value)return!1;let e,s,n,i,r;const a=this.element;if(Ct(a,t))return!0;if(!this.linkedWith)return!1;const c=this.dom.document,h=this.linkedWith,l=this.linkingContext,u=this.searchSubTree,d=this.linkedMultiple,p=Array.isArray(h)?h:[h],f=("string"==typeof l?c.querySelector(l):l)||c.body,b=p.length;for(s=0;b>s;++s)if(r=p[s],"string"==typeof r){if(u){if(d)e=f.querySelectorAll(r);else{const t=f.querySelector(r);e=null!==t?[t]:o.f.emptyArray}for(i=e.length,n=0;i>n;++n)if(e[n].contains(t))return!0}else for(e=f.children,i=e.length,n=0;i>n;++n)if(e[n].matches(r))return!0}else if(r&&r.contains(t))return!0;return!1}triggerBlur(){this.value=!1,"function"==typeof this.onBlur&&this.onBlur.call(null)}};Object(r.a)([Object(n.xb)(),Object(r.b)("design:type",Object)],kt.prototype,"value",void 0),Object(r.a)([Object(n.xb)(),Object(r.b)("design:type",Function)],kt.prototype,"onBlur",void 0),Object(r.a)([Object(n.xb)(),Object(r.b)("design:type",Object)],kt.prototype,"linkedWith",void 0),Object(r.a)([Object(n.xb)(),Object(r.b)("design:type",Boolean)],kt.prototype,"linkedMultiple",void 0),Object(r.a)([Object(n.xb)(),Object(r.b)("design:type",Boolean)],kt.prototype,"searchSubTree",void 0),Object(r.a)([Object(n.xb)(),Object(r.b)("design:type",Object)],kt.prototype,"linkingContext",void 0),kt=Object(r.a)([Object(n.Ab)("blur"),Object(r.c)(0,n.L),Object(r.c)(1,n.H),Object(r.c)(2,n.P),Object(r.b)("design:paramtypes",[Object,pt,Object])],kt);const Ct=(t,e)=>{if(t.contains(e))return!0;let s=null;for(;null!=e;){if(e===t)return!0;s=e.parentNode,null!==s||11!==e.nodeType?e=s:e=e.host}return!1},jt=(t,e)=>{let s=!1;const n=()=>{s=!1},i=()=>{s=!0,t.scheduler.queueRenderTask(n,{preempt:!0})},r=t=>{s||(o(t),i())},o=t=>{const s=t.composed?t.composedPath()[0]:t.target;if(null!==s)for(let t=0,n=e.length;t<n;++t)e[t].handleEventTarget(s)};return{onpointerdown:r,ontouchstart:r,onmousedown:r,onfocus:n=>{if(s)return;if(n.target===t.dom.window)for(let t=0,s=e.length;s>t;++t)e[t].triggerBlur();else o(n);i()},onblur:()=>{s=!1;for(let t=0,s=e.length;t<s;++t)e[t].triggerBlur()},handleEvent(t){this[`on${t.type}`](t)}}};let St=class{constructor(t,e){this.dom=e,this.needsApply=!1,this.element=t}beforeBind(){this.valueChanged()}valueChanged(){32&this.$controller.state?this.apply():this.needsApply=!0}afterAttach(){this.needsApply&&(this.needsApply=!1,this.apply());const t=this.element;t.addEventListener("focus",this),t.addEventListener("blur",this)}afterDetach(){const t=this.element;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.dom.document.activeElement!==this.element&&(this.value=!1)}apply(){const t=this.element;this.value?t.focus():t.blur()}};function xt(t){return null==t?n.bb.done:"function"==typeof t.then?new n.rb(t):t}Object(r.a)([Object(n.xb)({mode:n.l.twoWay}),Object(r.b)("design:type",Object)],St.prototype,"value",void 0),St=Object(r.a)([Object(n.Ab)("focus"),Object(r.c)(0,n.L),Object(r.c)(1,n.H),Object(r.b)("design:paramtypes",[Object,pt])],St);let Tt=class{constructor(t,e,s){this.factory=t,this.originalLoc=e,this.dom=s,this.id=Object(o.C)("au$component"),this.strict=!1,this.task=n.bb.done,this.currentTarget=s.createElement("div"),this.view=this.factory.create(),s.setEffectiveParentNode(this.view.nodes,e),this.view.hold(e,1)}beforeBind(t){return null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext),this.view.bind(t,this.$controller.scope)}afterAttach(t){this.targetChanged()}beforeDetach(t){this.task=this.deactivate(t)}beforeUnbind(t){return this.callbackContext=null,this.view.unbind(t)}targetChanged(){const t=this.$controller;0!=(4&t.state)&&this.project(t.flags)}project(t){const e=this.currentTarget,s=this.currentTarget=this.resolveTarget();e!==s&&(this.task=this.deactivate(t),this.task=this.activate(s,t))}activate(t,e){const{activating:s,activated:i,callbackContext:r,view:o}=this;let a=this.task;return o.hold(t,2),0==(40&this.$controller.state)?a:("function"==typeof s&&(a=a.done?xt(s.call(r,t,o)):new n.r(a,s,r,t,o)),a.done?o.attach(e):a=new n.r(a,o.attach,o,e),"function"==typeof i&&(a=a.done?xt(i.call(r,t,o)):new n.r(a,i,r,t,o)),a)}deactivate(t){const{deactivating:e,deactivated:s,callbackContext:i,view:r,target:o}=this;let a=this.task;return"function"==typeof e&&(a=a.done?xt(e.call(i,o,r)):new n.r(a,e,i,o,r)),a.done?r.detach(t):a=new n.r(a,r.detach,r,t),"function"==typeof s&&(a=a.done?xt(s.call(i,o,r)):new n.r(a,s,i,o,r)),a}resolveTarget(){const t=this.dom,e=t.document;let s=this.target,n=this.renderContext;if("string"==typeof s){let i=e;"string"==typeof n&&(n=e.querySelector(n)),t.isNodeInstance(n)&&(i=n),s=i.querySelector(s)}if(t.isNodeInstance(s))return s;if(null==s){if(this.strict)throw new Error("Render target not found");s=e.body}return s}};var At;function It(t){const e=t.type;return"string"==typeof e&&2===e.length}Object(r.a)([Object(n.xb)({primary:!0}),Object(r.b)("design:type",Object)],Tt.prototype,"target",void 0),Object(r.a)([Object(n.xb)({callback:"targetChanged"}),Object(r.b)("design:type",Object)],Tt.prototype,"renderContext",void 0),Object(r.a)([Object(n.xb)(),Object(r.b)("design:type",Boolean)],Tt.prototype,"strict",void 0),Object(r.a)([Object(n.xb)(),Object(r.b)("design:type",Function)],Tt.prototype,"deactivating",void 0),Object(r.a)([Object(n.xb)(),Object(r.b)("design:type",Function)],Tt.prototype,"activating",void 0),Object(r.a)([Object(n.xb)(),Object(r.b)("design:type",Function)],Tt.prototype,"deactivated",void 0),Object(r.a)([Object(n.xb)(),Object(r.b)("design:type",Function)],Tt.prototype,"activated",void 0),Object(r.a)([Object(n.xb)(),Object(r.b)("design:type",Object)],Tt.prototype,"callbackContext",void 0),Tt=Object(r.a)([Object(n.Kb)("portal"),Object(r.c)(0,n.U),Object(r.c)(1,n.O),Object(r.c)(2,n.H),Object(r.b)("design:paramtypes",[Object,Object,pt])],Tt),function(t){t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg"}(At||(At={}));class Vt{constructor(t){this.from=t,this.type="ha"}}class $t{constructor(t,e){this.from=t,this.to=e,this.type="hb",this.preventDefault=!0,this.strategy=n.y.none}}class Et{constructor(t,e){this.from=t,this.to=e,this.type="hb",this.preventDefault=!1,this.strategy=n.y.bubbling}}class Pt{constructor(t,e){this.from=t,this.to=e,this.type="hb",this.preventDefault=!1,this.strategy=n.y.capturing}}class Rt{constructor(t,e){this.value=t,this.to=e,this.type="he"}}class Nt{constructor(t){this.value=t,this.type="hf"}}class Ft{constructor(t){this.value=t,this.type="hg"}}class Bt{constructor(t,e,s){this.attr=t,this.from=e,this.to=s,this.type="hc"}}function Lt(t,e,s,i){if("string"==typeof e)return function(t,e,s,n){const i=[],r=[],o=[],a=t.createElement(e);let c=!1;s&&Object.keys(s).forEach(e=>{const n=s[e];It(n)?(c=!0,i.push(n)):t.setAttribute(a,e,n)});c&&(t.makeTarget(a),r.push(i));n&&Dt(t,a,n,r,o);return new Mt(t,a,r,o)}(t,e,s,i);if(n.u.isType(e))return function(t,e,s,i){const r=n.u.getDefinition(e),o=r.name,a=[],c=[a],h=[],l=[],u=r.bindables,d=t.createElement(o);t.makeTarget(d),h.includes(e)||h.push(e);a.push(new n.D(o,l)),s&&Object.keys(s).forEach(t=>{const e=s[t];if(It(e))l.push(e);else{void 0!==u[t]?l.push({type:"re",to:t,value:e}):l.push(new Rt(e,t))}});i&&Dt(t,d,i,c,h);return new Mt(t,d,c,h)}(t,e,s,i);throw new Error("Invalid tagOrType.")}class Mt{constructor(t,e,s,n){this.dom=t,this.node=e,this.instructions=s,this.dependencies=n,this.lazyDefinition=void 0}get definition(){return void 0===this.lazyDefinition&&(this.lazyDefinition=n.v.create({name:n.u.generateName(),template:this.node,needsCompile:"string"==typeof this.node,instructions:this.instructions,dependencies:this.dependencies})),this.lazyDefinition}getContext(t){return Object(n.Db)(this.definition,t,void 0)}createView(t){return this.getViewFactory(t).create()}getViewFactory(t){return this.getContext(t).getViewFactory()}mergeInto(t,e,s){this.dom.appendChild(t,this.node),e.push(...this.instructions),s.push(...this.dependencies)}}function Dt(t,e,s,n,i){for(let r=0,o=s.length;r<o;++r){const o=s[r];switch(typeof o){case"string":t.appendChild(e,t.createTextNode(o));break;case"object":t.isNodeInstance(o)?t.appendChild(e,o):"mergeInto"in o&&o.mergeInto(e,n,i)}}}const qt=["subject","composing"];let Ut=class{constructor(t,e){this.dom=t,this.id=Object(o.C)("au$component"),this.subject=void 0,this.composing=!1,this.view=void 0,this.task=n.bb.done,this.lastSubject=void 0,this.properties=e.instructions.filter(t=>!qt.includes(t.to)).reduce((t,e)=>(e.to&&(t[e.to]=e),t),{})}beforeBind(t){return this.task.done?this.task=this.compose(this.subject,t):this.task=new n.r(this.task,this.compose,this,this.subject,t),this.task.done?this.task=this.bindView(t):this.task=new n.r(this.task,this.bindView,this,t),this.task}beforeAttach(t){this.task.done?this.attachView(t):this.task=new n.r(this.task,this.attachView,this,t)}beforeDetach(t){null!=this.view&&(this.task.done?this.view.detach(t):this.task=new n.r(this.task,this.view.detach,this.view,t))}beforeUnbind(t){return this.lastSubject=void 0,null!=this.view&&(this.task.done?this.task=this.view.unbind(t):this.task=new n.r(this.task,this.view.unbind,this.view,t)),this.task}caching(t){this.view=void 0}subjectChanged(t,e,s){s|=this.$controller.flags,this.task.done?this.task=this.compose(t,s):this.task=new n.r(this.task,this.compose,this,t,s)}compose(t,e){if(this.lastSubject===t)return n.bb.done;this.lastSubject=t,this.composing=!0;let s=this.deactivate(e);if(t instanceof Promise){let i;i=s.done?t.then(t=>this.resolveView(t,e)):s.wait().then(()=>t.then(t=>this.resolveView(t,e))),s=new n.hb(i,this.activate,this,e)}else{const i=this.resolveView(t,e);s=s.done?this.activate(i,e):new n.r(s,this.activate,this,i,e)}return s.done?this.onComposed():s=new n.r(s,this.onComposed,this),s}deactivate(t){const e=this.view;return null==e?n.bb.done:(e.detach(t),e.unbind(t))}activate(t,e){if(this.view=t,null==t)return n.bb.done;let s=this.bindView(e);return s.done?this.attachView(e):s=new n.r(s,this.attachView,this,e),s}bindView(t){return null!=this.view&&(5&this.$controller.state)>0?this.view.bind(t,this.$controller.scope,this.$controller.part):n.bb.done}attachView(t){null!=this.view&&(40&this.$controller.state)>0&&this.view.attach(t)}onComposed(){this.composing=!1}resolveView(t,e){const s=this.provideViewFor(t,e);if(s)return s.hold(this.$controller.projector.host,1),s.lockScope(this.$controller.scope),s}provideViewFor(t,e){if(t){if(function(t){return"lockScope"in t}(t))return t;if("createView"in t)return t.createView(this.$controller.context);if("create"in t)return t.create(e);if("template"in t){const s=n.v.getOrCreate(t);return Object(n.Db)(s,this.$controller.context,void 0).getViewFactory().create(e)}return Lt(this.dom,t,this.properties,void 0===this.$controller.projector?o.f.emptyArray:this.$controller.projector.children).createView(this.$controller.context)}}};Object(r.a)([n.xb,Object(r.b)("design:type",Object)],Ut.prototype,"subject",void 0),Object(r.a)([Object(n.xb)({mode:n.l.fromView}),Object(r.b)("design:type",Boolean)],Ut.prototype,"composing",void 0),Ut=Object(r.a)([Object(n.Bb)({name:"au-compose",template:null,containerless:!0}),Object(r.c)(0,n.H),Object(r.c)(1,n.S),Object(r.b)("design:paramtypes",[Object,Object])],Ut);let _t=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,i,r){const o=i.nextSibling;let a;e.dom.isMarker(i)&&e.dom.remove(i);const c=Object(n.Cb)(this.parser,r.from,2048);a=c.isMulti?Object(n.wb)(new n.cb(this.observerLocator,c,o,"textContent",n.l.toView,e),c,e):Object(n.wb)(new n.W(c.firstExpression,c,o,"textContent",n.l.toView,this.observerLocator,e,!0),c,e),s.addBinding(a)}};_t=Object(r.a)([Object(n.Gb)("ha"),Object(r.c)(0,n.J),Object(r.c)(1,n.M),Object(r.b)("design:paramtypes",[Object,Object])],_t);let zt=class{constructor(t,e){this.parser=t,this.eventManager=e}render(t,e,s,r,o){const a=Object(n.Cb)(this.parser,o.from,80|o.strategy+6),c=Object(n.wb)(new i(e.dom,o.to,o.strategy,a,r,o.preventDefault,this.eventManager,e),a,e);s.addBinding(c)}};zt=Object(r.a)([Object(n.Gb)("hb"),Object(r.c)(0,n.J),Object(r.c)(1,E),Object(r.b)("design:paramtypes",[Object,Object])],zt);let Ht=class{render(t,e,s,n,i){n.setAttribute(i.to,i.value)}};Ht=Object(r.a)([Object(n.Gb)("he")],Ht);let Kt=class{render(t,e,s,n,i){!function(t,e){const s=e.length;let n=0;for(let i=0;i<s;++i)32===e.charCodeAt(i)?(i!==n&&t.add(e.slice(n,i)),n=i+1):i+1===s&&t.add(e.slice(n))}(n.classList,i.value)}};Kt=Object(r.a)([Object(n.Gb)("hf")],Kt);let Wt=class{render(t,e,s,n,i){n.style.cssText+=i.value}};Wt=Object(r.a)([Object(n.Gb)("hg")],Wt);let Qt=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,i,r){const o=Object(n.Cb)(this.parser,r.from,48|n.l.toView),a=Object(n.wb)(new n.ib(o,i.style,r.to,n.l.toView,this.observerLocator,e),o,e);s.addBinding(a)}};Qt=Object(r.a)([Object(n.Gb)("hd"),Object(r.c)(0,n.J),Object(r.c)(1,n.M),Object(r.b)("design:paramtypes",[Object,Object])],Qt);let Gt=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,s,i,r){const o=Object(n.Cb)(this.parser,r.from,48|n.l.toView),a=Object(n.wb)(new g(o,i,r.attr,r.to,n.l.toView,this.observerLocator,e),o,e);s.addBinding(a)}};Gt=Object(r.a)([Object(n.Gb)("hc"),Object(r.c)(0,n.J),Object(r.c)(1,n.M),Object(r.b)("design:paramtypes",[Object,Object])],Gt);const Jt=[class{static register(t){return o.i.singleton(n.N,this).register(t)}getElementProjector(t,e,s,n){if(n.shadowOptions||n.hasSlots){if(n.containerless)throw o.j.error(21);return new ct(t,e,s,n)}return n.containerless?new ht(t,e,s):new lt(e,s)}},J,G],Yt=[Z,et,st,Ut,Tt,St,kt],Xt=[zt,Gt,Ht,Kt,Wt,Qt,_t],Zt={register:t=>n.kb.register(t).register(...Jt,...Yt,...Xt),createContainer(){return this.register(o.a.createContainer())}};s.d(e,"f",(function(){return E})),s.d(e,"g",(function(){return Zt})),s.d(e,"e",(function(){return pt})),s.d(e,"c",(function(){return ft})),s.d(e,"a",(function(){return Bt})),s.d(e,"b",(function(){return Pt})),s.d(e,"d",(function(){return Et})),s.d(e,"h",(function(){return Rt})),s.d(e,"i",(function(){return Nt})),s.d(e,"j",(function(){return Ft})),s.d(e,"k",(function(){return Vt})),s.d(e,"l",(function(){return $t}))},function(t,e,s){"use strict";class n{constructor(t,e,s,n){this.rawName=t,this.rawValue=e,this.target=s,this.command=n}}var i=s(1),r=s(0);class o{constructor(t,e,s,n){if(this.chars=t,this.repeat=e,this.isSymbol=s,this.isInverted=n,n)switch(t.length){case 0:this.has=this.hasOfNoneInverse;break;case 1:this.has=this.hasOfSingleInverse;break;default:this.has=this.hasOfMultipleInverse}else switch(t.length){case 0:this.has=this.hasOfNone;break;case 1:this.has=this.hasOfSingle;break;default:this.has=this.hasOfMultiple}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}hasOfMultiple(t){return this.chars.includes(t)}hasOfSingle(t){return this.chars===t}hasOfNone(t){return!1}hasOfMultipleInverse(t){return!this.chars.includes(t)}hasOfSingleInverse(t){return this.chars!==t}hasOfNoneInverse(t){return!0}}class a{constructor(){this.parts=r.f.emptyArray,this._pattern="",this.currentRecord={},this.partsRecord={}}get pattern(){const t=this._pattern;return""===t?null:t}set pattern(t){null==t?(this._pattern="",this.parts=r.f.emptyArray):(this._pattern=t,this.parts=this.partsRecord[t])}append(t,e){const{currentRecord:s}=this;void 0===s[t]?s[t]=e:s[t]+=e}next(t){const{currentRecord:e}=this;if(void 0!==e[t]){const{partsRecord:s}=this;void 0===s[t]?s[t]=[e[t]]:s[t].push(e[t]),e[t]=void 0}}}class c{constructor(t,...e){this.charSpec=t,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=e}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(t){const e=this.nextStates,s=e.length;let n=null;for(let i=0;i<s;++i)if(n=e[i],t.equals(n.charSpec))return n;return null}append(t,e){const{patterns:s}=this;s.includes(e)||s.push(e);let n=this.findChild(t);return null==n&&(n=new c(t,e),this.nextStates.push(n),t.repeat&&n.nextStates.push(n)),n}findMatches(t,e){const s=[],n=this.nextStates,i=n.length;let r=0,o=null,a=0,c=0;for(;a<i;++a)if(o=n[a],o.charSpec.has(t))if(s.push(o),r=o.patterns.length,c=0,o.charSpec.isSymbol)for(;c<r;++c)e.next(o.patterns[c]);else for(;c<r;++c)e.append(o.patterns[c],t);return s}}class h{constructor(t){this.text=t,this.text=t;const e=this.len=t.length,s=this.specs=[];for(let n=0;n<e;++n)s.push(new o(t[n],!1,!1,!1))}eachChar(t){const{len:e,specs:s}=this;for(let n=0;n<e;++n)t(s[n])}}class l{constructor(t){this.text="PART",this.spec=new o(t,!0,!1,!0)}eachChar(t){t(this.spec)}}class u{constructor(t){this.text=t,this.spec=new o(t,!1,!0,!1)}eachChar(t){t(this.spec)}}class d{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const p=r.a.createInterface("ISyntaxInterpreter").withDefault(t=>t.singleton(f));class f{constructor(){this.rootState=new c(null),this.initialStates=[this.rootState]}add(t){let e=0;if(Array.isArray(t)){const s=t.length;for(;e<s;++e)this.add(t[e]);return}let s=this.rootState;const n=t,i=n.pattern,r=new d,o=this.parse(n,r),a=o.length,c=t=>{s=s.append(t,i)};for(e=0;e<a;++e)o[e].eachChar(c);s.types=r,s.isEndpoint=!0}interpret(t){const e=new a;let s=this.initialStates;const n=t.length;for(let i=0;i<n&&(s=this.getNextStates(s,t.charAt(i),e),0!==s.length);++i);if(s.sort((t,e)=>{if(!t.isEndpoint)return e.isEndpoint?1:0;if(!e.isEndpoint)return-1;const s=t.types,n=e.types;return s.statics!==n.statics?n.statics-s.statics:s.dynamics!==n.dynamics?n.dynamics-s.dynamics:s.symbols!==n.symbols?n.symbols-s.symbols:0}),s.length>0){const t=s[0];t.charSpec.isSymbol||e.next(t.pattern),e.pattern=t.pattern}return e}getNextStates(t,e,s){const n=[];let i=null;const r=t.length;for(let o=0;o<r;++o)i=t[o],n.push(...i.findMatches(e,s));return n}parse(t,e){const s=[],n=t.pattern,i=n.length;let r=0,o=0,a="";for(;r<i;)a=n.charAt(r),t.symbols.includes(a)?r!==o?(s.push(new h(n.slice(o,r))),++e.statics,o=r):(s.push(new u(n.slice(o,r+1))),++e.symbols,o=++r):r===o&&"P"===a&&"PART"===n.slice(r,r+4)?(o=r+=4,s.push(new l(t.symbols)),++e.dynamics):++r;return o!==r&&(s.push(new h(n.slice(o,r))),++e.statics),s}}const b=r.a.createInterface("IAttributePattern").noDefault();function g(...t){return function(e){return v.define(t,e)}}class m{constructor(t){this.Type=t,this.name=void 0}register(t){r.i.singleton(b,this.Type).register(t)}}const v=Object.freeze({name:r.h.resource.keyFor("attribute-pattern"),definitionAnnotationKey:"attribute-pattern-definitions",define(t,e){!function(t,e){for(const s of e)s.pattern in t?"function"!=typeof t[s.pattern]&&r.j.write(402,s.pattern):r.j.write(401,s.pattern)}(e.prototype,t);const s=new m(e),{name:n,definitionAnnotationKey:i}=v;return r.e.define(n,s,e),r.h.resource.appendTo(e,n),r.h.annotation.set(e,i,t),r.h.annotation.appendTo(e,i),e},getPatternDefinitions:t=>r.h.annotation.get(t,v.definitionAnnotationKey)}),y=r.a.createInterface("IAttributeParser").withDefault(t=>t.singleton(w));let w=class{constructor(t,e){this.interpreter=t,this.cache={},this.interpreter=t;const s=this.patterns={};e.forEach(e=>{const n=v.getPatternDefinitions(e.constructor);t.add(n),n.forEach(t=>{s[t.pattern]=e})})}parse(t,e){let s=this.cache[t];null==s&&(s=this.cache[t]=this.interpreter.interpret(t));const i=s.pattern;return null==i?new n(t,e,t,null):this.patterns[i][i](t,e,s.parts)}};w=Object(i.a)([Object(i.c)(0,p),Object(i.c)(1,Object(r.l)(b)),Object(i.b)("design:paramtypes",[Object,Array])],w);let O=class{"PART.PART"(t,e,s){return new n(t,e,s[0],s[1])}"PART.PART.PART"(t,e,s){return new n(t,e,s[0],s[2])}};O=Object(i.a)([g({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],O);let k=class{ref(t,e,s){return new n(t,e,"element","ref")}"PART.ref"(t,e,s){return new n(t,e,s[0],"ref")}};k=Object(i.a)([g({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],k);let C=class{":PART"(t,e,s){return new n(t,e,s[0],"bind")}};C=Object(i.a)([g({pattern:":PART",symbols:":"})],C);let j=class{"@PART"(t,e,s){return new n(t,e,s[0],"trigger")}};j=Object(i.a)([g({pattern:"@PART",symbols:"@"})],j);var S=s(2);function x(t){return function(e){return A.define(t,e)}}class T{constructor(t,e,s,n,i){this.Type=t,this.name=e,this.aliases=s,this.key=n,this.type=i}static create(t,e){let s,n;return"string"==typeof t?(s=t,n={name:s}):(s=t.name,n=t),new T(e,Object(r.q)(A.getAnnotation(e,"name"),s),Object(r.A)(A.getAnnotation(e,"aliases"),n.aliases,e.aliases),A.keyFrom(s),Object(r.q)(A.getAnnotation(e,"type"),n.type,e.type,null))}register(t){const{Type:e,key:s,aliases:n}=this;r.i.singleton(s,e).register(t),r.i.alias(s,e).register(t),Object(S.Ib)(n,A,s,t)}}const A={name:r.h.resource.keyFor("binding-command"),keyFrom:t=>`${A.name}:${t}`,isType:t=>"function"==typeof t&&r.e.hasOwn(A.name,t),define(t,e){const s=T.create(t,e);return r.e.define(A.name,s,s.Type),r.e.define(A.name,s,s),r.h.resource.appendTo(e,A.name),s.Type},getDefinition(t){const e=r.e.getOwn(A.name,t);if(void 0===e)throw new Error(`No definition found for type ${t.name}`);return e},annotate(t,e,s){r.e.define(r.h.annotation.keyFor(e),s,t)},getAnnotation:(t,e)=>r.e.getOwn(r.h.annotation.keyFor(e),t)};function I(t,e){return 256&t.flags?t.bindable.propName:e?Object(r.o)(t.syntax.target):t.syntax.target}var V;function $(t){const e=t.createElement("au-m");return t.makeTarget(e),e}!function(t){t[t.type=511]="type",t[t.isTemplateController=1]="isTemplateController",t[t.isReplacePart=2]="isReplacePart",t[t.isCustomAttribute=4]="isCustomAttribute",t[t.isPlainAttribute=8]="isPlainAttribute",t[t.isCustomElement=16]="isCustomElement",t[t.isLetElement=32]="isLetElement",t[t.isPlainElement=64]="isPlainElement",t[t.isText=128]="isText",t[t.isBinding=256]="isBinding",t[t.hasMarker=512]="hasMarker",t[t.hasTemplate=1024]="hasTemplate",t[t.hasAttributes=2048]="hasAttributes",t[t.hasBindings=4096]="hasBindings",t[t.hasChildNodes=8192]="hasChildNodes",t[t.hasParts=16384]="hasParts"}(V||(V={}));class E{constructor(t,e,s,n,i=s.name){this.syntax=e,this.info=s,this.res=i,this.flags=513,this.physicalNode=null,this.template=null,this.templateController=null,this._bindings=null,this._parts=null,this.partName="replaceable"===s.name?n:null,this.marker=$(t)}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=4096),this._bindings}get parts(){return null===this._parts&&(this._parts=[],this.flags|=16384),this._parts}}class P{constructor(t,e=null,s=null,n=null){this.name=t,this.physicalNode=e,this.parent=s,this.template=n,this.flags=2}}class R{constructor(t,e,s=e.name){this.syntax=t,this.info=e,this.res=s,this.flags=4,this._bindings=null}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=4096),this._bindings}}class N{constructor(t,e,s){this.syntax=t,this.command=e,this.expression=s,this.flags=8}}class F{constructor(t,e,s,n,i){this.command=t,this.bindable=e,this.expression=s,this.rawValue=n,this.target=i,this.flags=256}}class B{constructor(t,e,s,n=s.name,i=s.bindables){this.physicalNode=e,this.info=s,this.res=n,this.bindables=i,this.flags=16,this.isTarget=!0,this.templateController=null,this._customAttributes=null,this._plainAttributes=null,this._bindings=null,this._childNodes=null,this._parts=null,s.containerless?(this.isContainerless=!0,this.marker=$(t),this.flags|=512):(this.isContainerless=!1,this.marker=null)}get customAttributes(){return null===this._customAttributes&&(this._customAttributes=[],this.flags|=2048),this._customAttributes}get plainAttributes(){return null===this._plainAttributes&&(this._plainAttributes=[],this.flags|=2048),this._plainAttributes}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=4096),this._bindings}get childNodes(){return null===this._childNodes&&(this._childNodes=[],this.flags|=8192),this._childNodes}get parts(){return null===this._parts&&(this._parts=[],this.flags|=16384),this._parts}}class L{constructor(t,e,s=$(t)){this.physicalNode=e,this.marker=s,this.flags=544,this.toBindingContext=!1,this._bindings=null}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=4096),this._bindings}}class M{constructor(t,e){this.physicalNode=e,this.flags=64,this.isTarget=!1,this.templateController=null,this.hasSlots=!1,this._customAttributes=null,this._plainAttributes=null,this._childNodes=null}get customAttributes(){return null===this._customAttributes&&(this._customAttributes=[],this.flags|=2048),this._customAttributes}get plainAttributes(){return null===this._plainAttributes&&(this._plainAttributes=[],this.flags|=2048),this._plainAttributes}get childNodes(){return null===this._childNodes&&(this._childNodes=[],this.flags|=8192),this._childNodes}}class D{constructor(t,e,s,n=$(t)){this.physicalNode=e,this.interpolation=s,this.marker=n,this.flags=640}}let q=class{constructor(){this.bindingType=49}compile(t){return new S.fb(t.expression,I(t,!1))}};q=Object(i.a)([x("one-time")],q);let U=class{constructor(){this.bindingType=50}compile(t){return new S.sb(t.expression,I(t,!1))}};U=Object(i.a)([x("to-view")],U);let _=class{constructor(){this.bindingType=51}compile(t){return new S.A(t.expression,I(t,!1))}};_=Object(i.a)([x("from-view")],_);let z=class{constructor(){this.bindingType=52}compile(t){return new S.tb(t.expression,I(t,!1))}};z=Object(i.a)([x("two-way")],z);let H=class{constructor(){this.bindingType=53}compile(t){let e=S.l.default;if(t instanceof F)e=t.bindable.mode;else{switch(t.syntax.command){case"bind":case"to-view":e=S.l.toView;break;case"one-time":e=S.l.oneTime;break;case"from-view":e=S.l.fromView;break;case"two-way":e=S.l.twoWay}}switch(e){case S.l.default:case S.l.toView:return U.prototype.compile(t);case S.l.oneTime:return q.prototype.compile(t);case S.l.fromView:return _.prototype.compile(t);case S.l.twoWay:return z.prototype.compile(t)}}};H=Object(i.a)([x("bind")],H);let K=class{constructor(){this.bindingType=153}compile(t){return new S.m(t.expression,I(t,!0))}};K=Object(i.a)([x("call")],K);let W=class{constructor(){this.bindingType=539}compile(t){return new S.Y(t.expression,I(t,!1))}};function Q(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}var G,J,Y,X;W=Object(i.a)([x("for")],W),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(G||(G={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(J||(J={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3077]="ParentScope",t[t.OpenParen=671750]="OpenParen",t[t.OpenBrace=131079]="OpenBrace",t[t.Dot=16392]="Dot",t[t.CloseBrace=1835017]="CloseBrace",t[t.CloseParen=1835018]="CloseParen",t[t.Comma=1572875]="Comma",t[t.OpenBracket=671756]="OpenBracket",t[t.CloseBracket=1835021]="CloseBracket",t[t.Colon=1572878]="Colon",t[t.Question=1572879]="Question",t[t.Ampersand=1572880]="Ampersand",t[t.Bar=1572883]="Bar",t[t.BarBar=1638548]="BarBar",t[t.AmpersandAmpersand=1638613]="AmpersandAmpersand",t[t.EqualsEquals=1638678]="EqualsEquals",t[t.ExclamationEquals=1638679]="ExclamationEquals",t[t.EqualsEqualsEquals=1638680]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638681]="ExclamationEqualsEquals",t[t.LessThan=1638746]="LessThan",t[t.GreaterThan=1638747]="GreaterThan",t[t.LessThanEquals=1638748]="LessThanEquals",t[t.GreaterThanEquals=1638749]="GreaterThanEquals",t[t.InKeyword=1640798]="InKeyword",t[t.InstanceOfKeyword=1640799]="InstanceOfKeyword",t[t.Plus=623008]="Plus",t[t.Minus=623009]="Minus",t[t.TypeofKeyword=34850]="TypeofKeyword",t[t.VoidKeyword=34851]="VoidKeyword",t[t.Asterisk=1638884]="Asterisk",t[t.Percent=1638885]="Percent",t[t.Slash=1638886]="Slash",t[t.Equals=1048615]="Equals",t[t.Exclamation=32808]="Exclamation",t[t.TemplateTail=540713]="TemplateTail",t[t.TemplateContinuation=540714]="TemplateContinuation",t[t.OfKeyword=1051179]="OfKeyword"}(Y||(Y={})),function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(X||(X={}));const Z=S.gb.$false,tt=S.gb.$true,et=S.gb.$null,st=S.gb.$undefined,nt=S.d.$this,it=S.d.$parent;const rt=new class{constructor(t){this.input=t,this.index=0,this.startIndex=0,this.lastIndex=0,this.currentToken=1572864,this.tokenValue="",this.assignable=!0,this.length=t.length,this.currentChar=t.charCodeAt(0)}get tokenRaw(){return this.input.slice(this.startIndex,this.index)}}("");var ot,at;function ct(t,e){return rt.input=t,rt.length=t.length,rt.index=0,rt.currentChar=t.charCodeAt(0),ht(rt,0,61,void 0===e?53:e)}function ht(t,e,s,n){if(284===n)return new S.w(t.input);if(0===t.index){if(2048&n)return function(t){const e=[],s=[],n=t.length;let i="";for(;t.index<n;){switch(t.currentChar){case 36:if(123===t.input.charCodeAt(t.index+1)){e.push(i),i="",t.index+=2,t.currentChar=t.input.charCodeAt(t.index),ut(t);const n=ht(t,0,61,2048);s.push(n);continue}i+="$";break;case 92:i+=String.fromCharCode(Q(dt(t)));break;default:i+=String.fromCharCode(t.currentChar)}dt(t)}if(s.length)return e.push(i),new S.V(e,s);return null}(t);if(ut(t),1048576&t.currentToken)throw r.j.error(100,{state:t})}t.assignable=448>s;let i=void 0;if(32768&t.currentToken){const s=vt[63&t.currentToken];ut(t),i=new S.ub(s,ht(t,e,449,n)),t.assignable=!1}else{t:switch(t.currentToken){case 3077:t.assignable=!1;do{if(ut(t),e++,!gt(t,16392)){if(524288&t.currentToken){const t=511&e;i=0===t?nt:1===t?it:new S.d(t),e=512;break t}throw r.j.error(103,{state:t})}if(16392===t.currentToken)throw r.j.error(102,{state:t});if(1572864===t.currentToken)throw r.j.error(105,{state:t})}while(3077===t.currentToken);case 1024:512&n?i=new S.k(t.tokenValue):(i=new S.c(t.tokenValue,511&e),e=1024),t.assignable=!0,ut(t);break;case 3076:t.assignable=!1,ut(t),i=nt,e=512;break;case 671750:ut(t),i=ht(t,0,62,n),mt(t,1835018),e=0;break;case 671756:i=function(t,e,s){ut(t);const n=new Array;for(;1835021!==t.currentToken;)if(gt(t,1572875)){if(n.push(st),1835021===t.currentToken)break}else{if(n.push(ht(t,e,62,-513&s)),!gt(t,1572875))break;if(1835021===t.currentToken)break}return mt(t,1835021),512&s?new S.e(n):(t.assignable=!1,new S.f(n))}(t,e,n),e=0;break;case 131079:i=function(t,e){const s=new Array,n=new Array;ut(t);for(;1835017!==t.currentToken;){if(s.push(t.tokenValue),12288&t.currentToken)ut(t),mt(t,1572878),n.push(ht(t,0,62,-513&e));else{if(!(3072&t.currentToken))throw r.j.error(107,{state:t});{const{currentChar:s,currentToken:i,index:r}=t;ut(t),gt(t,1572878)?n.push(ht(t,0,62,-513&e)):(t.currentChar=s,t.currentToken=i,t.index=r,n.push(ht(t,0,450,-513&e)))}}1835017!==t.currentToken&&mt(t,1572875)}return mt(t,1835017),512&e?new S.db(s,n):(t.assignable=!1,new S.eb(s,n))}(t,n),e=0;break;case 540713:i=new S.qb([t.tokenValue]),t.assignable=!1,ut(t),e=0;break;case 540714:i=lt(t,e,n,i,!1),e=0;break;case 4096:case 8192:i=new S.gb(t.tokenValue),t.assignable=!1,ut(t),e=0;break;case 2050:case 2051:case 2049:case 2048:i=vt[63&t.currentToken],t.assignable=!1,ut(t),e=0;break;default:throw t.index>=t.length?r.j.error(104,{state:t}):r.j.error(101,{state:t})}if(512&n)return function(t,e){if(0==(65536&e.$kind))throw r.j.error(106,{state:t});if(1051179!==t.currentToken)throw r.j.error(106,{state:t});ut(t);const s=e,n=ht(t,0,61,0);return new S.z(s,n)}(t,i);if(449<s)return i;let o=t.tokenValue;for(;(16384&t.currentToken)>0;){const s=[];let a;switch(t.currentToken){case 16392:if(t.assignable=!0,ut(t),0==(3072&t.currentToken))throw r.j.error(105,{state:t});if(o=t.tokenValue,ut(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671750===t.currentToken){0===e&&(e=2048);continue}i=1024&e?new S.c(o,i.ancestor):new S.b(i,o);continue;case 671756:t.assignable=!0,ut(t),e=4096,i=new S.a(i,ht(t,0,62,n)),mt(t,1835021);break;case 671750:for(t.assignable=!1,ut(t);1835018!==t.currentToken&&(s.push(ht(t,0,62,n)),gt(t,1572875)););mt(t,1835018),i=1024&e?new S.p(o,s,i.ancestor):2048&e?new S.o(i,o,s):new S.n(i,s),e=0;break;case 540713:t.assignable=!1,a=[t.tokenValue],i=new S.ob(a,a,i),ut(t);break;case 540714:i=lt(t,e,n,i,!0)}}}if(448<s)return i;for(;(65536&t.currentToken)>0;){const r=t.currentToken;if((448&r)<=s)break;ut(t),i=new S.i(vt[63&r],i,ht(t,e,448&r,n)),t.assignable=!1}if(63<s)return i;if(gt(t,1572879)){const s=ht(t,e,62,n);mt(t,1572878),i=new S.q(i,s,ht(t,e,62,n)),t.assignable=!1}if(62<s)return i;if(gt(t,1048615)){if(!t.assignable)throw r.j.error(150,{state:t});i=new S.g(i,ht(t,e,62,n))}if(61<s)return i;for(;gt(t,1572883);){if(1572864===t.currentToken)throw r.j.error(112);const s=t.tokenValue;ut(t);const o=new Array;for(;gt(t,1572878);)o.push(ht(t,e,62,n));i=new S.vb(i,s,o)}for(;gt(t,1572880);){if(1572864===t.currentToken)throw r.j.error(113);const s=t.tokenValue;ut(t);const o=new Array;for(;gt(t,1572878);)o.push(ht(t,e,62,n));i=new S.j(i,s,o)}if(1572864!==t.currentToken){if(2048&n)return i;if("of"===t.tokenRaw)throw r.j.error(151,{state:t});throw r.j.error(101,{state:t})}return i}function lt(t,e,s,n,i){const r=[t.tokenValue];mt(t,540714);const o=[ht(t,e,62,s)];for(;540713!==(t.currentToken=bt(t));)r.push(t.tokenValue),mt(t,540714),o.push(ht(t,e,62,s));return r.push(t.tokenValue),t.assignable=!1,i?(ut(t),new S.ob(r,r,n,o)):(ut(t),new S.qb(r,o))}function ut(t){for(;t.index<t.length;)if(t.startIndex=t.index,null!=(t.currentToken=At[t.currentChar](t)))return;t.currentToken=1572864}function dt(t){return t.currentChar=t.input.charCodeAt(++t.index)}function pt(t,e){let s=t.currentChar;if(!1===e){do{s=dt(t)}while(s<=57&&s>=48);if(46!==s)return t.tokenValue=parseInt(t.tokenRaw,10),8192;if(s=dt(t),t.index>=t.length)return t.tokenValue=parseInt(t.tokenRaw.slice(0,-1),10),8192}if(s<=57&&s>=48)do{s=dt(t)}while(s<=57&&s>=48);else t.currentChar=t.input.charCodeAt(--t.index);return t.tokenValue=parseFloat(t.tokenRaw),8192}function ft(t){let e=!0,s="";for(;96!==dt(t);)if(36===t.currentChar){if(t.index+1<t.length&&123===t.input.charCodeAt(t.index+1)){t.index++,e=!1;break}s+="$"}else if(92===t.currentChar)s+=String.fromCharCode(Q(dt(t)));else{if(t.index>=t.length)throw r.j.error(109,{state:t});s+=String.fromCharCode(t.currentChar)}return dt(t),t.tokenValue=s,e?540713:540714}function bt(t){if(t.index>=t.length)throw r.j.error(109,{state:t});return t.index--,ft(t)}function gt(t,e){return t.currentToken===e&&(ut(t),!0)}function mt(t,e){if(t.currentToken!==e)throw r.j.error(110,{state:t,expected:e});ut(t)}!function(t){t[t.InvalidExpressionStart=100]="InvalidExpressionStart",t[t.UnconsumedToken=101]="UnconsumedToken",t[t.DoubleDot=102]="DoubleDot",t[t.InvalidMemberExpression=103]="InvalidMemberExpression",t[t.UnexpectedEndOfExpression=104]="UnexpectedEndOfExpression",t[t.ExpectedIdentifier=105]="ExpectedIdentifier",t[t.InvalidForDeclaration=106]="InvalidForDeclaration",t[t.InvalidObjectLiteralPropertyDefinition=107]="InvalidObjectLiteralPropertyDefinition",t[t.UnterminatedQuote=108]="UnterminatedQuote",t[t.UnterminatedTemplate=109]="UnterminatedTemplate",t[t.MissingExpectedToken=110]="MissingExpectedToken",t[t.UnexpectedCharacter=111]="UnexpectedCharacter",t[t.MissingValueConverter=112]="MissingValueConverter",t[t.MissingBindingBehavior=113]="MissingBindingBehavior"}(ot||(ot={})),function(t){t[t.NotAssignable=150]="NotAssignable",t[t.UnexpectedForOf=151]="UnexpectedForOf"}(at||(at={}));const vt=[Z,tt,et,st,"$this","$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540713,540714,"of"],yt=Object.create(null);yt.true=2049,yt.null=2050,yt.false=2048,yt.undefined=2051,yt.$this=3076,yt.$parent=3077,yt.in=1640798,yt.instanceof=1640799,yt.typeof=34850,yt.void=34851,yt.of=1051179;const wt=[36,0,48,58,65,91,95,0,97,123],Ot=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],kt=[48,58],Ct=[0,33,127,161];function jt(t,e,s,n){const i=s.length;for(let r=0;r<i;r+=2){const i=s[r];let o=s[r+1];if(o=o>0?o:i+1,t&&t.fill(n,i,o),e)for(let t=i;t<o;t++)e.add(t)}}function St(t){return e=>(dt(e),t)}const xt=t=>{throw r.j.error(111,{state:t})};xt.notMapped=!0,jt(null,new Set,wt,!0);const Tt=new Uint8Array(65535);jt(Tt,null,Ot,1),jt(Tt,null,kt,1);const At=new Array(65535);At.fill(xt,0,65535),jt(At,null,Ct,t=>(dt(t),null)),jt(At,null,Ot,(function(t){for(;Tt[dt(t)];);const e=yt[t.tokenValue=t.tokenRaw];return void 0===e?1024:e})),jt(At,null,kt,t=>pt(t,!1)),At[34]=At[39]=t=>function(t){const e=t.currentChar;dt(t);let s=0;const n=new Array;let i=t.index;for(;t.currentChar!==e;)if(92===t.currentChar)n.push(t.input.slice(i,t.index)),dt(t),s=Q(t.currentChar),dt(t),n.push(String.fromCharCode(s)),i=t.index;else{if(t.index>=t.length)throw r.j.error(108,{state:t});dt(t)}const o=t.input.slice(i,t.index);dt(t),n.push(o);const a=n.join("");return t.tokenValue=a,4096}(t),At[96]=t=>ft(t),At[33]=t=>61!==dt(t)?32808:61!==dt(t)?1638679:(dt(t),1638681),At[61]=t=>61!==dt(t)?1048615:61!==dt(t)?1638678:(dt(t),1638680),At[38]=t=>38!==dt(t)?1572880:(dt(t),1638613),At[124]=t=>124!==dt(t)?1572883:(dt(t),1638548),At[46]=t=>dt(t)<=57&&t.currentChar>=48?pt(t,!0):16392,At[60]=t=>61!==dt(t)?1638746:(dt(t),1638748),At[62]=t=>61!==dt(t)?1638747:(dt(t),1638749),At[37]=St(1638885),At[40]=St(671750),At[41]=St(1835018),At[42]=St(1638884),At[43]=St(623008),At[44]=St(1572875),At[45]=St(623009),At[47]=St(1638886),At[58]=St(1572878),At[63]=St(1572879),At[91]=St(671756),At[93]=St(1835021),At[123]=St(131079),At[125]=St(1835017);const It=[{register(t){t.registerTransformer(S.J,t=>(Reflect.set(t,"parseCore",ct),t))}}],Vt=[k,O],$t=[H,q,_,U,z,K,W];class Et{constructor(t,e){this.propName=t,this.mode=e}}class Pt{constructor(t,e){this.name=t,this.containerless=e,this.bindables=Object.create(null)}static from(t){const e=new Pt(t.name,t.containerless),s=t.bindables,n=S.l.toView;let i,o,a,c;for(o in s)i=s[o],void 0!==i.property&&(o=i.property),a=void 0!==i.attribute?i.attribute:Object(r.z)(o),c=void 0!==i.mode&&i.mode!==S.l.default?i.mode:n,e.bindables[a]=new Et(o,c);return e}}class Rt{constructor(t,e,s){this.name=t,this.isTemplateController=e,this.noMultiBindings=s,this.bindables=Object.create(null),this.bindable=null}static from(t){const e=new Rt(t.name,t.isTemplateController,t.noMultiBindings),s=t.bindables,n=void 0!==t.defaultBindingMode&&t.defaultBindingMode!==S.l.default?t.defaultBindingMode:S.l.toView;let i,r,o,a,c=!1,h=!1;for(r in s){if(i=s[r],void 0!==i.property&&(r=i.property),o=void 0!==i.mode&&i.mode!==S.l.default?i.mode:n,h=!0===i.primary,a=e.bindables[r]=new Et(r,o),h){if(c)throw new Error("primary already exists");c=!0,e.bindable=a}null===e.bindable&&(e.bindable=a)}return null===e.bindable&&(e.bindable=new Et("value",n)),e}}const Nt=new WeakMap;class Ft{constructor(t){this.elementLookup=Object.create(null),this.attributeLookup=Object.create(null),this.commandLookup=Object.create(null),this.container=t;const e=t.root;this.resourceResolvers=t.resourceResolvers,this.rootResourceResolvers=e.resourceResolvers}static getOrCreate(t){let e=Nt.get(t);return void 0===e&&Nt.set(t,e=new Ft(t)),e}getElementInfo(t){let e=this.elementLookup[t];if(void 0===e){const s=this.find(S.u,t);this.elementLookup[t]=e=null===s?null:Pt.from(s)}return e}getAttributeInfo(t){let e=this.attributeLookup[t.target];if(void 0===e){const s=this.find(S.t,t.target);this.attributeLookup[t.target]=e=null===s?null:Rt.from(s)}return e}getBindingCommand(t,e){const s=t.command;if(null===s)return null;let n=this.commandLookup[s];if(void 0===n){if(n=this.create(A,s),null===n){if(e)return null;throw new Error(`Unknown binding command: ${s}`)}this.commandLookup[s]=n}return n}find(t,e){const s=t.keyFrom(e);let n=this.resourceResolvers[s];if(void 0===n&&(n=this.rootResourceResolvers[s],void 0===n))return null;if(null===n)return null;if("function"==typeof n.getFactory){const e=n.getFactory(this.container);if(null==e)return null;const s=r.e.getOwn(t.name,e.Type);return void 0===s?null:s}return null}create(t,e){const s=t.keyFrom(e);let n=this.resourceResolvers[s];if(void 0===n&&(n=this.rootResourceResolvers[s],void 0===n))return null;if(null===n)return null;const i=n.resolve(this.container,this.container);return void 0===i?null:i}}s.d(e,"h",(function(){return y})),s.d(e,"p",(function(){return x})),s.d(e,"q",(function(){return I})),s.d(e,"g",(function(){return It})),s.d(e,"f",(function(){return Vt})),s.d(e,"e",(function(){return $t})),s.d(e,"m",(function(){return Ft})),s.d(e,"a",(function(){return Et})),s.d(e,"b",(function(){return F})),s.d(e,"c",(function(){return R})),s.d(e,"d",(function(){return B})),s.d(e,"i",(function(){return L})),s.d(e,"j",(function(){return N})),s.d(e,"k",(function(){return M})),s.d(e,"l",(function(){return P})),s.d(e,"n",(function(){return E})),s.d(e,"o",(function(){return D}))},function(t,e,s){"use strict";(function(t,n){s.d(e,"a",(function(){return p}));const i=function(){if(void 0!==t)return t;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return new Function("return this")()}catch(t){return{}}}(),r="undefined"!=typeof window&&void 0!==window.document,o="object"==typeof self&&null!=self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,a=void 0!==n&&null!=n.versions&&null!=n.versions.node,c=function(){let t,e,s,n,r;if(null!=i.performance&&null!=i.performance.now){const t=i.performance;return function(){return t.now()}}if(null!=i.process&&null!=i.process.hrtime){const o=function(){return(t()-n)/1e6};return e=i.process.hrtime,t=function(){const t=e();return 1e9*t[0]+t[1]},s=t(),r=1e9*i.process.uptime(),n=s-r,o}{const t=function(){return Date.now()-n};return n=Date.now(),t}}(),h=Object.prototype.hasOwnProperty,l=Object.freeze([]),u=Object.freeze({}),d={isBrowserLike:r,isWebWorkerLike:o,isNodeLike:a,global:i,emptyArray:l,emptyObject:u,noop:function(){},now:c,hasOwnProperty:h,restore(){Object.assign(p,d)}},p={...d}}).call(this,s(11),s(9))},function(t,e,s){"use strict";var n=s(0),i=s(2);i.a,i.b,i.c,i.d,i.e,i.f,i.g,i.i,i.j,i.k,i.n,i.o,i.p,i.q,i.z,i.B,i.V,i.db,i.eb,i.gb,i.ob,i.qb,i.ub,i.vb;n.j;function r(t){const e=o[t];return void 0!==e?e:function(t){return{level:4,message:`Attempted to report with unknown code ${t}.`}}(t)}const o={0:{level:3,message:"Cannot add observers to object."},1:{level:3,message:"Cannot observe property of object."},2:{level:2,message:"Starting application in debug mode."},3:{level:4,message:"Runtime expression compilation is only available when including JIT support."},4:{level:4,message:"Invalid animation direction."},5:{level:4,message:"key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?"},6:{level:4,message:"Invalid resolver strategy specified."},7:{level:4,message:"Constructor Parameter with index cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?"},8:{level:4,message:"Self binding behavior only supports events."},9:{level:4,message:"The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">"},10:{level:4,message:"The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements."},11:{level:4,message:"Only property bindings and string interpolation bindings can be signaled. Trigger, delegate and call bindings cannot be signaled."},12:{level:4,message:"Signal name is required."},14:{level:4,message:"Property cannot be assigned."},15:{level:4,message:"Unexpected call context."},16:{level:4,message:"A dependency registration is missing for the interface %s."},17:{level:4,message:"You can only define one default implementation for an interface."},18:{level:4,message:"You cannot observe a setter only property."},19:{level:4,message:"Value for expression is non-repeatable."},20:{level:4,message:"No template compiler found with the specified name. JIT support or a custom compiler is required."},21:{level:4,message:"You cannot combine the containerless custom element option with Shadow DOM."},22:{level:4,message:"A containerless custom element cannot be the root component of an application."},30:{level:4,message:"There are more targets than there are target instructions."},31:{level:4,message:"There are more target instructions than there are targets."},100:{level:4,message:"Invalid start of expression."},101:{level:4,message:"Unconsumed token."},102:{level:4,message:"Double dot and spread operators are not supported."},103:{level:4,message:"Invalid member expression."},104:{level:4,message:"Unexpected end of expression."},105:{level:4,message:"Expected identifier."},106:{level:4,message:'Invalid BindingIdentifier at left hand side of "of".'},107:{level:4,message:"Invalid or unsupported property definition in object literal."},108:{level:4,message:"Unterminated quote in string literal."},109:{level:4,message:"Unterminated template string."},110:{level:4,message:"Missing expected token."},111:{level:4,message:"Unexpected character."},150:{level:4,message:"Left hand side of expression is not assignable."},151:{level:4,message:'Unexpected keyword "of"'},401:{level:3,message:"AttributePattern is missing a handler for '%s'."},402:{level:3,message:"AttributePattern handler for '%s' is not a function."},800:{level:4,message:"Property '%s' is being dirty-checked."},801:{level:3,message:"Property '%s' is being dirty-checked."},2e3:{level:4,message:"Router has not been activated."},2001:{level:4,message:"Router has already been activated."},2002:{level:4,message:"Failed to resolve all viewports."},2003:{level:4,message:"Browser navigation has already been activated."},2004:{level:4,message:"LinkHandler has already been activated."},1001:{level:2,message:"DOM already initialized. Destroying and re-initializing.."},1e4:{level:1,message:"%s"}},a={objName:"marker",methodName:"noop",params:n.f.emptyArray,depth:-1,prev:null,next:null};class c{constructor(t,e,s){this.objName=t,this.methodName=e,this.params=s,this.objName=t,this.methodName=e,this.depth=c.stack.length,this.params=s,this.next=a,this.prev=c.tail,c.tail.next=this,c.tail=this,c.stack.push(this)}static reset(){let t=c.head,e=null;for(;null!=t;)e=t.next,t.next=null,t.prev=null,t.params=null,t=e;c.head=a,c.tail=a,c.stack=[]}static enter(t,e,s){return new c(t,e,s)}static leave(){return c.stack.pop()}}c.head=a,c.tail=a,c.stack=[];n.k;const h={rendering:!0,binding:!0,observation:!0,beforeAttach:!0,mounting:!0,di:!0,lifecycle:!0,jit:!0};const l=Object.prototype.toString;function u(t,e=0){return null!=t.params&&t.params.length>e?function(t){const e=[];2097152&t&&e.push("mustEvaluate");16777216&t&&e.push("isCollectionMutation");16&t&&e.push("updateTargetInstance");32&t&&e.push("updateSourceExpression");64&t&&e.push("fromAsyncFlush");128&t&&e.push("fromSyncFlush");256&t&&e.push("fromTick");1024&t&&e.push("fromStartTask");2048&t&&e.push("fromStopTask");4096&t&&e.push("fromBind");8192&t&&e.push("fromUnbind");16384&t&&e.push("fromAttach");32768&t&&e.push("fromDetach");65536&t&&e.push("fromCache");131072&t&&e.push("fromDOMEvent");262144&t&&e.push("fromLifecycleTask");4194304&t&&e.push("isTraversingParentScope");67108864&t&&e.push("allowParentScopeTraversal");1&t&&e.push("getterSetterStrategy");2&t&&e.push("proxyStrategy");1073741824&t&&e.push("secondaryExpression");if(0===e.length)return"none";return e.join("|")}(t.params[e]):"none"}function d(t){let e;return e=void 0===t?"undefined":null===t?"null":void 0!==t.constructor?t.constructor.description?`Resource{'${t.constructor.description.name}'}`:t.constructor.name:"string"==typeof t?`'${t}'`:l.call(t),e}function p(t,e=0){return null!=t.params&&t.params.length>e?d(t.params[e]):"undefined"}function f(t,e=0){let s;if(null!=t.params&&t.params.length>e){const n=t.params[e];return s=null!=n&&null!=n.bindingContext?d(n.bindingContext):"undefined",`Scope{${s}}`}return"undefined"}function b(t,e=0){if(null!=t.params&&t.params.length>e){const s=t.params[e];return"string"==typeof s?`'${s}'`:void 0!==s&&Reflect.has(s,"friendlyName")?s.friendlyName:d(s)}return"undefined"}function g(t,e=0){if(null!=t.params&&t.params.length>e){const s=t.params[e];return"string"==typeof s?`'${s}'`:s.toString()}return"undefined"}const m={$hydrate:t=>u(t),render:t=>`${u(t)},IDOM,IContainer,${p(t,3)}`,addBinding:t=>`${p(t)},${p(t,1)}`,addComponent:t=>`${p(t)},${p(t,1)}`},v={$bind:t=>u(t),$unbind:t=>u(t),connect:t=>u(t),constructor(t){switch(t.objName){case"ArrayObserver":case"MapObserver":case"SetObserver":return u(t);case"SetterObserver":case"BindableObserver":return`${u(t)},${p(t,1)},${g(t,2)}`;case"ProxyObserver":return p(t);case"ProxySubscriberCollection":case"DirtyCheckProperty":return`${p(t,1)},${g(t,2)}`;case"PrimitiveObserver":case"PropertyAccessor":return`${p(t)},${g(t,1)}`;default:return""}},lockedBind:t=>u(t),lockedUnbind:t=>u(t),InternalObserversLookup:t=>`${u(t)},${p(t,1)},${g(t,2)}`,BindingContext(t){switch(t.methodName){case"get":return`${f(t)},${g(t,1)},${g(t,2)},${u(t,3)}`;case"getObservers":return u(t);default:return"unknown"}},Scope(t){switch(t.methodName){case"create":return`${u(t)},${p(t,1)},${p(t,2)}`;case"fromOverride":return`${u(t)},${p(t,1)}`;case"fromParent":return`${u(t)},${f(t,1)},${p(t,2)}`;default:return"unknown"}},OverrideContext(t){switch(t.methodName){case"create":return`${u(t)},${p(t,1)},${p(t,2)}`;case"getObservers":return"";default:return"unknown"}}},y={callSource(t){const e=[];switch(t.objName){case"Listener":return t.params[0].type;case"CallBinding":if(null!=t.params)for(let s=0,n=t.params.length;s<n;++s)e.push(p(t,s));return e.join(",");default:return"unknown"}},setValue(t){let e;const s=t.params[0];switch(typeof s){case"undefined":e="undefined";break;case"object":e=null===s?"null":d(s);break;case"string":e=`'${s}'`;break;case"number":e=s.toString();break;default:e=d(s)}return`${e},${u(t,1)}`},flush:t=>u(t),handleChange:t=>`${g(t)},${g(t,1)},${u(t,2)}`,lockScope:t=>f(t)},w={$attach:t=>u(t),$detach:t=>u(t),$cache:t=>u(t),hold:t=>`Node{'${t.params[0].textContent}'}`,release:t=>u(t)},O={$mount:t=>u(t),$unmount:t=>u(t),project:t=>p(t),take:t=>p(t)},k={construct:t=>p(t),Container(t){const e=[];switch(t.methodName){case"get":case"getAll":return b(t);case"register":if(null!=t.params)for(let s=0,n=t.params.length;s<n;++s)e.push(b(t,s));return e.join(",");case"createChild":return"";default:return"unknown"}}},C={Lifecycle(t){switch(t.methodName.slice(0,3)){case"beg":return"";case"enq":return p(t);case"end":case"pro":return u(t);default:return"unknown"}},CompositionCoordinator(t){switch(t.methodName){case"enqueue":return"IController";case"swap":return`IController,${u(t,1)}`;case"processNext":return"";default:return"unknown"}},AggregateLifecycleTask(t){switch(t.methodName){case"addTask":case"removeTask":return p(t);case"complete":return`${g(t,2)}`;default:return"unknown"}}},j={TemplateBinder:t=>""}},function(t,e,s){"use strict";var n=s(4),i=s(0);const r=i.a.createInterface("IAttrSyntaxTransformer").noDefault();var o=s(1),a=s(2),c=s(3);let h=class{constructor(){this.bindingType=4182}compile(t){return new c.l(t.expression,Object(n.q)(t,!1))}};h=Object(o.a)([Object(n.p)("trigger")],h);let l=class{constructor(){this.bindingType=4184}compile(t){return new c.d(t.expression,Object(n.q)(t,!1))}};l=Object(o.a)([Object(n.p)("delegate")],l);let u=class{constructor(){this.bindingType=4183}compile(t){return new c.b(t.expression,Object(n.q)(t,!1))}};u=Object(o.a)([Object(n.p)("capture")],u);let d=class{constructor(){this.bindingType=32}compile(t){const e=Object(n.q)(t,!1);return new c.a(e,t.expression,e)}};d=Object(o.a)([Object(n.p)("attr")],d);let p=class{constructor(){this.bindingType=32}compile(t){return new c.a("style",t.expression,Object(n.q)(t,!1))}};p=Object(o.a)([Object(n.p)("style")],p);let f=class{constructor(){this.bindingType=32}compile(t){return new c.a("class",t.expression,Object(n.q)(t,!1))}};f=Object(o.a)([Object(n.p)("class")],f);let b=class{constructor(){this.bindingType=4128}compile(t){return new a.jb(t.expression,Object(n.q)(t,!1))}};b=Object(o.a)([Object(n.p)("ref")],b);const g=n.d,m=n.i,v=n.k,y=n.l,w=n.n,O=n.o,k=Object.assign(Object.create(null),{id:!0,replace:!0}),C=Object.assign(Object.create(null),{"as-element":!0,replace:!0});function j(t){const e=t.length;let s=0;for(let n=0;n<e;++n)if(s=t.charCodeAt(n),92===s)++n;else{if(58===s)return!0;if(36===s&&123===t.charCodeAt(n+1))return!1}return!1}function S(t,e){return t!==e}class x{constructor(t,e,s,n,i){this.dom=t,this.resources=e,this.attrParser=s,this.exprParser=n,this.attrSyntaxTransformer=i}bind(t){const e=new v(this.dom,t),s=this.resources,n=this.attrSyntaxTransformer,i=t.attributes;let r=0;for(;r<i.length;){const o=i[r],a=this.attrParser.parse(o.name,o.value);if(!0===k[a.target])throw new Error(`Invalid surrogate attribute: ${a.target}`);const c=s.getBindingCommand(a,!0);if(null===c||0==(4096&c.bindingType)){const i=s.getAttributeInfo(a);if(null===i)n.transform(t,a),this.bindPlainAttribute(a,o,e,e);else{if(i.isTemplateController)throw new Error("Cannot have template controller on surrogate element.");this.bindCustomAttribute(a,i,c,e)}}else n.transform(t,a),this.bindPlainAttribute(a,o,e,e);++r}return this.bindChildNodes(t,e,e,null,null,null),e}bindManifest(t,e,s,n,i,r,o){switch(e.nodeName){case"LET":return void this.bindLetElement(t,e);case"SLOT":s.hasSlots=!0}""===(o=e.getAttribute("replaceable"))&&(o="default");let a=e.getAttribute("as-element");null===a&&(a=e.nodeName.toLowerCase());const c=this.resources.getElementInfo(a);null===c?n=new v(this.dom,e):(r=i,i=n=new g(this.dom,e,c)),this.bindChildNodes(e,s,n,i,r,o),this.bindAttributes(e,t,s,n,i,r,o),i===n&&n.isContainerless?e.parentNode.replaceChild(n.marker,e):n.isTarget&&e.classList.add("au")}bindLetElement(t,e){const s=new m(this.dom,e);t.childNodes.push(s);const r=e.attributes;let o=0;for(;o<r.length;){const t=r[o];if("to-binding-context"===t.name){e.removeAttribute("to-binding-context"),s.toBindingContext=!0;continue}const c=this.attrParser.parse(t.name,t.value),h=this.resources.getBindingCommand(c,!1),l=null===h?2048:h.bindingType,u=this.exprParser.parse(c.rawValue,l),d=Object(i.o)(c.target),p=new n.a(d,a.l.toView);s.bindings.push(new n.b(h,p,u,c.rawValue,d)),++o}e.parentNode.replaceChild(s.marker,e)}bindAttributes(t,e,s,n,i,r,o){let a=n,c=void 0,h=void 0;const l=t.attributes;let u=0;for(;u<l.length;){const e=l[u];if(++u,!0===C[e.name])continue;const i=this.attrParser.parse(e.name,e.value),r=this.resources.getBindingCommand(i,!0);if(null===r||0==(4096&r.bindingType)){const l=this.resources.getAttributeInfo(i);null===l?(this.attrSyntaxTransformer.transform(t,i),this.bindPlainAttribute(i,e,s,n)):l.isTemplateController?(h=n.templateController=this.declareTemplateController(i,l,o),a===n?(h.template=n,a=h):(h.templateController=c,h.template=c.template,c.template=h),c=h):this.bindCustomAttribute(i,l,r,n)}else this.attrSyntaxTransformer.transform(t,i),this.bindPlainAttribute(i,e,s,n)}if("INPUT"===t.tagName){const e=t.type;"checkbox"!==e&&"radio"!==e||this.ensureAttributeOrder(n)}!function(t,e,s){const n=s.physicalNode;let i,r=e;for(;S(r,s);)r.template===s?(n.parentNode.replaceChild(r.marker,n),"TEMPLATE"===n.nodeName?(r.physicalNode=n,n.remove()):(i=r.physicalNode=t.createTemplate(),i.content.appendChild(n))):(i=r.physicalNode=t.createTemplate(),i.content.appendChild(r.marker)),n.removeAttribute(r.syntax.rawName),r=r.template}(this.dom,a,n);let d=t.getAttribute("replace");(""===d||null===d&&null!==i&&i.isContainerless&&(16&e.flags)>0)&&(d="default");const p=n===i?r:i;if(null===d||null===p)e.childNodes.push(a);else{const t=new y(d);t.parent=e,t.template=a,p.parts.push(t),null!=e.templateController&&e.templateController.parts.push(t),function(t,e,s){let n,i;n=(512&s.flags)>0?s.marker:s.physicalNode,"TEMPLATE"===n.nodeName?e.physicalNode=n:(i=e.physicalNode=t.createTemplate(),i.content.appendChild(n))}(this.dom,t,a)}}ensureAttributeOrder(t){const e=t.plainAttributes;let s=void 0,n=void 0,i=0;for(let t=0;t<e.length&&i<3;t++)switch(e[t].syntax.target){case"model":case"value":case"matcher":s=t,i++;break;case"checked":n=t,i++}void 0!==n&&void 0!==s&&n<s&&([e[s],e[n]]=[e[n],e[s]])}bindChildNodes(t,e,s,n,i,r){let o,a;for(o="TEMPLATE"===t.nodeName?t.content.firstChild:t.firstChild;null!==o;)switch(o.nodeType){case 1:a=o.nextSibling,this.bindManifest(s,o,e,s,n,i,r),o=a;break;case 3:o=this.bindText(o,s).nextSibling;break;case 4:case 7:case 8:case 10:o=o.nextSibling;break;case 9:case 11:o=o.firstChild}}bindText(t,e){const s=this.exprParser.parse(t.wholeText,2048);if(null!==s){const n=new O(this.dom,t,s);e.childNodes.push(n),function(t){const e=t.physicalNode,s=e.parentNode;for(;null!==e.nextSibling&&3===e.nextSibling.nodeType;)s.removeChild(e.nextSibling);e.textContent="",s.insertBefore(t.marker,e)}(n)}let n=t;for(;null!==n.nextSibling&&3===n.nextSibling.nodeType;)n=n.nextSibling;return n}declareTemplateController(t,e,s){let i;const r=t.rawValue,o=this.resources.getBindingCommand(t,!1);if(!1===e.noMultiBindings&&null===o&&j(r))i=new w(this.dom,t,e,s),this.bindMultiAttribute(i,e,r);else{i=new w(this.dom,t,e,s);const a=null===o?2048:o.bindingType,c=this.exprParser.parse(r,a);i.bindings.push(new n.b(o,e.bindable,c,r,t.target))}return i}bindCustomAttribute(t,e,s,i){let r;const o=t.rawValue;if(!1===e.noMultiBindings&&null===s&&j(o))r=new n.c(t,e),this.bindMultiAttribute(r,e,o);else{r=new n.c(t,e);const i=null===s?2048:s.bindingType,a=this.exprParser.parse(o,i);r.bindings.push(new n.b(s,e.bindable,a,o,t.target))}i.customAttributes.push(r),i.isTarget=!0}bindMultiAttribute(t,e,s){const r=e.bindables,o=s.length;let c=void 0,h=void 0,l=0,u=0;for(let e=0;e<o;++e)if(u=s.charCodeAt(e),92===u)++e;else if(58===u){for(c=s.slice(l,e);s.charCodeAt(++e)<=32;);for(l=e;e<o;++e)if(u=s.charCodeAt(e),92===u)++e;else if(59===u){h=s.slice(l,e);break}void 0===h&&(h=s.slice(l));const d=this.attrParser.parse(c,h),p=Object(i.o)(d.target),f=this.resources.getBindingCommand(d,!1),b=null===f?2048:f.bindingType,g=this.exprParser.parse(h,b);let m=r[p];for(void 0===m&&(m=r[p]=new n.a(p,a.l.toView)),t.bindings.push(new n.b(f,m,g,h,p));e<o&&s.charCodeAt(++e)<=32;);l=e,c=void 0,h=void 0}}bindPlainAttribute(t,e,s,r){const o=this.resources.getBindingCommand(t,!1),a=null===o?2048:o.bindingType,c=t.target,h=t.rawValue;let l;if(0===h.length&&(55|53&a)>0){if(!((55|53&a)>0))return;l=this.exprParser.parse(Object(i.o)(c),a)}else l=this.exprParser.parse(h,a);if((16&r.flags)>0){const e=r.bindables[c];null!=e?(r.bindings.push(new n.b(o,e,l,h,c)),r.isTarget=!0):null!=l&&(r.plainAttributes.push(new n.j(t,o,l)),r.isTarget=!0)}else null!=l?(r.plainAttributes.push(new n.j(t,o,l)),r.isTarget=!0):r===s&&r.plainAttributes.push(new n.j(t,o,l));null==o&&null!=l&&(e.value="")}}const T=i.a.createInterface("ITemplateElementFactory").noDefault(),A={};let I=class{constructor(t){this.dom=t,this.template=t.createTemplate()}static register(t){return i.i.singleton(T,this).register(t)}createTemplate(t){if("string"==typeof t){let e=A[t];if(void 0===e){const s=this.template;s.innerHTML=t;const n=s.content.firstElementChild;null==n||"TEMPLATE"!==n.nodeName||null!=n.nextElementSibling?(this.template=this.dom.createTemplate(),e=s):(s.content.removeChild(n),e=n),A[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.dom.createTemplate();return e.content.appendChild(t),e}return null!=t.parentNode&&t.parentNode.removeChild(t),t}};I=Object(o.a)([Object(o.c)(0,a.H),Object(o.b)("design:paramtypes",[Object])],I);class V{constructor(t,e,s){this.partialDefinition=t,this.surrogate=e,this.template=s,this.instructions=[],this.surrogates=[],this.scopeParts=[],this.parts={}}toDefinition(){const t=this.partialDefinition;return a.v.create({...t,instructions:Object(i.A)(t.instructions,this.instructions),surrogates:Object(i.A)(t.surrogates,this.surrogates),scopeParts:Object(i.A)(t.scopeParts,this.scopeParts),template:this.template,needsCompile:!1,hasSlots:this.surrogate.hasSlots})}}let $=class{constructor(t,e,s,n){this.factory=t,this.attrParser=e,this.exprParser=s,this.attrSyntaxModifier=n}get name(){return"default"}static register(t){return i.i.singleton(a.T,this).register(t)}compile(t,e){const s=a.v.getOrCreate(t);if(null===s.template||void 0===s.template)return s;const i=n.m.getOrCreate(e),{attrParser:r,exprParser:o,attrSyntaxModifier:c,factory:h}=this,l=new x(e.get(a.H),i,r,o,c),u=h.createTemplate(s.template),d=l.bind(u),p=this.compilation=new V(s,d,u),f=d.customAttributes,b=d.plainAttributes,g=f.length,m=b.length;if(g+m>0){let t=0;for(let e=0;g>e;++e)p.surrogates[t]=this.compileCustomAttribute(f[e]),t++;for(let e=0;e<m;++e)p.surrogates[t]=this.compilePlainAttribute(b[e],!0),t++}this.compileChildNodes(d,p.instructions,p.scopeParts);const v=p.toDefinition();return this.compilation=null,v}compileChildNodes(t,e,s){if((8192&t.flags)>0){const n=t.childNodes,i=n.length;let r;for(let t=0;t<i;++t)if(r=n[t],(128&r.flags)>0)e.push([new c.k(r.interpolation)]);else if((32&r.flags)>0){const t=r.bindings,s=[];let n;const i=t.length;for(let e=0;e<i;++e)n=t[e],s[e]=new a.Z(n.expression,n.target);e.push([new a.ab(s,r.toBindingContext)])}else this.compileParentNode(r,e,s)}}compileCustomElement(t,e,s){const n=this.compileAttributes(t,1);n[0]=new a.D(t.res,this.compileBindings(t),this.compileParts(t,s)),e.push(n),this.compileChildNodes(t,e,s)}compilePlainElement(t,e,s){const n=this.compileAttributes(t,0);n.length>0&&e.push(n),this.compileChildNodes(t,e,s)}compileParentNode(t,e,s){switch(511&t.flags){case 16:this.compileCustomElement(t,e,s);break;case 64:this.compilePlainElement(t,e,s);break;case 1:this.compileTemplateController(t,e,s)}}compileTemplateController(t,e,s){const n=this.compileBindings(t),r=[],o=[];this.compileParentNode(t.template,r,o),Object(i.B)(s,o,!1);const c=a.v.create({name:null===t.partName?t.res:t.partName,scopeParts:o,template:t.physicalNode,instructions:r,needsCompile:!1});let h=void 0;if((16384&t.flags)>0){h={};for(const e of t.parts)h[e.name]=this.compilation.parts[e.name]}e.push([new a.E(c,t.res,n,"else"===t.res,h)])}compileBindings(t){let e;if((4096&t.flags)>0){const{bindings:s}=t,n=s.length;e=Array(n);let i=0;for(;i<n;++i)e[i]=this.compileBinding(s[i])}else e=i.f.emptyArray;return e}compileBinding(t){return null===t.command?null===t.expression?new a.lb(t.rawValue,t.bindable.propName):new a.X(t.expression,t.bindable.propName):t.command.compile(t)}compileAttributes(t,e){let s;if((2048&t.flags)>0){const n=t.customAttributes,i=t.plainAttributes,r=n.length,o=i.length;s=Array(e+r+o);for(let t=0;r>t;++t)s[e]=this.compileCustomAttribute(n[t]),e++;for(let t=0;o>t;++t)s[e]=this.compilePlainAttribute(i[t],!1),e++}else s=e>0?Array(e):i.f.emptyArray;return s}compileCustomAttribute(t){const e=this.compileBindings(t);return new a.C(t.res,e)}compilePlainAttribute(t,e){if(null===t.command){const s=t.syntax;if(null===t.expression){const t=s.rawValue;if(e)switch(s.target){case"class":return new c.i(t);case"style":return new c.j(t)}return new c.h(t,s.target)}return new a.X(t.expression,s.target)}return t.command.compile(t)}compileParts(t,e){const s={};if((16384&t.flags)>0){const n=t.parts,i=n.length;let r=e.length;for(let t=0;t<i;++t){const i=n[t];e.includes(i.name)||(e[r++]=i.name);const o=[],c=[];this.compileParentNode(i.template,c,o),this.compilation.parts[i.name]=s[i.name]=a.v.create({name:i.name,scopeParts:o,template:i.physicalNode,instructions:c,needsCompile:!1})}}return s}};$=Object(o.a)([Object(o.c)(0,T),Object(o.c)(1,n.h),Object(o.c)(2,a.J),Object(o.c)(3,r),Object(o.b)("design:paramtypes",[Object,Object,Object,Object])],$);const E=[$,I,class{static register(t){return i.i.singleton(r,this).register(t)}transform(t,e){"bind"===e.command&&function(t,e){switch(t.tagName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e.target;default:return"value"===e.target||"files"===e.target}case"TEXTAREA":case"SELECT":return"value"===e.target;default:switch(e.target){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)&&(e.command="two-way"),e.target=this.map(t.tagName,e.target)}map(t,e){switch(t){case"LABEL":switch(e){case"for":return"htmlFor";default:return e}case"IMG":switch(e){case"usemap":return"useMap";default:return e}case"INPUT":switch(e){case"maxlength":return"maxLength";case"minlength":return"minLength";case"formaction":return"formAction";case"formenctype":return"formEncType";case"formmethod":return"formMethod";case"formnovalidate":return"formNoValidate";case"formtarget":return"formTarget";case"inputmode":return"inputMode";default:return e}case"TEXTAREA":switch(e){case"maxlength":return"maxLength";default:return e}case"TD":case"TH":switch(e){case"rowspan":return"rowSpan";case"colspan":return"colSpan";default:return e}default:switch(e){case"accesskey":return"accessKey";case"contenteditable":return"contentEditable";case"tabindex":return"tabIndex";case"textcontent":return"textContent";case"innerhtml":return"innerHTML";case"scrolltop":return"scrollTop";case"scrollleft":return"scrollLeft";case"readonly":return"readOnly";default:return e}}}}],P=[b,h,l,u,f,p,d];const R=function(){let t=!1;return function(e,s){if(t)throw new Error("Cannot have more than one global MicrotaskFlushRequestor");return t=!0,void 0!==e.queueMicrotask&&e.queueMicrotask.toString().includes("[native code]")?function(t,e){return function(t,e){const s=function(){e()}.bind(void 0);return function(){t.queueMicrotask(s)}.bind(void 0)}(t,e)}(e,s):Promise.toString().includes("[native code]")?function(t){return function(t){const e=function(){t()}.bind(void 0),s=Promise.resolve();return function(){s.then(e)}.bind(void 0)}(t)}(s):function(t,e){return function(t,e){const s=function(){e()}.bind(void 0),n=new t.MutationObserver(s),i=t.document.createTextNode("a"),r=Object.assign(Object.create(null),{a:"b",b:"a"});let o="a";return n.observe(i,{characterData:!0}),function(){i.data=o=r[o]}.bind(void 0)}(t,e)}(e,s)}}(),N=(function(){let t=!1}(),function(){let t=!1;return function(e,s){if(t)throw new Error("Cannot have more than one global SetTimeoutFlushRequestor");return t=!0,function(t,e){let s=-1;const n=function(){s>-1&&(s=-1,e())}.bind(void 0);return{cancel:function(){s>-1&&(t.clearTimeout(s),s=-1)}.bind(void 0),request:function(){-1===s&&(s=t.setTimeout(n,0))}.bind(void 0)}}(e,s)}}()),F=function(){let t=!1;return function(e,s){if(t)throw new Error("Cannot have more than one global RequestAnimationFrameFlushRequestor");return t=!0,function(t,e){let s=-1;const n=function(){s>-1&&(s=-1,e())}.bind(void 0);return{cancel:function(){s>-1&&(t.cancelAnimationFrame(s),s=-1)}.bind(void 0),request:function(){-1===s&&(s=t.requestAnimationFrame(n))}.bind(void 0)}}(e,s)}}(),B=function(){let t=!1;return function(e,s){if(t)throw new Error("Cannot have more than one global PostRequestAnimationFrameFlushRequestor");return t=!0,function(t,e){let s=-1,n=-1;const i=function(){n>-1&&(n=-1,e())}.bind(void 0),r=function(){s>-1&&(s=-1,-1===n&&(n=t.setTimeout(i,0)))}.bind(void 0);return{cancel:function(){s>-1&&(t.cancelAnimationFrame(s),s=-1),n>-1&&(t.clearTimeout(n),n=-1)}.bind(void 0),request:function(){-1===s&&(s=t.requestAnimationFrame(r))}.bind(void 0)}}(e,s)}}(),L=function(){let t=!1;return function(e,s){if(t)throw new Error("Cannot have more than one global RequestIdleCallbackFlushRequestor");t=!0;const n=void 0!==e.requestIdleCallback&&e.requestIdleCallback.toString().includes("[native code]");return function(t,e){let s=-1;const i={timeout:1e3},r=function(){s>-1&&(s=-1,e())}.bind(void 0);return{cancel:n?function(){s>-1&&(t.cancelIdleCallback(s),s=-1)}.bind(void 0):function(){s>-1&&(t.clearTimeout(s),s=-1)}.bind(void 0),request:n?function(){-1===s&&(s=t.requestIdleCallback(r,i))}.bind(void 0):function(){-1===s&&(s=t.setTimeout(r,45))}.bind(void 0)}}(e,s)}}(),M={delay:0,preempt:!1,priority:1,reusable:!0,persistent:!1};let D=class t{constructor(t,e){const s=new a.pb({clock:t,scheduler:this,priority:0}),n=new a.pb({clock:t,scheduler:this,priority:1}),i=new a.pb({clock:t,scheduler:this,priority:2}),r=new a.pb({clock:t,scheduler:this,priority:3}),o=new a.pb({clock:t,scheduler:this,priority:4});this.taskQueue=[s,n,i,r,o];const c=e.window;this.flush=[R(c,s.flush.bind(s)),F(c,n.flush.bind(n)),N(c,i.flush.bind(i)),B(c,r.flush.bind(r)),L(c,o.flush.bind(o))]}static register(e){e.registerResolver(a.P,{resolve(){if(void 0===a.x.scheduler){const s=e.get(a.F),n=e.get(a.H),i=new t(s,n);Reflect.defineProperty(a.x,"scheduler",{value:i,writable:!1,enumerable:!1,configurable:!1})}return a.x.scheduler}})}getTaskQueue(t){return this.taskQueue[t]}yield(t){return this.taskQueue[t].yield()}queueTask(t,e){const{delay:s,preempt:n,priority:i,persistent:r,reusable:o}={...M,...e};return this.taskQueue[i].queueTask(t,{delay:s,preempt:n,persistent:r,reusable:o})}getMicroTaskQueue(){return this.taskQueue[0]}getRenderTaskQueue(){return this.taskQueue[1]}getMacroTaskQueue(){return this.taskQueue[2]}getPostRenderTaskQueue(){return this.taskQueue[3]}getIdleTaskQueue(){return this.taskQueue[4]}yieldMicroTask(){return this.taskQueue[0].yield()}yieldRenderTask(){return this.taskQueue[1].yield()}yieldMacroTask(){return this.taskQueue[2].yield()}yieldPostRenderTask(){return this.taskQueue[3].yield()}yieldIdleTask(){return this.taskQueue[4].yield()}async yieldAll(t=1){for(;t-- >0;)await this.yieldIdleTask(),await this.yieldPostRenderTask(),await this.yieldMacroTask(),await this.yieldRenderTask(),await this.yieldMicroTask()}queueMicroTask(t,e){return this.taskQueue[0].queueTask(t,e)}queueRenderTask(t,e){return this.taskQueue[1].queueTask(t,e)}queueMacroTask(t,e){return this.taskQueue[2].queueTask(t,e)}queuePostRenderTask(t,e){return this.taskQueue[3].queueTask(t,e)}queueIdleTask(t,e){return this.taskQueue[4].queueTask(t,e)}requestFlush(t){switch(t.priority){case 0:return this.flush[t.priority]();case 1:case 2:case 3:case 4:return this.flush[t.priority].request()}}cancelFlush(t){switch(t.priority){case 0:return;case 1:case 2:case 3:case 4:return this.flush[t.priority].cancel()}}};Object(o.a)([i.m,Object(o.b)("design:type",Function),Object(o.b)("design:paramtypes",[]),Object(o.b)("design:returntype",Promise)],D.prototype,"yieldMicroTask",null),Object(o.a)([i.m,Object(o.b)("design:type",Function),Object(o.b)("design:paramtypes",[]),Object(o.b)("design:returntype",Promise)],D.prototype,"yieldRenderTask",null),Object(o.a)([i.m,Object(o.b)("design:type",Function),Object(o.b)("design:paramtypes",[]),Object(o.b)("design:returntype",Promise)],D.prototype,"yieldMacroTask",null),Object(o.a)([i.m,Object(o.b)("design:type",Function),Object(o.b)("design:paramtypes",[]),Object(o.b)("design:returntype",Promise)],D.prototype,"yieldPostRenderTask",null),Object(o.a)([i.m,Object(o.b)("design:type",Function),Object(o.b)("design:paramtypes",[]),Object(o.b)("design:returntype",Promise)],D.prototype,"yieldIdleTask",null),Object(o.a)([i.m,Object(o.b)("design:type",Function),Object(o.b)("design:paramtypes",[Number]),Object(o.b)("design:returntype",Promise)],D.prototype,"yieldAll",null),D=Object(o.a)([Object(o.c)(0,a.F),Object(o.c)(1,a.H),Object(o.b)("design:paramtypes",[Object,c.e])],D);let q=class{constructor(t){this.container=t}static register(t){return i.i.singleton(a.I,this).register(t)}initialize(t){if(this.container.has(a.H,!1))return this.container.get(a.H);let e;return e=void 0!==t?void 0!==t.dom?t.dom:null!==t.host.ownerDocument?new c.e(window,t.host.ownerDocument,Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot):new c.e(window,document,Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot):new c.e(window,document,Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot),i.i.instance(a.H,e).register(this.container),void 0===a.x.scheduler?this.container.register(D):i.i.instance(a.P,a.x.scheduler).register(this.container),e}};q=Object(o.a)([Object(o.c)(0,i.b),Object(o.b)("design:paramtypes",[Object])],q);const U=[q,D],_={register:t=>c.g.register(t).register(...U),createContainer(){return this.register(i.a.createContainer())}};s.d(e,"a",(function(){return K}));const{enter:z,leave:H}=i.g.createTimer("JitHtmlBrowserConfiguration"),K={register:t=>(_.register(t).register(...n.e,...n.f,...n.g,...P,...E),t),createContainer(){return this.register(i.a.createContainer())}}},function(t,e,s){"use strict";(function(t){s.d(e,"a",(function(){return a}));s(6);var n=s(7),i=s(0),r=s(2);function o(){const e=new a;return e.register(n.a),void 0!==t&&t.env,e}class a extends r.h{constructor(t=i.a.createContainer()){super(t)}static start(t){return o().start(t)}static app(t){return o().app(t)}static register(...t){return o().register(...t)}app(t){if(r.u.isType(t)){const e=r.u.getDefinition(t);let s=document.querySelector(e.name);return null===s&&(s=document.body),super.app({host:s,component:t})}return super.app(t)}}}).call(this,s(9))},function(t,e){var s,n,i=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(t){s=r}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var c,h=[],l=!1,u=-1;function d(){l&&c&&(l=!1,c.length?h=c.concat(h):u=-1,h.length&&p())}function p(){if(!l){var t=a(d);l=!0;for(var e=h.length;e;){for(c=h,h=[];++u<e;)c&&c[u].run();u=-1,e=h.length}c=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function b(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];h.push(new f(t,e)),1!==h.length||l||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=b,i.addListener=b,i.once=b,i.off=b,i.removeListener=b,i.removeAllListeners=b,i.emit=b,i.prependListener=b,i.prependOnceListener=b,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,s){var n=s(12),i=s(13);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var r={insert:"head",singleton:!1},o=(n(t.i,i,r),i.locals?i.locals:{});t.exports=o},function(t,e){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(t){"object"==typeof window&&(s=window)}t.exports=s},function(t,e,s){"use strict";var n,i=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},r=function(){var t={};return function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}t[e]=s}return t[e]}}(),o={};function a(t,e,s){for(var n=0;n<e.length;n++){var i={css:e[n][1],media:e[n][2],sourceMap:e[n][3]};o[t][n]?o[t][n](i):o[t].push(b(i,s))}}function c(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var i=s.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var o=r(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var h,l=(h=[],function(t,e){return h[t]=e,h.filter(Boolean).join("\n")});function u(t,e,s,n){var i=s?"":n.css;if(t.styleSheet)t.styleSheet.cssText=l(e,i);else{var r=document.createTextNode(i),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}function d(t,e,s){var n=s.css,i=s.media,r=s.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),r&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var p=null,f=0;function b(t,e){var s,n,i;if(e.singleton){var r=f++;s=p||(p=c(e)),n=u.bind(null,s,r,!1),i=u.bind(null,s,r,!0)}else s=c(e),n=d.bind(null,s,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(s)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}t.exports=function(t,e,s){return(s=s||{}).singleton||"boolean"==typeof s.singleton||(s.singleton=i()),t=s.base?t+s.base:t,e=e||[],o[t]||(o[t]=[]),a(t,e,s),function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){o[t]||(o[t]=[]),a(t,e,s);for(var n=e.length;n<o[t].length;n++)o[t][n]();o[t].length=e.length,0===o[t].length&&delete o[t]}}}},function(t,e,s){(e=s(14)(!1)).push([t.i,":root {\n  /* --main-bg-color: #382901; */\n  --main-bg-color-rgb: 31, 23, 1;\n  --main-bg-color: rgb(var(--main-bg-color-rgb));\n  --inverse-txt-color: #dad8d0;\n\n  --base-fnt-size: 16px;\n}\n\n* {\n  box-sizing: border-box;\n  font-family: 'Ubuntu', serif;\n}\n\nbody {\n  font-size: var(--base-fnt-size);\n  height: 100vh;\n  margin: 0;\n}\n\nmy-app {\n  display: -webkit-box;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n          flex-direction: column;\n  height: 100vh;\n  margin: 0;\n}\n\nheader {\n  background-color: var(--main-bg-color);\n  color: var(--inverse-txt-color);\n  padding: .75em 1em;\n}\n\nheader>h1 {\n  margin: 0;\n}\n\nfooter {\n  background-color: var(--main-bg-color);\n  color: var(--inverse-txt-color);\n  font-size: .75em;\n  padding: .75em 1em;\n  text-align: center;\n}\n\nmain {\n  -webkit-box-flex: 1;\n          flex-grow: 1;\n  margin: 0;\n  overflow-x: auto;\n  padding: 1.75em 1em .75em 0;\n  width: 100vw;\n}\n\n.card:not(:last-of-type) {\n  margin-left: calc(var(--card-width) * -.5);\n}\n\n.card:hover:not(:last-of-type) {\n  margin-left: 0;\n}\n\n.card>.inner-border {\n  bottom: initial;\n  border-radius: 5px;\n  border: 1px solid var(--inverse-txt-color);\n  height: calc(var(--card-height) - 1.25em);\n  pointer-events: none;\n  position: absolute;\n  right: initial;\n  width: calc(var(--card-width) - 1.25em);\n}\n\n.card {\n  --card-height: 200px;\n  --card-width: 250px;\n\n  -webkit-box-align: center;\n\n          align-items: center;\n  background: -webkit-gradient(linear, left top, left bottom, from(rgba(179, 156, 95, 0.5)), to(rgba(150, 117, 24, 0.75))), no-repeat center url('/assets/img/talmud_scroll.jpg');\n  background: linear-gradient(rgba(179, 156, 95, 0.5), rgba(150, 117, 24, 0.75)), no-repeat center url('/assets/img/talmud_scroll.jpg');\n  border-radius: 5px;\n  box-shadow: 1.5rem 0 2rem #222;\n  color: #000;\n  display: -webkit-box;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n          flex-direction: column;\n  height: var(--card-height);\n  -webkit-box-pack: center;\n          justify-content: center;\n  min-width: var(--card-width);\n  position: relative;\n  text-align: center;\n  -webkit-transition: all .15s ease-in-out;\n  transition: all .15s ease-in-out;\n  -webkit-transition: margin .3s ease-in-out;\n  transition: margin .3s ease-in-out;\n  width: var(--card-width);\n}\n\n.card>h3,\n.card>h5,\n.card>div {\n  margin: 0;\n}\n\n.card>h3 {\n  font-size: 26px;\n  font-weight: 900;\n}\n\n.card>h5 {\n  font-size: 12px;\n  font-style: italic;\n  margin-bottom: .75em;\n  margin-top: -30px;\n  -webkit-transition: all .15s ease-in-out;\n  transition: all .15s ease-in-out;\n  display: -webkit-box;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n          flex-direction: column;\n}\n\n.card>h5 a {\n  color: #000;\n}\n\n.card>h5 a:hover {\n  color: #38362f;\n}\n\n.card>h5 button {\n  font-weight: 900;\n  border: 0;\n  border-radius: 5px;\n  background-color: white;\n  color: black;\n  cursor: pointer;\n}\n\n.card:hover>h5 {\n  margin-top: -20px;\n}\n\n.card>div {\n  font-weight: 900;\n}\n\n.card>span {\n  bottom: 5px;\n  font-size: .75em;\n  padding-bottom: 5px;\n  padding-right: 5px;\n  position: absolute;\n  right: 5px;\n}\n\n.card>h3:after {\n  content: \"\";\n  background-color: #38362f;\n  display: inline-block;\n  height: 5px;\n  opacity: .01;\n  margin-bottom: 20px;\n  -webkit-transition: all 0.2s ease-in-out;\n  transition: all 0.2s ease-in-out;\n  -webkit-transition-duration: 0.75s;\n          transition-duration: 0.75s;\n  width: 5%;\n}\n\n.card:hover>h3:after {\n  opacity: 1;\n  width: 100%;\n}\n\nmain>h4 {\n  background-color: var(--main-bg-color);\n  border-radius: 5px;\n  color: var(--inverse-txt-color);\n  height: 200px;\n  margin: 0;\n  padding: 1em .5em;\n  -webkit-text-orientation: upright;\n          text-orientation: upright;\n  -webkit-writing-mode: sideways-lr;\n      -ms-writing-mode: sideways-lr;\n          writing-mode: sideways-lr;\n}\n\n.wrapper {\n  display: -webkit-box;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n          flex-direction: row-reverse;\n  -webkit-box-pack: end;\n          justify-content: flex-end;\n}\n\n\n\n\n\n\n\n.faux-dialog {\n  -webkit-box-align: center;\n          align-items: center;\n  background-color: rgba(var(--main-bg-color-rgb), .9);\n  bottom: 50%;\n  color: var(--inverse-txt-color);\n  display: -webkit-box;\n  display: flex;\n  height: 0;\n  -webkit-box-pack: center;\n          justify-content: center;\n  left: 50%;\n  position: absolute;\n  right: 50%;\n  top: 50%;\n  -webkit-transition: all 0.5s ease-in-out;\n  transition: all 0.5s ease-in-out;\n  width: 0;\n}\n\n.faux-dialog.full {\n  height: calc(100vh - 60px - 4em);\n  left: 1em;\n  right: 0;\n  top: calc(60px + 1em);\n  width: calc(100vw - 2em);\n  bottom: 0;\n  border-radius: 5px;\n}",""]),t.exports=e},function(t,e,s){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s=function(t,e){var s=t[1]||"",n=t[3];if(!n)return s;if(e&&"function"==typeof btoa){var i=(o=n,a=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),r=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[s].concat(r).concat([i]).join("\n")}var o,a,c;return[s].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(s,"}"):s})).join("")},e.i=function(t,s,n){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(n)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(i[o]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);n&&i[c[0]]||(s&&(c[2]?c[2]="".concat(s," and ").concat(c[2]):c[2]=s),e.push(c))}},e}},function(t,e,s){"use strict";s.r(e);var n={};s.r(n),s.d(n,"name",(function(){return jt})),s.d(n,"template",(function(){return St})),s.d(n,"default",(function(){return xt})),s.d(n,"dependencies",(function(){return Tt})),s.d(n,"register",(function(){return It}));var i=s(8);s(6);var r=s(3);const o=0,a=1,c=2,h=3,l={maxRetries:3,interval:1e3,strategy:o};class u{constructor(t){if(this.retryConfig={...l,...void 0!==t?t:{}},this.retryConfig.strategy===c&&this.retryConfig.interval<=1e3)throw new Error("An interval less than or equal to 1 second is not allowed when using the exponential retry strategy")}request(t){return t.retryConfig||(t.retryConfig={...this.retryConfig},t.retryConfig.counter=0),t.retryConfig.requestClone=t.clone(),t}response(t,e){return Reflect.deleteProperty(e,"retryConfig"),t}responseError(t,e,s){const{retryConfig:n}=e,{requestClone:i}=n;return Promise.resolve().then(()=>{if(n.counter<n.maxRetries){const l=void 0===n.doRetry||n.doRetry(t,e);return Promise.resolve(l).then(l=>{if(l){n.counter++;const t=function(t){const{interval:e,strategy:s,minRandomInterval:n,maxRandomInterval:i,counter:r}=t;if("function"==typeof s)return t.strategy(r);switch(s){case o:return d[o](e);case a:return d[a](r,e);case c:return d[c](r,e);case h:return d[h](r,e,n,i);default:throw new Error("Unrecognized retry strategy")}}(n);return new Promise(e=>r.c.window.setTimeout(e,isNaN(t)?0:t)).then(()=>{const t=i.clone();return"function"==typeof n.beforeRetry?n.beforeRetry(t,s):t}).then(t=>{const e={...t,retryConfig:n};return s.fetch(e)})}throw Reflect.deleteProperty(e,"retryConfig"),t})}throw Reflect.deleteProperty(e,"retryConfig"),t})}}const d=[t=>t,(t,e)=>e*t,(t,e)=>1===t?e:e**t/1e3,(t,e,s=0,n=6e4)=>Math.random()*(n-s)+s];class p{constructor(){this.baseUrl="",this.defaults={},this.interceptors=[]}withBaseUrl(t){return this.baseUrl=t,this}withDefaults(t){return this.defaults=t,this}withInterceptor(t){return this.interceptors.push(t),this}useStandardConfiguration(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()}rejectErrorResponses(){return this.withInterceptor({response:f})}withRetry(t){const e=new u(t);return this.withInterceptor(e)}}function f(t){if(!t.ok)throw t;return t}var b=s(1),g=s(2);const m=/^([a-z][a-z0-9+\-.]*:)?\/\//i;let v=class{constructor(t){if(this.dom=t,void 0===t.window.fetch)throw new Error("HttpClient requires a Fetch API implementation, but the current environment doesn't support it. You may need to load a polyfill such as https://github.com/github/fetch");this.dom=t,this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.interceptors=[]}configure(t){let e;if("object"==typeof t){e={defaults:t}}else{if("function"!=typeof t)throw new Error("invalid config");{e=new p,e.baseUrl=this.baseUrl,e.defaults={...this.defaults},e.interceptors=this.interceptors;const s=t(e);Object.prototype.isPrototypeOf.call(p.prototype,s)&&(e=s)}}const s=e.defaults;if(void 0!==s&&Object.prototype.isPrototypeOf.call(Headers.prototype,s.headers))throw new Error("Default headers must be a plain object.");const n=e.interceptors;if(void 0!==n&&n.length){if(n.filter(t=>Object.prototype.isPrototypeOf.call(u.prototype,t)).length>1)throw new Error("Only one RetryInterceptor is allowed.");const t=n.findIndex(t=>Object.prototype.isPrototypeOf.call(u.prototype,t));if(t>=0&&t!==n.length-1)throw new Error("The retry interceptor must be the last interceptor defined.")}return this.baseUrl=e.baseUrl,this.defaults=s,this.interceptors=void 0!==e.interceptors?e.interceptors:[],this.isConfigured=!0,this}fetch(t,e){this.trackRequestStart();let s=this.buildRequest(t,e);return this.processRequest(s,this.interceptors).then(t=>{let e;if(Object.prototype.isPrototypeOf.call(Response.prototype,t))e=Promise.resolve(t);else{if(!Object.prototype.isPrototypeOf.call(Request.prototype,t))throw new Error(`An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got [${t}]`);s=t,e=fetch(s)}return this.processResponse(e,this.interceptors,s)}).then(t=>Object.prototype.isPrototypeOf.call(Request.prototype,t)?this.fetch(t):t).then(t=>(this.trackRequestEnd(),t),t=>{throw this.trackRequestEnd(),t})}buildRequest(t,e){const s=null!==this.defaults?this.defaults:{};let n,i,r;const o=function(t){const e={},s=void 0!==t?t:{};for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]="function"==typeof s[t]?s[t]():s[t]);return e}(s.headers);if(Object.prototype.isPrototypeOf.call(Request.prototype,t))n=t,r=new Headers(n.headers).get("Content-Type");else{e||(e={}),i=e.body;const o=void 0!==i?{body:i}:null,a={...s,headers:{},...e,...o};r=new Headers(a.headers).get("Content-Type"),n=new Request(function(t,e){if(m.test(e))return e;return(void 0!==t?t:"")+e}(this.baseUrl,t),a)}return r||(new Headers(o).has("content-type")?n.headers.set("Content-Type",new Headers(o).get("content-type")):void 0!==i&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(i)&&n.headers.set("Content-Type","application/json")),function(t,e){const s=void 0!==e?e:{};for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&!t.has(e)&&t.set(e,s[e])}(n.headers,o),void 0!==i&&Object.prototype.isPrototypeOf.call(Blob.prototype,i)&&i.type&&n.headers.set("Content-Type",i.type),n}get(t,e){return this.fetch(t,e)}post(t,e,s){return this.callFetch(t,e,s,"POST")}put(t,e,s){return this.callFetch(t,e,s,"PUT")}patch(t,e,s){return this.callFetch(t,e,s,"PATCH")}delete(t,e,s){return this.callFetch(t,e,s,"DELETE")}trackRequestStart(){if(this.isRequesting=!!++this.activeRequestCount,this.isRequesting){const t=r.c.createCustomEvent("aurelia-fetch-client-request-started",{bubbles:!0,cancelable:!0});r.c.window.setTimeout(()=>{r.c.dispatchEvent(t)},1)}}trackRequestEnd(){if(this.isRequesting=!!--this.activeRequestCount,!this.isRequesting){const t=r.c.createCustomEvent("aurelia-fetch-client-requests-drained",{bubbles:!0,cancelable:!0});r.c.window.setTimeout(()=>{r.c.dispatchEvent(t)},1)}}processRequest(t,e){return this.applyInterceptors(t,e,"request","requestError",this)}processResponse(t,e,s){return this.applyInterceptors(t,e,"response","responseError",s,this)}applyInterceptors(t,e,s,n,...i){return(void 0!==e?e:[]).reduce((t,e)=>{const r=e[s],o=e[n];return t.then(r?t=>r.call(e,t,...i):y,o?t=>o.call(e,t,...i):w)},Promise.resolve(t))}callFetch(t,e,s,n){return s||(s={}),s.method=n,e&&(s.body=e),this.fetch(t,s)}};function y(t){return t}function w(t){throw t}v=Object(b.a)([Object(b.c)(0,g.H),Object(b.b)("design:paramtypes",[r.e])],v);s(4),s(7);var O=s(0);class k{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.scheduler=null,this.task=null}get isActive(){return null!==this.task}get length(){return this.pending.length}activate(t){if(this.isActive)throw new Error("Queue has already been activated");this.scheduler=t.scheduler,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.scheduler.queueRenderTask(this.dequeue,{persistent:!0})}deactivate(){if(!this.isActive)throw new Error("Queue has not been activated");this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const s=Array.isArray(t),n=s?t:[t],i=n.map((t,s)=>Array.isArray(e)?e[s]:e).map(t=>void 0!==t?t:1),r=[];for(const t of n){const e={...t};e.cost=i.shift(),r.push(new Promise((t,s)=>{e.resolve=()=>{t(),this.processing=null,this.dequeue()},e.reject=t=>{s(t),this.processing=null,this.dequeue()}})),this.pending.push(e)}return this.dequeue(),s?r:r[0]}dequeue(t){null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=this.processing.cost||0,this.callback(this.processing)))))}clear(){this.pending.splice(0,this.pending.length)}}Object(b.a)([O.m,Object(b.b)("design:type",Function),Object(b.b)("design:paramtypes",[Number]),Object(b.b)("design:returntype",void 0)],k.prototype,"dequeue",null);let C=class{constructor(t,e){this.scheduler=t,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0,callback:()=>{}},this.forwardedState={},this.handlePopstate=t=>this.enqueue(this,"popstate",[t]),this.processCalls=t=>{const e=t;e.target===this&&"forwardState"!==e.methodName&&(e.parameters.push(this.forwardedState.resolve),this.forwardedState.resolve=null,"popstate"===e.methodName&&this.forwardedState.suppressPopstate&&(e.parameters.push(!0),this.forwardedState.suppressPopstate=!1));const s=e.target[e.methodName];O.j.write(1e4,"DEQUEUE",e.methodName,e.parameters),s&&s.apply(e.target,e.parameters),t.resolve()},this.window=e.window,this.history=e.window.history,this.location=e.window.location,this.pendingCalls=new k(this.processCalls)}activate(t){if(this.isActive)throw new Error("Browser navigation has already been activated");this.isActive=!0,this.options.callback=t.callback,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.activate({scheduler:this.scheduler,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this.handlePopstate)}deactivate(){if(!this.isActive)throw new Error("Browser navigation has not been activated");this.window.removeEventListener("popstate",this.handlePopstate),this.pendingCalls.deactivate(),this.options={useUrlFragmentHash:!0,callback:()=>{}},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){const{pathname:t,search:e,hash:s}=this.location;return{path:t,query:e,hash:s,instruction:this.options.useUrlFragmentHash?s.slice(1):t}}go(t,e=!1){return this.enqueue(this.history,"go",[t],e)}pushNavigatorState(t){const{title:e,path:s}=t.currentEntry,n=this.options.useUrlFragmentHash?"#/":"";return this.enqueue(this.history,"pushState",[t,e,`${n}${s}`])}replaceNavigatorState(t){const{title:e,path:s}=t.currentEntry,n=this.options.useUrlFragmentHash?"#/":"";return this.enqueue(this.history,"replaceState",[t,e,`${n}${s}`])}popNavigatorState(){return this.enqueue(this,"popState",[])}popstate(t,e,s=!1){s||this.options.callback({...this.viewerState,event:t,state:this.history.state}),null!=e&&e()}async popState(t){await this.go(-1,!0);const e=this.history.state;if(e&&e.navigationEntry&&!e.navigationEntry.firstEntry)return await this.go(-1,!0),this.pushNavigatorState(e);t()}forwardState(t){this.forwardedState=t}enqueue(t,e,s,n){const i=[],r=[],o=[];if(void 0!==n){let t=null;o.push(new Promise(e=>{t=e})),i.push({target:this,methodName:"forwardState",parameters:[{resolve:t,suppressPopstate:n}]}),r.push(0)}return i.push({target:t,methodName:e,parameters:s}),r.push(1),o.push(this.pendingCalls.enqueue(i,r)[0]),o[0]}};C=Object(b.a)([Object(b.c)(0,g.P),Object(b.c)(1,g.H),Object(b.b)("design:paramtypes",[Object,r.e])],C);class j{constructor(t){this.options={useHref:!0,callback:()=>{}},this.isActive=!1,this.handler=t=>{const e=j.getEventInfo(t,this.window,this.options);e.shouldHandleEvent&&(t.preventDefault(),this.options.callback(e))},this.window=t.window,this.document=t.document}static getEventInfo(t,e,s){const n={shouldHandleEvent:!1,instruction:null,anchor:null},i=n.anchor=t.currentTarget;if(!i||!j.targetIsThisWindow(i,e))return n;if(i.hasAttribute("external"))return n;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return n;const r=g.t.for(i,"goto"),o=void 0!==r?r.viewModel.value:null,a=s.useHref&&i.hasAttribute("href")?i.getAttribute("href"):null;if(!(null!==o&&0!==o.length||null!==a&&0!==a.length))return n;n.anchor=i,n.instruction=o||a;const c=0===t.button;return n.shouldHandleEvent=c,n}static targetIsThisWindow(t,e){const s=t.getAttribute("target");return!s||s===e.name||"_self"===s}activate(t){if(this.isActive)throw new Error("Link handler has already been activated");this.isActive=!0,this.options={...t}}deactivate(){if(!this.isActive)throw new Error("Link handler has not been activated");this.isActive=!1}}function S(t,e){const s=[];let n=t.findIndex(e);for(;n>=0;)s.push(t.splice(n,1)[0]),n=t.findIndex(e);return s}function x(t){if(!t||!t.length)return{};const e={},s=t.replace("+"," ").split("&");for(const t of s){const[s,n]=t.split("=");e[decodeURIComponent(s)]=decodeURIComponent(void 0!==n?n:s)}return e}var T;j.inject=[g.H],function(t){t[t.none=0]="none",t[t.created=1]="created",t[t.loaded=2]="loaded",t[t.initialized=3]="initialized",t[t.added=4]="added"}(T||(T={}));class A{constructor(t=new X(""),e={instruction:"",fullStateInstruction:""},s=null){this.content=t,this.instruction=e,this.contentStatus=0,this.entered=!1,this.fromCache=!1,this.fromHistory=!1,this.reentry=!1,this.content.isComponentType()||null===s||(this.content.componentType=this.toComponentType(s))}get componentInstance(){return this.content.componentInstance}get viewport(){return this.content.viewport}equalComponent(t){return this.content.sameComponent(t.content)}equalParameters(t){return this.content.sameComponent(t.content,!0)&&this.instruction.query===t.instruction.query}reentryBehavior(){return null!==this.content.componentInstance&&"reentryBehavior"in this.content.componentInstance&&void 0!==this.content.componentInstance.reentryBehavior?this.content.componentInstance.reentryBehavior:"default"}isCacheEqual(t){return this.content.sameComponent(t.content,!0)}createComponent(t,e){if(0===this.contentStatus){if(!this.fromCache&&!this.fromHistory)try{this.content.componentInstance=this.toComponentInstance(t)}catch(s){if(void 0===e)throw s;this.content.setParameters({id:this.content.componentName}),this.content.setComponent(e);try{this.content.componentInstance=this.toComponentInstance(t)}catch(t){throw s}}this.contentStatus=1}}destroyComponent(){1===this.contentStatus&&(this.contentStatus=0)}async canEnter(t,e){if(!this.content.componentInstance)return!1;if(!this.content.componentInstance.canEnter)return!0;const s=this.content.componentType?this.content.componentType.parameters:null;this.instruction.parameters=this.content.toSpecifiedParameters(s);const n={...x(this.instruction.query),...this.instruction.parameters},i=this.content.componentInstance.canEnter(n,this.instruction,e);return O.j.write(1e4,"viewport canEnter",i),"boolean"==typeof i?i:"string"==typeof i?[t.router.createViewportInstruction(i,t)]:i}async canLeave(t){if(!this.content.componentInstance||!this.content.componentInstance.canLeave)return!0;const e=this.content.componentInstance.canLeave(t,this.instruction);return O.j.write(1e4,"viewport canLeave",e),e}async enter(t){if(this.reentry||2===this.contentStatus&&!this.entered){if(this.content.componentInstance&&this.content.componentInstance.enter){const e=this.content.componentType?this.content.componentType.parameters:null;this.instruction.parameters=this.content.toSpecifiedParameters(e);const s={...x(this.instruction.query),...this.instruction.parameters};await this.content.componentInstance.enter(s,this.instruction,t)}this.entered=!0}}async leave(t){4===this.contentStatus&&this.entered&&(this.content.componentInstance&&this.content.componentInstance.leave&&await this.content.componentInstance.leave(t,this.instruction),this.entered=!1)}async loadComponent(t,e,s){if(1===this.contentStatus&&!this.entered&&this.content.componentInstance){if(!this.fromCache||!this.fromHistory){const s=e;g.s.forCustomElement(this.content.componentInstance,t.get(g.K),s,t,void 0,void 0).parent=g.u.for(e)}this.contentStatus=2}}unloadComponent(t,e=!1){2===this.contentStatus&&(e?t.push(this):this.contentStatus=1)}initializeComponent(t){2===this.contentStatus&&(this.content.componentInstance.$controller.bind(5120),this.contentStatus=3)}async terminateComponent(t=!1){3===this.contentStatus&&(await this.content.componentInstance.$controller.unbind(10240).wait(),this.contentStatus=2)}addComponent(t){if(3===this.contentStatus){if(this.content.componentInstance.$controller.attach(1024),this.fromCache||this.fromHistory){const e=Array.from(t.getElementsByTagName("*"));for(const t of e){const e=t.getAttribute("au-element-scroll");if(e){const[s,n]=e.split(",");t.removeAttribute("au-element-scroll"),t.scrollTo(+n,+s)}}}this.contentStatus=4}}removeComponent(t,e=!1){if(4===this.contentStatus&&!this.entered){if(e&&null!==t){const e=Array.from(t.getElementsByTagName("*"));for(const t of e)(t.scrollTop>0||t.scrollLeft)&&t.setAttribute("au-element-scroll",`${t.scrollTop},${t.scrollLeft}`)}this.content.componentInstance.$controller.detach(2048),this.contentStatus=3}}async freeContent(t,e,s,n=!1){switch(this.contentStatus){case 4:await this.leave(e),this.removeComponent(t,n);case 3:await this.terminateComponent(n);case 2:this.unloadComponent(s,n);case 1:this.destroyComponent()}}toComponentName(){return this.content.componentName}toComponentType(t){return this.content.isEmpty()?null:this.content.toComponentType(t)}toComponentInstance(t){return this.content.isEmpty()?null:this.content.toComponentInstance(t)}}class I{constructor(t,e,s,n,i,r=null,o={catches:[],source:null}){this.name=t,this.router=e,this.element=s,this.rootComponentType=r,this.options=o,this.path=null,this.content=null,this.nextContent=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.connectedScope=new z(e,i,n,null,this),this.catches.length>0&&(this.content=e.createViewportInstruction(this.catches[0],this.name))}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get enabled(){return this.connectedScope.enabled}set enabled(t){this.connectedScope.enabled=t}get isViewport(){return!1}get isViewportScope(){return!0}get isEmpty(){return null===this.content}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter(t=>t.isViewportScope&&t.viewportScope.name===this.name).map(t=>t.viewportScope)}get source(){return this.options.source||null}get catches(){let t=this.options.catches||[];return"string"==typeof t&&(t=t.split(",")),t}get default(){if(this.catches.length>0)return this.catches[0]}setNextContent(t,e){let s;return s=t instanceof X?t:"string"==typeof t?this.router.instructionResolver.parseViewportInstruction(t):this.router.createViewportInstruction(t),s.viewportScope=this,this.remove=this.router.instructionResolver.isClearViewportInstruction(s)||this.router.instructionResolver.isClearAllViewportsInstruction(s),this.add=this.router.instructionResolver.isAddViewportInstruction(s)&&Array.isArray(this.source),this.add&&(s.componentName=null),void 0!==this.default&&null===s.componentName&&(s.componentName=this.default),this.nextContent=s,!0}canLeave(){return Promise.resolve(!0)}canEnter(){return Promise.resolve(!0)}enter(){return Promise.resolve(!0)}loadContent(){return this.content=this.remove?null:this.nextContent,this.nextContent=null,Promise.resolve(!0)}finalizeContentChange(){this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}abortContentChange(){if(this.nextContent=null,this.add){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}return Promise.resolve()}acceptSegment(t){return null===t&&void 0===t||0===t.length||(t===this.router.instructionResolver.clearViewportInstruction||t===this.router.instructionResolver.addViewportInstruction||t===this.name||(0===this.catches.length||(!!this.catches.includes(t)||!!this.catches.filter(t=>t.includes("*")).length)))}beforeBind(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}beforeUnbind(){null!==this.sourceItem&&null!==this.source&&S(this.source,t=>t===this.sourceItem),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every(t=>t.sourceItem!==e))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){return null!==this.rootComponentType?this.rootComponentType.routes:null}}class V{constructor(t,e){this.handler=t,this.names=e}}class ${constructor(t,e){this.segments=t,this.handlers=e}}class E{constructor(){this.statics=0,this.dynamics=0,this.stars=0}}class P{constructor(t,e,s){this.handler=t,this.params=e,this.isDynamic=s}}class R{constructor(t,e,s){this.invalidChars=t,this.validChars=e,this.repeat=s}equals(t){return this.validChars===t.validChars&&this.invalidChars===t.invalidChars}}class N{constructor(t){this.charSpec=t,this.nextStates=[]}put(t){let e=this.nextStates.find(e=>e.charSpec.equals(t));return void 0===e&&(e=new N(t),this.nextStates.push(e),t.repeat&&e.nextStates.push(e)),e}}const F=new RegExp(`(\\${["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")})`,"g");class B{constructor(t,e){this.caseSensitive=e,this.optional=!1,this.name=t,this.string=t}eachChar(t){const e=this.string,s=e.length;let n=0,i="";if(this.caseSensitive)for(;n<s;++n)i=e.charAt(n),t(new R(null,i,!1));else for(;n<s;++n)i=e.charAt(n),t(new R(null,i.toUpperCase()+i.toLowerCase(),!1))}regex(){return this.string.replace(F,"\\$1")}generate(t,e){return this.string}}class L{constructor(t,e){this.name=t,this.optional=e}eachChar(t){t(new R("/",null,!0))}regex(){return"([^/]+)"}generate(t,e){return e[this.name]=!0,t[this.name]}}class M{constructor(t){this.name=t,this.optional=!1}eachChar(t){t(new R("",null,!0))}regex(){return"(.+)"}generate(t,e){return e[this.name]=!0,t[this.name]}}class D{eachChar(t){}regex(){return""}generate(t,e){return""}}class q{constructor(){this.rootState=new N,this.names={},this.routes=new Map}add(t){if(Array.isArray(t))return void t.forEach(t=>{this.add(t)});let e=this.rootState;const s=[];let n="^";const i=new E,r=[],o=t.handler.name;let a=!0,c=t.path;c.startsWith("/")&&(c=c.slice(1));const h=[],l=c.split("/");let u,d;for(let o=0,c=l.length;o<c;++o){u=l[o];let c=/^:([^?]+)(\?)?$/.exec(u);if(c){const[,e,s]=c;if(e.includes("="))throw new Error(`Parameter ${e} in route ${t} has a default value, which is not supported.`);h.push(d=new L(e,!!s)),r.push(e),i.dynamics++}else if(c=/^\*(.+)$/.exec(u),c)h.push(d=new M(c[1])),r.push(c[1]),i.stars++;else{if(""===u){h.push(new D);continue}h.push(d=new B(u,!0===t.caseSensitive)),i.statics++}const p=e.put(new R(null,"/",!1));let f=p;d.eachChar(t=>{f=f.put(t)});for(let t=0,e=s.length;t<e;t++)s[t].nextStates.push(p);d.optional?(s.push(f),n+=`(?:/${d.regex()})?`):(e=f,n+=`/${d.regex()}`,s.length=0,a=!1)}a&&(e=e.put(new R(null,"/",!1)),n+="/?");const p=[new V(t.handler,r)];if(this.routes.set(t.handler,new $(h,p)),o){const t=Array.isArray(o)?o:[o];for(let e=0;e<t.length;e++)t[e]in this.names||(this.names[t[e]]=new $(h,p))}for(let e=0;e<s.length;e++){const r=s[e];r.handlers=p,r.regex=new RegExp(`${n}$`,t.caseSensitive?"":"i"),r.types=i}return e.handlers=p,e.regex=new RegExp(`${n}$`,t.caseSensitive?"":"i"),e.types=i,e}getRoute(t){return"string"==typeof t?this.names[t]:this.routes.get(t)}handlersFor(t){const e=this.getRoute(t);if(!e)throw new Error(`There is no route named ${t}`);return[...e.handlers]}hasRoute(t){return!!this.getRoute(t)}generate(t,e){const s=this.getRoute(t);if(!s)throw new Error(`There is no route named ${t}`);const n=s.handlers[0].handler;if(n.generationUsesHref)return n.href;const i={...e},r=s.segments,o={};let a="";for(let e=0,s=r.length;e<s;e++){const s=r[e];if(s instanceof D)continue;const n=s.generate(i,o);if(null==n){if(!s.optional)throw new Error(`A value is required for route parameter '${s.name}' in route '${t}'.`)}else a+="/",a+=n}a.startsWith("/")||(a=`/${a}`);for(const t in o)Reflect.deleteProperty(i,t);const c=Object(O.n)(i);return a+=c?`?${c}`:"",a}recognize(t){let e=[this.rootState],s={},n=!1,i=t;const r=i.indexOf("?");if(-1!==r){const t=i.slice(r+1);i=i.slice(0,r),s=Object(O.D)(t)}i=decodeURI(i),i.startsWith("/")||(i=`/${i}`);let o=i.length;o>1&&"/"===i.charAt(o-1)&&(i=i.slice(0,-1),n=!0,--o);for(let t=0;t<o;++t){const s=[],n=i.charAt(t);if(e.forEach(t=>{t.nextStates.forEach(t=>{null!==t.charSpec.validChars?t.charSpec.validChars.includes(n)&&s.push(t):null===t.charSpec.invalidChars||t.charSpec.invalidChars.includes(n)||s.push(t)})}),e=s,0===e.length)break}const a=[];for(let t=0,s=e.length;t<s;t++)e[t].handlers&&a.push(e[t]);a.sort((t,e)=>{if(t.types.stars!==e.types.stars)return t.types.stars-e.types.stars;if(t.types.stars){if(t.types.statics!==e.types.statics)return e.types.statics-t.types.statics;if(t.types.dynamics!==e.types.dynamics)return e.types.dynamics-t.types.dynamics}return t.types.dynamics!==e.types.dynamics?t.types.dynamics-e.types.dynamics:t.types.statics!==e.types.statics?e.types.statics-t.types.statics:0});const c=a[0];if(c&&c.handlers){n&&c.regex.source.endsWith("(.+)$")&&(i=`${i}/`);const t=i.match(c.regex);let e=1;const r=[];return r.queryParams=s,c.handlers.forEach(s=>{const n={};s.names.forEach(s=>{n[s]=t[e++]}),r.push(new P(s.handler,n,s.names.length>0))}),r}}}class U{constructor(t=null,e="",s=[],n=""){this.match=t,this.matching=e,this.instructions=s,this.remaining=n}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.length>0}get hasRemaining(){return null!==this.remaining&&this.remaining.length>0}}class _ extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){S(this,e=>e===t)}}class z{constructor(t,e,s,n=null,i=null,r=null){this.router=t,this.hasScope=e,this.owningScope=s,this.viewport=n,this.viewportScope=i,this.rootComponentType=r,this.id=".",this.parent=null,this.children=[],this.replacedChildren=[],this.path=null,this.enabled=!0,this.childCollections={},this.owningScope=s||this,this.scope=this.hasScope?this:this.owningScope}get isViewport(){return null!==this.viewport}get isViewportScope(){return null!==this.viewportScope}get passThroughScope(){return this.isViewportScope&&this.viewportScope.passThroughScope}get owner(){return this.isViewport?this.viewport:this.isViewportScope?this.viewportScope:null}get enabledChildren(){return this.children.filter(t=>t.enabled)}get hoistedChildren(){const t=this.enabledChildren;for(;t.some(t=>t.passThroughScope);)for(const e of t.slice())if(e.passThroughScope){const s=t.indexOf(e);t.splice(s,1,...e.enabledChildren)}return t}get enabledViewports(){return this.children.filter(t=>t.isViewport&&t.enabled).map(t=>t.viewport)}get viewportInstruction(){return this.isViewportScope?this.viewportScope.content:this.isViewport?this.viewport.content.content:null}getEnabledViewports(t){return t.filter(t=>!t.isViewportScope).map(t=>t.viewport).reduce((t,e)=>(t[e.name]=e,t),{})}getOwnedViewports(t=!1){return this.allViewports(t).filter(t=>t.owningScope===this)}getOwnedScopes(t=!1){const e=this.allScopes(t).filter(t=>t.owningScope===this);for(const t of e.slice())if(t.passThroughScope){const s=e.indexOf(t);e.splice(s,1,...t.getOwnedScopes())}return e}findViewports(t,e,s=!1){const n=[];let i=[];const r=this.getOwnedScopes(),o=r.filter(t=>t.isViewportScope).map(t=>t.viewportScope),a=o.filter(t=>e.every(e=>e.viewportScope!==t)),c={...this.getEnabledViewports(r)};for(const t of e.filter(t=>t.scope===this))c[t.viewportName]=null;const h=new _(...t.slice());let l=null;for(;null!==(l=h.next());)null===l.viewportScope||this.router.instructionResolver.isAddViewportInstruction(l)||(i.push(...this.foundViewportScope(l,l.viewportScope)),n.push(l),S(a,t=>t===l.viewportScope),h.removeCurrent());if(!s)for(;null!==(l=h.next());)l.viewport&&(i.push(...this.foundViewport(l,l.viewport,s)),n.push(l),c[l.viewport.name]=null,h.removeCurrent());for(;null!==(l=h.next());)for(let t of o)if(t.acceptSegment(l.componentName)){if(Array.isArray(t.source)){let e=a.find(e=>e.name===t.name);if(void 0===e||this.router.instructionResolver.isAddViewportInstruction(l)){const s=t.addSourceItem();e=this.getOwnedScopes().filter(t=>t.isViewportScope).map(t=>t.viewportScope).find(t=>t.sourceItem===s)}t=e}i.push(...this.foundViewportScope(l,t)),n.push(l),S(a,t=>t===l.viewportScope),h.removeCurrent();break}for(;null!==(l=h.next());){l.needsViewportDescribed=!0;for(const t in c)if(Object.prototype.hasOwnProperty.call(c,t)){const e=c[t];if(e&&e.wantComponent(l.componentName)){const r=this.foundViewport(l,e,s,!0);n.push(l),i.push(...r),c[t]=null,h.removeCurrent();break}}}if(!s)for(;null!==(l=h.next());){const t=l.viewportName;if(!t||!t.length)continue;l.ownsScope;if(!this.getEnabledViewports(r)[t])continue;const e=c[t];if(e&&e.acceptComponent(l.componentName)){const r=this.foundViewport(l,e,s,!0);n.push(l),i.push(...r),c[t]=null,h.removeCurrent()}}for(;null!==(l=h.next());){const t=[];for(const e in c)if(Object.prototype.hasOwnProperty.call(c,e)){const s=c[e];s&&s.acceptComponent(l.componentName)&&t.push(s)}if(1===t.length){const e=t.shift(),r=this.foundViewport(l,e,s,!0);n.push(l),i.push(...r),c[e.name]=null,h.removeCurrent()}}if(s)for(;null!==(l=h.next());){let t=l.viewport;if(!t){const e=l.viewportName;if(!e||!e.length)continue;l.ownsScope;if(!this.getEnabledViewports(r)[e])continue;t=c[e]}if(t&&t.acceptComponent(l.componentName)){const e=this.foundViewport(l,t,s);n.push(l),i.push(...e),c[t.name]=null,h.removeCurrent()}}return i=[...h,...i],{foundViewports:n,remainingInstructions:i}}foundViewportScope(t,e){t.viewportScope=e,t.needsViewportDescribed=!1;const s=(t.nextScopeInstructions||[]).slice();for(const t of s)null===t.scope&&(t.scope=e.scope.scope);return s}foundViewport(t,e,s,n=!1){t.setViewport(e),n&&(t.needsViewportDescribed=!1);const i=(t.nextScopeInstructions||[]).slice();for(const t of i)null===t.scope&&(t.scope=e.scope);return i}addViewport(t,e,s,n={}){let i=this.getEnabledViewports(this.getOwnedScopes())[t];return e&&i&&null!==i.element&&i.element!==e&&(i.enabled=!1,i=this.getOwnedViewports(!0).find(s=>s.name===t&&s.element===e)||null,i&&(i.enabled=!0)),i||(i=new H(this.router,t,null,null,this.scope,!!n.scope,n),this.addChild(i.connectedScope)),(e||s)&&i.setElement(e,s,n),i}removeViewport(t,e,s){return!((e||s)&&!t.remove(e,s))&&(this.removeChild(t.connectedScope),!0)}addViewportScope(t,e,s={}){const n=new I(t,this.router,e,this.scope,!0,null,s);return this.addChild(n.connectedScope),n}removeViewportScope(t){return this.removeChild(t.connectedScope),!0}addChild(t){this.children.some(e=>e===t)||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}clearReplacedChildren(){this.replacedChildren=[]}disableReplacedChildren(){this.replacedChildren=this.enabledChildren;for(const t of this.replacedChildren)t.enabled=!1}reenableReplacedChildren(){for(const t of this.replacedChildren)t.enabled=!0}allViewports(t=!1,e=!1){return this.allScopes(t,e).filter(t=>t.isViewport).map(t=>t.viewport)}allScopes(t=!1,e=!1){const s=t?this.children.slice():this.enabledChildren;for(const n of s.slice())s.push(...n.allScopes(t,e));return s}reparentViewportInstructions(){const t=this.hoistedChildren.filter(t=>null!==t.viewportInstruction&&t.viewportInstruction.componentName);if(!t.length)return null;for(const e of t){const t=e.reparentViewportInstructions();e.viewportInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map(t=>t.viewportInstruction)}findMatchingRoute(t){if(this.isViewportScope&&!this.passThroughScope)return this.findMatchingRouteInRoutes(t,this.viewportScope.getRoutes());if(this.isViewport)return this.findMatchingRouteInRoutes(t,this.viewport.getRoutes());for(const e of this.enabledChildren){const s=e.findMatchingRoute(t);if(null!==s)return s}return null}async canLeave(){return!(await Promise.all(this.children.map(t=>null!==t.viewport?t.viewport.canLeave():t.canLeave()))).some(t=>!1===t)}findMatchingRouteInRoutes(t,e){if(!Array.isArray(e))return null;const s=(e=e.map(t=>this.ensureProperRoute(t))).map(t=>({path:t.path,handler:{name:t.id,route:t}}));for(let t=0,e=s.length;t<e;t++){const e={...s[t]};e.path+="/*remainingPath",s.push(e)}const n=new U;let i={};(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const r=new q;r.add(s);const o=r.recognize(t);if(void 0!==o&&o.length>0&&(n.match=o[0].handler.route,n.matching=t,i=o[0].params,void 0!==i.remainingPath&&i.remainingPath.length>0&&(n.remaining=i.remainingPath,Reflect.deleteProperty(i,"remainingPath"),n.matching=n.matching.slice(0,n.matching.indexOf(n.remaining)))),n.foundConfiguration){n.instructions=this.router.instructionResolver.cloneViewportInstructions(n.match.instructions,!1,!0);const t=n.instructions.slice();for(;t.length>0;){const e=t.shift();e.addParameters(i),e.route="",null!==e.nextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}n.instructions.length>0&&(n.instructions[0].route=n.matching)}return n}ensureProperRoute(t){return void 0===t.id&&(t.id=t.path),t.instructions=Q.toViewportInstructions(this.router,t.instructions),t}}class H{constructor(t,e,s,n,i,r,o={}){this.router=t,this.name=e,this.element=s,this.container=n,this.options=o,this.nextContent=null,this.forceRemove=!1,this.path=null,this.clear=!1,this.elementResolve=null,this.previousViewportState=null,this.cache=[],this.historyCache=[],this.content=new A,this.connectedScope=new z(t,r,i,this)}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get enabled(){return this.connectedScope.enabled}set enabled(t){this.connectedScope.enabled=t}get isViewport(){return!0}get isViewportScope(){return!1}get isEmpty(){return null===this.content.componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(null!==t.viewport&&t.viewport.forceRemove)return!0;t=t.parent}return!1}setNextContent(t,e){let s;if(s=t instanceof X?t:"string"==typeof t?this.router.instructionResolver.parseViewportInstruction(t):this.router.createViewportInstruction(t),s.setViewport(this),this.clear=this.router.instructionResolver.isClearViewportInstruction(s),this.nextContent=new A(this.clear?void 0:s,e,this.container),this.nextContent.fromHistory=!(!this.nextContent.componentInstance||!e.navigation)&&(!!e.navigation.back||!!e.navigation.forward),this.options.stateful){const t=this.cache.find(t=>this.nextContent.isCacheEqual(t));t?(this.nextContent=t,this.nextContent.fromCache=!0):this.cache.push(this.nextContent)}return this.connectedScope.clearReplacedChildren(),null!==this.nextContent.componentInstance&&this.content.componentInstance===this.nextContent.componentInstance?(this.nextContent=null,!1):!this.content.equalComponent(this.nextContent)||e.navigation.refresh||"refresh"===this.content.reentryBehavior()?(this.connectedScope.disableReplacedChildren(),!0):"disallow"===this.content.reentryBehavior()?(this.nextContent=null,!1):"enter"===this.content.reentryBehavior()?(this.content.reentry=!0,this.nextContent.content.setComponent(this.content.componentInstance),this.nextContent.contentStatus=this.content.contentStatus,this.nextContent.reentry=this.content.reentry,!0):this.options.stateful&&this.content.equalParameters(this.nextContent)?(this.nextContent=null,!1):(this.connectedScope.disableReplacedChildren(),!0)}setElement(t,e,s){if(s=s||{},this.element!==t&&(this.previousViewportState={...this},this.clearState(),this.element=t,s.usedBy&&(this.options.usedBy=s.usedBy),s.default&&(this.options.default=s.default),s.fallback&&(this.options.fallback=s.fallback),s.noLink&&(this.options.noLink=s.noLink),s.noHistory&&(this.options.noHistory=s.noHistory),s.stateful&&(this.options.stateful=s.stateful),this.elementResolve&&this.elementResolve()),this.container!==e&&(this.container=e),!this.content.componentInstance&&(!this.nextContent||!this.nextContent.componentInstance)&&this.options.default){const t=this.router.instructionResolver.parseViewportInstructions(this.options.default);for(const e of t)e.setViewport(this.name),e.scope=this.owningScope,e.default=!0;this.router.goto(t,{append:!0}).catch(t=>{throw t})}}async remove(t,e){return this.element===t&&this.container===e&&(this.content.componentInstance&&await this.content.freeContent(this.element,this.nextContent?this.nextContent.instruction:null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful)),this.doForceRemove&&(await Promise.all(this.historyCache.map(t=>t.freeContent(null,null,this.historyCache,!1))),this.historyCache=[]),!0)}async canLeave(){return!!await this.connectedScope.canLeave()&&this.content.canLeave(this.nextContent?this.nextContent.instruction:null)}async canEnter(){return!!this.clear||null!==(this.nextContent.content||null)&&(await this.waitForElement(),this.nextContent.createComponent(this.container,this.options.fallback),await this.nextContent.loadComponent(this.container,this.element,this),this.nextContent.canEnter(this,this.content.instruction))}async enter(){return O.j.write(1e4,"Viewport enter",this.name),!!this.clear||!(!this.nextContent||!this.nextContent.componentInstance)&&(await this.nextContent.enter(this.content.instruction),this.nextContent.initializeComponent(g.u.for(this.element)),!0)}async loadContent(){return O.j.write(1e4,"Viewport loadContent",this.name),this.content.componentInstance&&!this.nextContent.componentInstance&&(await this.content.leave(this.nextContent.instruction),await this.unloadContent()),this.nextContent.componentInstance&&(this.content.componentInstance!==this.nextContent.componentInstance?this.nextContent.addComponent(this.element):this.connectedScope.reenableReplacedChildren(),this.content.componentInstance&&(await this.content.leave(this.nextContent.instruction),this.content.reentry||this.content.componentInstance===this.nextContent.componentInstance||await this.unloadContent()),this.content=this.nextContent,this.content.reentry=!1),this.clear&&(this.content=new A(void 0,this.nextContent.instruction)),this.nextContent=null,!0}finalizeContentChange(){this.previousViewportState=null,this.connectedScope.clearReplacedChildren()}async abortContentChange(){this.connectedScope.reenableReplacedChildren(),await this.nextContent.freeContent(this.element,this.nextContent.instruction,this.historyCache,this.router.statefulHistory||this.options.stateful),this.previousViewportState&&Object.assign(this,this.previousViewportState)}wantComponent(t){let e=this.options.usedBy||[];return"string"==typeof e&&(e=e.split(",")),e.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;let e=this.options.usedBy;return!e||!e.length||("string"==typeof e&&(e=e.split(",")),!!e.includes(t)||!!e.filter(t=>t.includes("*")).length)}beforeBind(t){this.content.componentInstance&&this.content.initializeComponent(g.u.for(this.element))}async beforeAttach(t){this.enabled=!0,this.content.componentInstance&&(await this.content.enter(this.content.instruction),this.content.addComponent(this.element))}async beforeDetach(t){this.content.componentInstance&&(await this.content.leave(this.content.instruction),this.content.removeComponent(this.element,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))),this.enabled=!1}async beforeUnbind(t){this.content.componentInstance&&await this.content.terminateComponent(!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))}async freeContent(t){const e=this.historyCache.find(e=>e.componentInstance===t);void 0!==e&&(this.forceRemove=!0,await e.freeContent(null,null,this.historyCache,!1),this.forceRemove=!1,S(this.historyCache,t=>t===e))}getRoutes(){let t=null!==this.nextContent&&null!==this.nextContent.content?this.nextContent.content.componentType:this.content.content.componentType;if(null==t){t=g.u.for(this.element).context.componentType}if(null==t)return null;const e=t.routes;return Array.isArray(e)?e:null}async unloadContent(){this.content.removeComponent(this.element,this.router.statefulHistory||this.options.stateful),await this.content.terminateComponent(this.router.statefulHistory||this.options.stateful),this.content.unloadComponent(this.historyCache,this.router.statefulHistory||this.options.stateful),this.content.destroyComponent()}clearState(){this.options={},this.content=new A,this.cache=[]}async waitForElement(){return this.element?Promise.resolve():new Promise(t=>{this.elementResolve=t})}}const K={isName:function(t){return"string"==typeof t},isType:function(t){return g.u.isType(t)},isInstance:function(t){return!K.isName(t)&&!K.isType(t)},getName:function(t){return K.isName(t)?t:K.isType(t)?g.u.getDefinition(t).name:K.getName(t.constructor)},getType:function(t){return K.isName(t)?null:K.isType(t)?t:t.constructor},getInstance:function(t){return K.isName(t)||K.isType(t)?null:t}},W={isName:function(t){return"string"==typeof t},isInstance:function(t){return t instanceof H},getName:function(t){return W.isName(t)?t:t?t.name:null},getInstance:function(t){return W.isName(t)?null:t}},Q={createViewportInstructions:function(t,e,s){let n=null;if((s=s||{}).context)if(n=t.findScope(s.context),"string"==typeof e)if(e.startsWith("/"))n=t.rootScope.scope;else{if(e.startsWith("."))for(e.startsWith("./")&&(e=e.slice(2));e.startsWith("../");)n=n.parent||n,e=e.slice(3);null!==n.path&&(e=`${n.path}/${e}`,n=t.rootScope.scope)}else{e=Q.toViewportInstructions(t,e);for(const t of e)null===t.scope&&(t.scope=n)}return{instructions:e,scope:n}},toViewportInstructions:function(t,e){if(!Array.isArray(e))return Q.toViewportInstructions(t,[e]);const s=[];for(const n of e)if("string"==typeof n)s.push(...t.instructionResolver.parseViewportInstructions(n));else if(n instanceof X)s.push(n);else if(n.component){const e=n,i=t.createViewportInstruction(e.component,e.viewport,e.parameters);void 0!==e.children&&null!==e.children&&(i.nextScopeInstructions=Q.toViewportInstructions(t,e.children)),s.push(i)}else s.push(t.createViewportInstruction(n));return s}};var G,J,Y;!function(t){t.none="none",t.string="string",t.array="array",t.object="object"}(G||(G={}));class X{constructor(t,e,s,n=!0,i=null){this.ownsScope=n,this.nextScopeInstructions=i,this.componentName=null,this.componentType=null,this.componentInstance=null,this.viewportName=null,this.viewport=null,this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none",this.scope=null,this.context="",this.viewportScope=null,this.needsViewportDescribed=!1,this.route=null,this.default=!1,this.instructionResolver=null,this.setComponent(t),this.setViewport(e),this.setParameters(s)}get owner(){return this.viewport||this.viewportScope||null}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}get parameters(){return null!==this.instructionResolver?this.instructionResolver.parseComponentParameters(this.typedParameters):[]}get normalizedParameters(){return null!==this.instructionResolver&&null!==this.typedParameters?this.instructionResolver.stringifyComponentParameters(this.parameters):""}setComponent(t){K.isName(t)?(this.componentName=K.getName(t),this.componentType=null,this.componentInstance=null):K.isType(t)?(this.componentName=K.getName(t),this.componentType=K.getType(t),this.componentInstance=null):K.isInstance(t)&&(this.componentName=K.getName(t),this.componentType=K.getType(t),this.componentInstance=K.getInstance(t))}setViewport(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.viewportName=t,this.viewport=null):(this.viewport=t,null!==t&&(this.viewportName=t.name,this.scope=t.owningScope))}setParameters(t){null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}addParameters(t){if("none"===this.parametersType)return this.setParameters(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.setParameters({...this.parametersRecord,...t})}setInstructionResolver(t){this.instructionResolver=t}isEmpty(){return!this.isComponentName()&&!this.isComponentType()&&!this.isComponentInstance()}isComponentName(){return!!this.componentName&&!this.isComponentType()&&!this.isComponentInstance()}isComponentType(){return null!==this.componentType&&!this.isComponentInstance()}isComponentInstance(){return null!==this.componentInstance}toComponentType(t){if(null!==this.componentType)return this.componentType;if(null!==this.componentName&&"string"==typeof this.componentName&&null!==t&&t.has(g.u.keyFrom(this.componentName),!0)){const e=t.getResolver(g.u.keyFrom(this.componentName));if(null!==e&&void 0!==e.getFactory){const s=e.getFactory(t);if(s)return s.Type}}return null}toComponentInstance(t){return null!==this.componentInstance?this.componentInstance:null!=t?this.isComponentType()?t.get(this.componentType):t.get(g.u.keyFrom(this.componentName)):null}toViewportInstance(t){return null!==this.viewport?this.viewport:t.getViewport(this.viewportName)}toSpecifiedParameters(t){t=t||[];const e=this.parameters,s={};for(const n of t){let t=e.findIndex(t=>t.key===n);if(t>=0){const[i]=e.splice(t,1);s[n]=i.value}else if(t=e.findIndex(t=>void 0===t.key),t>=0){const[i]=e.splice(t,1);s[n]=i.value}}for(const t of e.filter(t=>void 0!==t.key))s[t.key]=t.value;let n=t.length;for(const t of e.filter(t=>void 0===t.key))s[n++]=t.value;return s}toSortedParameters(t){t=t||[];const e=this.parameters,s=[];for(const n of t){let t=e.findIndex(t=>t.key===n);if(t>=0){const n={...e.splice(t,1)[0]};n.key=void 0,s.push(n)}else if(t=e.findIndex(t=>void 0===t.key),t>=0){const n={...e.splice(t,1)[0]};s.push(n)}else s.push({value:void 0})}const n=e.filter(t=>void 0!==t.key);return n.sort((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0),s.push(...n),s.push(...e.filter(t=>void 0===t.key)),s}sameComponent(t,e=!1,s=!1){return!(e&&!this.sameParameters(t,s))&&(s?this.componentType===t.componentType:this.componentName===t.componentName)}sameParameters(t,e=!1){if(!this.sameComponent(t,!1,e))return!1;const s=this.componentType?this.componentType.parameters:[],n=this.toSpecifiedParameters(s),i=t.toSpecifiedParameters(s);return Object.keys(n).every(t=>n[t]===i[t])&&Object.keys(i).every(t=>i[t]===n[t])}sameViewport(t){return null!==this.viewport&&null!==t.viewport?this.viewport===t.viewport:this.scope===t.scope&&(this.viewport?this.viewport.name:this.viewportName)===(t.viewport?t.viewport.name:t.viewportName)}}!function(t){t.default="default",t.disallow="disallow",t.enter="enter",t.refresh="refresh"}(J||(J={}));class Z{constructor(t,e,s){this.hook=t,this.id=s,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of e.include||[])this.includeTargets.push(new tt(t));for(const t of e.exclude||[])this.excludeTargets.push(new tt(t))}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some(e=>e.matches(t)))&&(!this.excludeTargets.length||!this.excludeTargets.some(e=>e.matches(t)))}invoke(t,e){return this.hook(e,t)}}class tt{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(K.isType(t))this.componentType=t,this.componentName=K.getName(t);else{const e=t;e.component&&(this.componentType=K.isType(e.component)?K.getType(e.component):null,this.componentName=K.getName(e.component)),e.viewport&&(this.viewport=W.isInstance(e.viewport)?e.viewport:null,this.viewportName=W.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(new X(""));for(const t of e)if(null!==this.componentName&&this.componentName===t.componentName||null!==this.componentType&&this.componentType===t.componentType||null!==this.viewportName&&this.viewportName===t.viewportName||null!==this.viewport&&this.viewport===t.viewport)return!0;return!1}}!function(t){t.BeforeNavigation="beforeNavigation",t.TransformFromUrl="transformFromUrl",t.TransformToUrl="transformToUrl"}(Y||(Y={}));class et{constructor(){this.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[]},this.lastIdentity=0}addHook(t,e){const s=new Z(t,e||{},++this.lastIdentity);return this.hooks[s.type].push(s),this.lastIdentity}removeHook(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const s=this.hooks[e].findIndex(e=>e.id===t);s>=0&&this.hooks[e].splice(s,1)}}invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}async invoke(t,e,s){for(const n of this.hooks[t])if(!n.wantsMatch||n.matches(s)){const t=await n.invoke(e,s);if("boolean"==typeof t){if(!t)return!1}else s=t}return s}}class st{constructor(t,e){this.nav=t,this.instructions=[],this.link=null,this.linkVisible=null,this.linkActive=null,this.compareParameters=!1,this.children=null,this.visible=!0,this.active="",this.title=e.title,this.meta=e.meta,e.route&&(this.instructions=this.parseRoute(e.route),this.link=this.computeLink(this.instructions)),this.linkActive=null!==e.consideredActive&&void 0!==e.consideredActive?e.consideredActive:this.link,null===this.linkActive||this.linkActive instanceof Function&&!K.isType(this.linkActive)||(this.linkActive=Q.toViewportInstructions(this.nav.router,this.linkActive)),this.execute=e.execute,this.compareParameters=!!e.compareParameters,this.linkVisible=void 0===e.condition||e.condition,this.update()}get hasChildren(){return this.children&&this.children.length?"nav-has-children":""}update(){this.visible=this.computeVisible(),this.link&&this.link.length||this.execute?this.active=this.computeActive():this.active="nav-active"===this.active?"nav-active":this.activeChild()?"nav-active-child":""}executeAction(t){this.execute&&this.execute(this),t.stopPropagation()}toggleActive(){this.active=this.active.startsWith("nav-active")?"":"nav-active"}parseRoute(t){return Q.toViewportInstructions(this.nav.router,t)}computeVisible(){return this.linkVisible instanceof Function?this.linkVisible(this):!!this.linkVisible}computeActive(){if(!Array.isArray(this.linkActive))return this.linkActive(this)?"nav-active":"";const t=this.linkActive,e=this.nav.router.instructionResolver.flattenViewportInstructions(this.nav.router.activeComponents);for(const s of t)if(e.every(t=>!t.sameComponent(s,this.compareParameters&&null!==s.typedParameters)))return"";return"nav-active"}computeLink(t){return this.nav.router.instructionResolver.stringifyViewportInstructions(t)}activeChild(){if(this.children)for(const t of this.children)if(t.active.startsWith("nav-active")||t.activeChild())return!0;return!1}}class nt{constructor(t,e,s=[],n={}){this.router=t,this.name=e,this.routes=s,this.classes=n,this.update()}addRoutes(t){for(const e of t)this.addRoute(this.routes,e);this.update()}update(){this.updateRoutes(this.routes),this.routes=this.routes.slice()}addRoute(t,e){const s=new st(this,e);if(t.push(s),e.children){s.children=[];for(const t of e.children)this.addRoute(s.children,t)}}updateRoutes(t){for(const e of t)e.update(),e.children&&e.children.length&&this.updateRoutes(e.children)}}class it{constructor(t,e,s=0){this.taskQueue=t,this.item=e,this.cost=s,this.done=!1,this.promise=new Promise((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}})}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}canCancel(){return!1}cancel(){}}class rt{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.scheduler=null,this.task=null}get isActive(){return null!==this.task}get length(){return this.pending.length}activate(t){if(this.isActive)throw new Error("TaskQueue has already been activated");this.scheduler=t.scheduler,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.scheduler.queueRenderTask(this.dequeue,{persistent:!0})}deactivate(){if(!this.isActive)throw new Error("TaskQueue has not been activated");this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const s=Array.isArray(t),n=s?t:[t],i=n.map((t,s)=>Array.isArray(e)?e[s]:e).map(t=>void 0!==t?t:1),r=[];for(const t of n)r.push(t instanceof it?t:this.createQueueTask(t,i.shift()));return this.pending.push(...r),this.dequeue(),s?r:r[0]}createQueueTask(t,e){return new it(this,t,e)}dequeue(t){null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=this.processing.cost||0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch(t=>{throw t})))))}clear(){this.pending.splice(0,this.pending.length)}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,s){e(s),this.processing=null,this.dequeue()}}Object(b.a)([O.m,Object(b.b)("design:type",Function),Object(b.b)("design:paramtypes",[Number]),Object(b.b)("design:returntype",void 0)],rt.prototype,"dequeue",null);let ot=class{constructor(t,e){this.scheduler=t,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0,callback:()=>{}},this.forwardedState={eventTask:null,suppressPopstate:!1},this.handlePopstate=t=>{const{eventTask:e,suppressPopstate:s}=this.forwardedState;return this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue(async n=>{const i=t,r=e,o=s;await this.popstate(i,r,o),n.resolve()},1).wait()},this.window=e.window,this.history=e.window.history,this.location=e.window.location,this.pendingCalls=new rt}activate(t){if(this.isActive)throw new Error("Browser navigation has already been activated");this.isActive=!0,this.options.callback=t.callback,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.activate({scheduler:this.scheduler,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this.handlePopstate)}deactivate(){if(!this.isActive)throw new Error("Browser navigation has not been activated");this.window.removeEventListener("popstate",this.handlePopstate),this.pendingCalls.deactivate(),this.options={useUrlFragmentHash:!0,callback:()=>{}},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){const{pathname:t,search:e,hash:s}=this.location;return{path:t,query:e,hash:s,instruction:this.options.useUrlFragmentHash?s.slice(1):t}}go(t,e=!1){const s=this.pendingCalls.createQueueTask(t=>t.resolve(),1);return this.pendingCalls.enqueue([t=>{const n=s,i=e;this.forwardState({eventTask:n,suppressPopstate:i}),t.resolve()},e=>{const s=this.history,n=t;s.go(n),e.resolve()}],[0,1]),s.wait()}pushNavigatorState(t){const{title:e,path:s}=t.currentEntry,n=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue(i=>{const r=this.history,o=t,a=e||"",c=`${n}${s}`;r.pushState(o,a,c),i.resolve()},1).wait()}replaceNavigatorState(t){const{title:e,path:s}=t.currentEntry,n=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue(i=>{const r=this.history,o=t,a=e||"",c=`${n}${s}`;r.replaceState(o,a,c),i.resolve()},1).wait()}popNavigatorState(){const t=this.pendingCalls.createQueueTask(t=>t.resolve(),1);return this.pendingCalls.enqueue(async e=>{const s=t;await this.popState(s),e.resolve()},1),t.wait()}async popState(t){await this.go(-1,!0);const e=this.history.state;e&&e.navigationEntry&&!e.navigationEntry.firstEntry&&(await this.go(-1,!0),await this.pushNavigatorState(e)),await t.execute()}forwardState(t){this.forwardedState=t}async popstate(t,e,s=!1){s||this.options.callback({...this.viewerState,event:t,state:this.history.state}),null!==e&&await e.execute()}};ot=Object(b.a)([Object(b.c)(0,g.P),Object(b.c)(1,g.H),Object(b.b)("design:paramtypes",[Object,r.e])],ot);class at{}const ct=O.a.createInterface("IRouter").withDefault(t=>t.singleton(ht));class ht{constructor(t,e,s,n,i){this.container=t,this.navigator=e,this.navigation=s,this.linkHandler=n,this.instructionResolver=i,this.rootScope=null,this.navs={},this.activeComponents=[],this.appendedInstructions=[],this.options={useHref:!0,statefulHistoryLength:0,useDirectRoutes:!0,useConfiguredRoutes:!0},this.isActive=!1,this.loadedFirst=!1,this.processingNavigation=null,this.lastNavigation=null,this.staleChecks={},this.linkCallback=t=>{let e=t.instruction||"";"string"==typeof e&&e.startsWith("#")&&(e=e.slice(1),e.startsWith("/")||(e=`/${e}`)),this.goto(e,{origin:t.anchor}).catch(t=>{throw t})},this.navigatorCallback=t=>{this.processNavigations(t).catch(t=>{throw t})},this.navigatorSerializeCallback=async(t,e)=>{let s=[];for(const t of e)"string"!=typeof t.instruction&&s.push(...this.instructionResolver.flattenViewportInstructions(t.instruction).filter(t=>null!==t.viewport).map(t=>t.componentInstance)),"string"!=typeof t.fullStateInstruction&&s.push(...this.instructionResolver.flattenViewportInstructions(t.fullStateInstruction).filter(t=>null!==t.viewport).map(t=>t.componentInstance));s=s.filter((t,e,s)=>null!==t&&s.indexOf(t)===e);const n={...t};let i=[];n.fullStateInstruction&&"string"!=typeof n.fullStateInstruction&&(i.push(...n.fullStateInstruction),n.fullStateInstruction=this.instructionResolver.stringifyViewportInstructions(n.fullStateInstruction)),n.instruction&&"string"!=typeof n.instruction&&(i.push(...n.instruction),n.instruction=this.instructionResolver.stringifyViewportInstructions(n.instruction)),i=i.filter((t,e,s)=>null!==t&&null!==t.componentInstance&&s.indexOf(t)===e);const r=[];for(const t of i)await this.freeComponents(t,s,r);return n},this.browserNavigatorCallback=t=>{const e=t.state&&t.state.currentEntry?t.state.currentEntry:{instruction:"",fullStateInstruction:""};e.instruction=t.instruction,e.fromBrowser=!0,this.navigator.navigate(e).catch(t=>{throw t})},this.processNavigations=async t=>{const e=this.processingNavigation=t;this.options.reportCallback&&this.options.reportCallback(e);let s=!1;const n=e.navigation;(n.back||n.forward)&&e.fullStateInstruction&&(s=!0);let i=await this.findInstructions(this.rootScope.scope,e.instruction,e.scope||this.rootScope.scope,!s),r=i.instructions,o=null;e.instruction.length>0&&!i.foundConfiguration&&!i.foundInstructions&&this.unknownRoute(i.remaining),i.foundConfiguration&&(e.path=e.instruction.startsWith("/")?e.instruction.slice(1):e.instruction,o=`${o||""}${i.matching}`,this.rootScope.path=o);const a=[];let c=[];for(const t of r.filter(t=>this.instructionResolver.isClearAllViewportsInstruction(t))){const e=t.scope||this.rootScope.scope;a.push(...e.children.filter(t=>!t.owner.isEmpty).map(t=>t.owner)),null!==e.viewportScope&&c.push(e.viewportScope)}r=r.filter(t=>!this.instructionResolver.isClearAllViewportsInstruction(t));for(const t of r.filter(t=>this.instructionResolver.isAddAllViewportsInstruction(t)))t.setViewport((t.scope||this.rootScope.scope).viewportScope.name),t.scope=t.scope.owningScope;const h=[],l=[];let{found:u,remaining:d}=this.findViewports(r,l),p=100;do{if(!p--)throw console.log("remainingInstructions",d),O.j.error(2002);const n=[],r=await this.hookManager.invokeBeforeNavigation(u,e);if(!1===r)return this.cancelNavigation([...n,...h],e);u=r;for(const t of u){const s=t.owner;null!==s&&(s.path=o,s.setNextContent(t,e)&&n.push(s),S(a,t=>t===s),!this.instructionResolver.isClearViewportInstruction(t)&&null!==t.scope&&null!==t.scope.parent&&t.scope.parent.isViewportScope&&S(c,e=>e===t.scope.parent.viewportScope))}let f=await Promise.all(n.map(t=>t.canLeave()));if(f.some(t=>!1===t))return this.cancelNavigation([...n,...h],e);if(f=await Promise.all(n.map(async t=>{const e=await t.canEnter();return"boolean"==typeof e?!!e&&t.enter():(await this.goto(e,{append:!0}),await t.abortContentChange(),!0)})),f.some(t=>!1===t))return this.cancelNavigation([...n,...h],t);for(const t of n)h.every(e=>e!==t)&&h.push(t);if(l.push(...u),({found:u,remaining:d}=this.findViewports(d,l)),i.hasRemaining&&0===u.length&&0===d.length){let t=new U;const e=l.filter(t=>null!==t.owner&&t.owner.path===o).map(t=>t.owner).filter((t,e,s)=>s.indexOf(t)===e);for(const s of e)if(t=await this.findInstructions(s.scope,i.remaining,s.scope),t.foundConfiguration)break;t.foundInstructions?(i=t,o=`${o||""}/${i.matching}`):this.unknownRoute(t.remaining),this.appendInstructions(t.instructions)}s&&(this.appendedInstructions=this.appendedInstructions.filter(t=>!t.default));let b=this.appendedInstructions.filter(t=>!t.default);if(this.appendedInstructions=this.appendedInstructions.filter(t=>t.default),0===b.length){const t=this.appendedInstructions.findIndex(t=>t.default);t>=0&&(b=this.appendedInstructions.splice(t,1))}for(;b.length>0;){const t=b.shift(),e=l.some(e=>e.sameViewport(t)),s=u.find(e=>e.sameViewport(t)),n=d.find(e=>e.sameViewport(t));t.default&&(e||void 0!==s&&!s.default||void 0!==n&&!n.default)||(void 0!==s&&S(u,t=>t===s),void 0!==n&&S(d,t=>t===n),null!==t.viewport?u.push(t):d.push(t))}0===u.length&&0===d.length&&(u=a.map(t=>{const e=this.createViewportInstruction(this.instructionResolver.clearViewportInstruction,t.isViewport?t:void 0);return t.isViewportScope&&(e.viewportScope=t),e}),u.push(...c.map(t=>{const e=this.createViewportInstruction(this.instructionResolver.clearViewportInstruction);return e.viewportScope=t,e})),c=[])}while(u.length>0||d.length>0);await Promise.all(h.map(t=>t.loadContent())),await this.replacePaths(e),n.new&&!n.first&&!e.repeating&&h.every(t=>t.options.noHistory)&&(e.untracked=!0),h.forEach(t=>{t.finalizeContentChange()}),this.lastNavigation=this.processingNavigation,this.lastNavigation.repeating&&(this.lastNavigation.repeating=!1),this.processingNavigation=null,await this.navigator.finalize(e)},this.hookManager=new et}get isNavigating(){return null!==this.processingNavigation}get statefulHistory(){return void 0!==this.options.statefulHistoryLength&&this.options.statefulHistoryLength>0}activate(t){if(this.isActive)throw new Error("Router has already been activated");this.isActive=!0,this.options={...this.options,...t},void 0!==this.options.hooks&&this.addHooks(this.options.hooks),this.instructionResolver.activate({separators:this.options.separators}),this.navigator.activate(this,{callback:this.navigatorCallback,store:this.navigation,statefulHistoryLength:this.options.statefulHistoryLength,serializeCallback:this.statefulHistory?this.navigatorSerializeCallback:void 0}),this.linkHandler.activate({callback:this.linkCallback,useHref:this.options.useHref}),this.navigation.activate({callback:this.browserNavigatorCallback,useUrlFragmentHash:this.options.useUrlFragmentHash}),this.ensureRootScope()}async loadUrl(){const t={...this.navigation.viewerState,fullStateInstruction:"",replacing:!0,fromBrowser:!1},e=this.navigator.navigate(t);return this.loadedFirst=!0,e}deactivate(){if(!this.isActive)throw new Error("Router has not been activated");this.linkHandler.deactivate(),this.navigator.deactivate(),this.navigation.deactivate()}findScope(t){return null==t?this.rootScope.scope:t instanceof z||t instanceof H?t.scope:this.getClosestScope(t)||this.rootScope.scope}findParentScope(t){return null===t?this.rootScope.scope:t.has(at,!1)&&null===(t=t.parent)?this.rootScope.scope:t.has(at,!0)?t.get(at):this.rootScope.scope}getViewport(t){return this.allViewports().find(e=>e.name===t)||null}setClosestScope(t,e){const s=this.getContainer(t);O.i.instance(at,e).register(s)}getClosestScope(t){const e="resourceResolvers"in t?t:this.getClosestContainer(t);return null===e?null:e.has(at,!0)&&e.get(at)||null}unsetClosestScope(t){this.getContainer(t).resolvers.delete(at)}connectViewport(t,e,s,n,i){const r=this.findParentScope(e);return null===t&&(t=r.addViewport(s,n,e,i),this.setClosestScope(e,t.connectedScope)),t}disconnectViewport(t,e,s){if(!t.connectedScope.parent.removeViewport(t,s,e))throw new Error(`Failed to remove viewport: ${t.name}`);this.unsetClosestScope(e)}connectViewportScope(t,e,s,n,i){const r=this.findParentScope(s);return null===t&&(t=r.addViewportScope(e,n,i),this.setClosestScope(s,t.connectedScope)),t}disconnectViewportScope(t,e){if(!t.connectedScope.parent.removeViewportScope(t))throw new Error(`Failed to remove viewport scope: ${t.path}`);this.unsetClosestScope(e)}allViewports(t=!1,e=!1){return this.rootScope.scope.allViewports(t,e)}goto(t,e){if(e=e||{},"string"==typeof t&&!e.query){const[s,n]=t.split("?");t=s,e.query=n}const s={};e.origin&&(s.context=e.origin);let n=null;if(({instructions:t,scope:n}=Q.createViewportInstructions(this,t,s)),e.append&&this.processingNavigation)return t=Q.toViewportInstructions(this,t),this.appendInstructions(t,n),Promise.resolve();const i={instruction:t,fullStateInstruction:"",scope:n,title:e.title,data:e.data,query:e.query,replacing:e.replace,repeating:e.append,fromBrowser:!1};return this.navigator.navigate(i)}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}checkActive(t){for(const e of t){const t=this.instructionResolver.matchScope(this.activeComponents,e.scope).filter(t=>t.sameComponent(e));if(0===t.length)return!1;if(Array.isArray(e.nextScopeInstructions)&&e.nextScopeInstructions.length>0&&!1===this.instructionResolver.matchChildren(e.nextScopeInstructions,t.map(t=>Array.isArray(t.nextScopeInstructions)?t.nextScopeInstructions:[]).flat()))return!1}return!0}setNav(t,e,s){const n=this.findNav(t);null!=n&&(n.routes=[]),this.addNav(t,e,s)}addNav(t,e,s){let n=this.navs[t];null==n&&(n=this.navs[t]=new nt(this,t,[],s)),n.addRoutes(e),n.update()}updateNav(t){const e=t?[t]:Object.keys(this.navs);for(const t of e)void 0!==this.navs[t]&&null!==this.navs[t]&&this.navs[t].update()}findNav(t){return this.navs[t]}addRoutes(t,e){return[]}removeRoutes(t,e){}addHooks(t){return t.map(t=>this.addHook(t.hook,t.options))}addHook(t,e){return this.hookManager.addHook(t,e)}removeHooks(t){}createViewportInstruction(t,e,s,n=!0,i=null){return this.instructionResolver.createViewportInstruction(t,e,s,n,i)}async findInstructions(t,e,s,n=!1){let i=new U;if("string"==typeof e)if(e=n?await this.hookManager.invokeTransformFromUrl(e,this.processingNavigation):e,Array.isArray(e))i.instructions=e;else{"/"===e&&(e="");const s=this.instructionResolver.parseViewportInstructions(e);if(this.options.useConfiguredRoutes&&!this.hasSiblingInstructions(s)){const n=t.findMatchingRoute(e);if(null!==n&&n.foundConfiguration)i=n;else if(this.options.useDirectRoutes&&(i.instructions=s,i.instructions.length>0)){const t=i.instructions[0].nextScopeInstructions||[];i.remaining=this.instructionResolver.stringifyViewportInstructions(t),i.instructions[0].nextScopeInstructions=null}}else this.options.useDirectRoutes&&(i.instructions=s)}else i.instructions=e;for(const t of i.instructions)null===t.scope&&(t.scope=s);return i}hasSiblingInstructions(t){return null!==t&&(t.length>1||t.some(t=>this.hasSiblingInstructions(t.nextScopeInstructions)))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const s of t)null===s.scope&&(s.scope=e);this.appendedInstructions.push(...t)}checkStale(t,e){const s=this.staleChecks[t];if(void 0===s)return this.staleChecks[t]=e.slice(),!1;if(s.length!==e.length)return this.staleChecks[t]=e.slice(),!1;for(let n=0,i=e.length;n<i;n++)if(s[n]!==e[n])return this.staleChecks[t]=e.slice(),!1;return!0}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.options.useConfiguredRoutes&&this.options.useDirectRoutes?new Error(`No matching configured route or component found for '${t}'`):this.options.useConfiguredRoutes?new Error(`No matching configured route found for '${t}'`):new Error(`No matching route/component found for '${t}'`)}findViewports(t,e,s=!1){const n=[],i=[];for(;t.length;){null===t[0].scope&&(t[0].scope=this.rootScope.scope);const r=t[0].scope,{foundViewports:o,remainingInstructions:a}=r.findViewports(t.filter(t=>t.scope===r),e,s);n.push(...o),i.push(...a),t=t.filter(t=>t.scope!==r)}return{found:n.slice(),remaining:i}}async cancelNavigation(t,e){t.forEach(t=>{t.abortContentChange().catch(t=>{throw t})}),await this.navigator.cancel(e),this.processingNavigation=null,e.resolve()}ensureRootScope(){if(!this.rootScope){const t=this.container.get(g.h).root;this.rootScope=new I("rootScope",this,t.config.host,null,!0,t.config.component)}return this.rootScope}async replacePaths(t){this.rootScope.scope.reparentViewportInstructions();let e=this.rootScope.scope.hoistedChildren.filter(t=>null!==t.viewportInstruction&&!t.viewportInstruction.isEmpty()).map(t=>t.viewportInstruction);e=this.instructionResolver.cloneViewportInstructions(e,!0);const s=[];let{found:n,remaining:i}=this.findViewports(e,s,!0),r=100;for(;i.length;){if(!r--)throw new Error("Failed to find viewport when updating viewer paths.");s.push(...n),({found:n,remaining:i}=this.findViewports(i,s,!0))}this.activeComponents=e,this.activeRoute=t.route;let o=await this.hookManager.invokeTransformToUrl(e,t);"string"!=typeof o&&(o=this.instructionResolver.stringifyViewportInstructions(o,!1,!0)),o=await this.hookManager.invokeTransformToUrl(o,t);const a=t.query&&t.query.length?`?${t.query}`:"";t.path=o+a;const c=[this.createViewportInstruction(this.instructionResolver.clearViewportInstruction)];return c.push(...this.instructionResolver.cloneViewportInstructions(e,this.statefulHistory)),t.fullStateInstruction=c,Promise.resolve()}async freeComponents(t,e,s){const n=t.componentInstance,i=t.viewport;if(null!==n&&null!==i&&!s.some(t=>t===n)){if(!e.some(t=>t===n))return await i.freeContent(n),void s.push(n);if(null!==t.nextScopeInstructions)for(const n of t.nextScopeInstructions)await this.freeComponents(n,e,s)}}getClosestContainer(t){if("context"in t)return t.context;if("$controller"in t)return t.$controller.context;const e=this.CustomElementFor(t);return void 0===e?null:e.context}getContainer(t){return"resourceResolvers"in t?t:Object(g.Hb)(t)?t.get(O.b):"$controller"in t?t.$controller.context.get(O.b):null}CustomElementFor(t){let e=t;for(;null!==e;){const t=e.nodeName.toLowerCase(),s=O.e.getOwn(`${g.u.name}:${t}`,e)||O.e.getOwn(g.u.name,e);if(void 0!==s)return s;e=g.x.getEffectiveParentNode(e)}}}ht.inject=[O.b,class{constructor(){this.entries=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.processNavigations=t=>{const e=t,s={};this.currentEntry===this.uninitializedEntry&&(this.loadState(),this.currentEntry!==this.uninitializedEntry?s.refresh=!0:(s.first=!0,s.new=!0,this.currentEntry={index:0,instruction:"",fullStateInstruction:""},this.entries=[])),void 0===e.index||e.replacing||e.refreshing?e.refreshing||s.refresh?e.index=this.currentEntry.index:e.replacing?(s.replace=!0,s.new=!0,e.index=this.currentEntry.index):(s.new=!0,e.index=void 0!==this.currentEntry.index?this.currentEntry.index+1:this.entries.length):(e.historyMovement=e.index-(void 0!==this.currentEntry.index?this.currentEntry.index:0),e.instruction=void 0!==this.entries[e.index]&&null!==this.entries[e.index]?this.entries[e.index].fullStateInstruction:e.fullStateInstruction,e.replacing=!0,e.historyMovement>0?s.forward=!0:e.historyMovement<0&&(s.back=!0)),this.invokeCallback(e,s,this.currentEntry)},this.uninitializedEntry={instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:""},this.currentEntry=this.uninitializedEntry,this.pendingNavigations=new k(this.processNavigations)}get queued(){return this.pendingNavigations.length}activate(t,e){if(this.isActive)throw new Error("Navigator has already been activated");this.isActive=!0,this.router=t,this.options={...e}}deactivate(){if(!this.isActive)throw new Error("Navigator has not been activated");this.pendingNavigations.clear(),this.isActive=!1}navigate(t){return this.pendingNavigations.enqueue(t)}refresh(){const t=this.currentEntry;return t===this.uninitializedEntry?Promise.reject():(t.replacing=!0,t.refreshing=!0,this.navigate(t))}go(t){const e=(void 0!==this.currentEntry.index?this.currentEntry.index:0)+t;if(e>=this.entries.length)return Promise.reject();const s=this.entries[e];return this.navigate(s)}setEntryTitle(t){return this.currentEntry.title=t,this.saveState()}get titles(){if(this.currentEntry==this.uninitializedEntry)return[];const t=void 0!==this.currentEntry.index?this.currentEntry.index:0;return this.entries.slice(0,t+1).filter(t=>!!t.title).map(t=>t.title?t.title:"")}getState(){const t=this.options.store?{...this.options.store.state}:{};return{state:t,entries:t.entries||[],currentEntry:t.currentEntry||this.uninitializedEntry}}loadState(){const t=this.getState();this.entries=t.entries,this.currentEntry=t.currentEntry}async saveState(t=!1){if(this.currentEntry===this.uninitializedEntry)return Promise.resolve();const e=this.toStoredEntry(this.currentEntry);if(this.entries[void 0!==e.index?e.index:0]=e,void 0!==this.options.serializeCallback&&this.options.statefulHistoryLength>0){const t=this.entries.length-this.options.statefulHistoryLength;for(let e=0;e<t;e++){const s=this.entries[e];"string"==typeof s.instruction&&"string"==typeof s.fullStateInstruction||(this.entries[e]=await this.options.serializeCallback(s,this.entries.slice(t)))}}if(!this.options.store)return Promise.resolve();const s={entries:[],currentEntry:{...this.toStoreableEntry(e)}};for(const t of this.entries)s.entries.push(this.toStoreableEntry(t));return t?this.options.store.pushNavigatorState(s):this.options.store.replaceNavigatorState(s)}toStoredEntry(t){const{previous:e,fromBrowser:s,replacing:n,refreshing:i,untracked:r,historyMovement:o,navigation:a,scope:c,resolve:h,reject:l,...u}=t;return u}async finalize(t){this.currentEntry=t;let e=void 0!==this.currentEntry.index?this.currentEntry.index:0;if(this.currentEntry.untracked)t.fromBrowser&&this.options.store&&await this.options.store.popNavigatorState(),e--,this.currentEntry.index=e,this.entries[e]=this.toStoredEntry(this.currentEntry),await this.saveState();else if(this.currentEntry.replacing)this.entries[e]=this.toStoredEntry(this.currentEntry),await this.saveState();else{if(void 0!==this.options.serializeCallback&&this.options.statefulHistoryLength>0){const t=this.entries.length-this.options.statefulHistoryLength;for(const s of this.entries.slice(e))"string"==typeof s.instruction&&"string"==typeof s.fullStateInstruction||await this.options.serializeCallback(s,this.entries.slice(t,e))}this.entries=this.entries.slice(0,e),this.entries.push(this.toStoredEntry(this.currentEntry)),await this.saveState(!0)}this.currentEntry.resolve&&this.currentEntry.resolve()}async cancel(t){t.fromBrowser&&this.options.store&&(t.navigation&&t.navigation.new?await this.options.store.popNavigatorState():await this.options.store.go(-(t.historyMovement||0),!0)),this.currentEntry.resolve&&this.currentEntry.resolve()}invokeCallback(t,e,s){const n={...t};n.navigation=e,n.previous=this.toStoredEntry(s),O.j.write(1e4,"callback",n,n.previous,this.entries),this.options.callback&&this.options.callback(n)}toStoreableEntry(t){const e={...t};return e.instruction&&"string"!=typeof e.instruction&&(e.instruction=this.router.instructionResolver.stringifyViewportInstructions(e.instruction)),e.fullStateInstruction&&"string"!=typeof e.fullStateInstruction&&(e.fullStateInstruction=this.router.instructionResolver.stringifyViewportInstructions(e.fullStateInstruction)),e}},ot,j,class{constructor(){this.separators={viewport:"@",sibling:"+",scope:"/",scopeStart:"(",scopeEnd:")",noScope:"!",parameters:"(",parametersEnd:")",parameterSeparator:",",parameterKeySeparator:"=",parameter:"&",add:"+",clear:"-",action:"."}}activate(t){t=t||{},this.separators={...this.separators,...t.separators}}get clearViewportInstruction(){return this.separators.clear}get addViewportInstruction(){return this.separators.add}isClearViewportInstruction(t){return t instanceof X?t.componentName===this.clearViewportInstruction&&!!t.viewportName:t.startsWith(this.clearViewportInstruction)&&t!==this.clearViewportInstruction}isAddViewportInstruction(t){return t instanceof X?t.componentName===this.addViewportInstruction:t===this.addViewportInstruction||t.startsWith(`${this.separators.add}${this.separators.viewport}`)}isClearViewportScopeInstruction(t){return t instanceof X?t.componentName===this.clearViewportInstruction&&!!t.viewportScope:t.startsWith(this.clearViewportInstruction)&&t!==this.clearViewportInstruction}isClearAllViewportsInstruction(t){return t instanceof X?t.componentName===this.clearViewportInstruction&&!t.viewportName:t===this.clearViewportInstruction}isAddAllViewportsInstruction(t){return t instanceof X?t.componentName===this.addViewportInstruction&&!t.viewportName:t===this.addViewportInstruction}createViewportInstruction(t,e,s,n=!0,i=null){const r=new X(t,e,s,n,i);return r.setInstructionResolver(this),r}parseViewportInstructions(t){const e=/^[./]+/.exec(t);let s="";Array.isArray(e)&&e.length>0&&(s=e[0],t=t.slice(s.length));const n=this.parseViewportInstructionsWorker(t,!0).instructions;for(const t of n)t.context=s;return n}parseViewportInstruction(t){const e=this.parseViewportInstructions(t);return e.length?e[0]:this.createViewportInstruction("")}stringifyViewportInstructions(t,e=!1,s=!1){return t.map(t=>this.stringifyViewportInstruction(t,e,s)).filter(t=>t&&t.length).join(this.separators.sibling)}stringifyViewportInstruction(t,e=!1,s=!1){if("string"==typeof t)return this.stringifyAViewportInstruction(t,e);{let n=e,i=!1;if(s){if(t.viewport&&t.viewport.options.noLink)return"";t.needsViewportDescribed||!t.viewport||t.viewport.options.forceDescription||(n=!0),t.viewport&&t.viewport.options.fallback===t.componentName&&(i=!0),!t.needsViewportDescribed&&t.viewportScope&&(n=!0)}const r=t.route,o=t.nextScopeInstructions;let a=t.context;if(null!==r){if(""===r)return Array.isArray(o)?this.stringifyViewportInstructions(o,e,s):"";a+=r.endsWith(this.separators.scope)?r.slice(0,-this.separators.scope.length):r}else a+=this.stringifyAViewportInstruction(t,n,i);if(Array.isArray(o)&&o.length){const t=this.stringifyViewportInstructions(o,e,s);t.length>0&&(a+=1===o.length?`${this.separators.scope}${t}`:`${this.separators.scope}${this.separators.scopeStart}${t}${this.separators.scopeEnd}`)}return a}}stringifyScopedViewportInstructions(t){return Array.isArray(t)?t.map(t=>this.stringifyViewportInstruction(t)).join(this.separators.scope):this.stringifyScopedViewportInstructions([t])}encodeViewportInstructions(t){return encodeURIComponent(this.stringifyViewportInstructions(t)).replace(/\(/g,"%28").replace(/\)/g,"%29")}decodeViewportInstructions(t){return this.parseViewportInstructions(decodeURIComponent(t))}buildScopedLink(t,e){return t&&(e=`/${t}${this.separators.scope}${e}`),e}shouldClearViewports(t){return{clearViewports:t===this.separators.clear||t.startsWith(this.separators.clear+this.separators.add),newPath:t.startsWith(this.separators.clear)?t.slice(2):t}}mergeViewportInstructions(t){const e=[];for(let s of t){"string"==typeof s&&(s=this.parseViewportInstruction(s));const t=e.findIndex(t=>t.sameViewport(s));t>=0?e.splice(t,1,s):e.push(s)}return e}flattenViewportInstructions(t){const e=[];for(const s of t)e.push(s),s.nextScopeInstructions&&e.push(...this.flattenViewportInstructions(s.nextScopeInstructions));return e}cloneViewportInstructions(t,e=!1,s=!1){const n=[];for(const i of t){const t=this.createViewportInstruction((e?i.componentInstance:null)||i.componentType||i.componentName,e&&i.viewport||i.viewportName,null!==i.typedParameters?i.typedParameters:void 0);t.needsViewportDescribed=i.needsViewportDescribed,t.route=i.route,s&&(t.context=i.context),t.viewportScope=e?i.viewportScope:null,t.scope=e?i.scope:null,i.nextScopeInstructions&&(t.nextScopeInstructions=this.cloneViewportInstructions(i.nextScopeInstructions,e,s)),n.push(t)}return n}parseComponentParameters(t,e=!1){if(null==t||0===t.length)return[];if("string"==typeof t){const s=[],n=t.split(this.separators.parameterSeparator);for(const t of n){let n,i;[n,i]=t.split(this.separators.parameterKeySeparator),void 0===i?(i=e?decodeURIComponent(n):n,n=void 0):e&&(n=decodeURIComponent(n),i=decodeURIComponent(i)),s.push({key:n,value:i})}return s}if(Array.isArray(t))return t.map(t=>({key:void 0,value:t}));const s=Object.keys(t);return s.sort(),s.map(e=>({key:e,value:t[e]}))}stringifyComponentParameters(t,e=!1){if(!Array.isArray(t)||0===t.length)return"";const s=this.separators;return t.map(t=>{const n=void 0!==t.key&&e?encodeURIComponent(t.key):t.key,i=e?encodeURIComponent(t.value):t.value;return void 0!==n&&n!==i?n+s.parameterKeySeparator+i:i}).join(s.parameterSeparator)}matchScope(t,e){const s=[];return s.push(...t.filter(t=>t.scope===e)),s.push(...t.filter(t=>t.scope!==e).map(t=>Array.isArray(t.nextScopeInstructions)?this.matchScope(t.nextScopeInstructions,e):[]).flat()),s}matchChildren(t,e){for(const s of t){const t=e.filter(t=>t.sameComponent(s));if(0===t.length)return!1;if(Array.isArray(s.nextScopeInstructions)&&s.nextScopeInstructions.length>0&&!1===this.matchChildren(s.nextScopeInstructions,t.map(t=>Array.isArray(t.nextScopeInstructions)?t.nextScopeInstructions:[]).flat()))return!1}return!0}parseViewportInstructionsWorker(t,e=!1){if(!t)return{instructions:[],remaining:""};t.startsWith(this.separators.scopeStart)&&(t=`${this.separators.scope}${t}`);const s=[];let n=1e3;for(;t.length&&n;)if(n--,t.startsWith(this.separators.scope)){const e=(t=t.slice(this.separators.scope.length)).startsWith(this.separators.scopeStart);e&&(t=t.slice(this.separators.scopeStart.length));const{instructions:n,remaining:i}=this.parseViewportInstructionsWorker(t,e);s.length?s[s.length-1].nextScopeInstructions=n:s.push(...n),t=i}else{if(t.startsWith(this.separators.scopeEnd))return e&&(t=t.slice(this.separators.scopeEnd.length)),{instructions:s,remaining:t};if(t.startsWith(this.separators.sibling)&&!this.isAddViewportInstruction(t)){if(!e)return{instructions:s,remaining:t};t=t.slice(this.separators.sibling.length)}else{const{instruction:e,remaining:n}=this.parseAViewportInstruction(t);s.push(e),t=n}}return{instructions:s,remaining:t}}findNextToken(t,e){const s={};for(const n of e){t.indexOf(n)>-1&&(s[n]=t.indexOf(n))}const n=Math.min(...Object.values(s));for(const t in s)if(s[t]===n)return{token:t,pos:n};return{token:"",pos:-1}}parseAViewportInstruction(t){const e=this.separators,s=[e.parameters,e.viewport,e.noScope,e.scopeEnd,e.scope,e.sibling];let n,i,r=void 0,o=void 0,a=void 0,c=!0;const h=[e.add,e.clear];for(const i of h)if(t===i){r=t,t="",s.shift(),s.shift(),n=e.viewport;break}if(void 0===r)for(const i of h)if(t.startsWith(`${i}${e.viewport}`)){r=i,t=t.slice(`${i}${e.viewport}`.length),s.shift(),s.shift(),n=e.viewport;break}return void 0===r&&(({token:n,pos:i}=this.findNextToken(t,s)),r=-1!==i?t.slice(0,i):t,t=-1!==i?t.slice(i+n.length):"",s.shift(),n===e.parameters&&(({token:n,pos:i}=this.findNextToken(t,[e.parametersEnd])),o=t.slice(0,i),t=t.slice(i+n.length),({token:n}=this.findNextToken(t,s)),t=t.slice(n.length)),s.shift()),n===e.viewport&&(({token:n,pos:i}=this.findNextToken(t,s)),a=-1!==i?t.slice(0,i):t,t=-1!==i?t.slice(i+n.length):""),s.shift(),n===e.noScope&&(c=!1),n!==e.scopeEnd&&n!==e.scope&&n!==e.sibling||(t=`${n}${t}`),{instruction:this.createViewportInstruction(r,a,o,c),remaining:t}}stringifyAViewportInstruction(t,e=!1,s=!1){if("string"==typeof t)return this.stringifyViewportInstruction(this.parseViewportInstruction(t),e,s);{let n=s?"":t.componentName;const i=t.componentType?t.componentType.parameters:null,r=this.stringifyComponentParameters(t.toSortedParameters(i));return r.length>0&&(n+=s?r:`${this.separators.parameters}${r}${this.separators.parametersEnd}`),null===t.viewportName||e||(n+=this.separators.viewport+t.viewportName),t.ownsScope||(n+=this.separators.noScope),n||""}}}];let lt=class{constructor(t){this.router=t,this.name=null,this.routes=null,this.level=0,this.classes={}}get navRoutes(){const t=this.router.navs[this.name];return null!=t?t.routes:[]}get navClasses(){const t=this.router.navs[this.name];return{nav:"",ul:"",li:"",a:"",ulActive:"",liActive:"nav-active",aActive:"",...null!=t?t.classes:{}}}active(t){return"Active"}};Object(b.a)([g.xb,Object(b.b)("design:type",Object)],lt.prototype,"name",void 0),Object(b.a)([g.xb,Object(b.b)("design:type",Object)],lt.prototype,"routes",void 0),Object(b.a)([g.xb,Object(b.b)("design:type",Number)],lt.prototype,"level",void 0),Object(b.a)([g.xb,Object(b.b)("design:type",Object)],lt.prototype,"classes",void 0),lt=Object(b.a)([Object(O.v)(ct,g.L),Object(g.Bb)({name:"au-nav",template:'<template>\n  <nav if.bind="name" class="${name} ${navClasses.nav}">\n    <au-nav routes.bind="navRoutes" classes.bind="navClasses" containerless></au-nav>\n  </nav>\n  <ul if.bind="routes" class="nav-level-${level} ${classes.ul}">\n    <li repeat.for="route of routes" if.bind="route.visible" class="${route.active ? classes.liActive : \'\'} ${route.hasChildren} ${classes.li}">\n      <a if.bind="route.link && route.link.length" goto="${route.link}" class="${route.active ? classes.aActive : \'\'} ${classes.a}" innerhtml.bind="route.title"></a>\n      <a if.bind="route.execute" click.trigger="route.executeAction($event)" href="" class="${route.active ? classes.aActive : \'\'} ${classes.a}" innerhtml.bind="route.title"></a>\n      <span if.bind="(!route.link || !route.link.length) && !route.execute && !route.children" class="${route.active ? classes.aActive : \'\'} ${classes.span} nav-separator" innerhtml.bind="route.title"></span>\n      <a if.bind="(!route.link || !route.link.length) && !route.execute && route.children" click.delegate="route.toggleActive()" href="" class="${route.active ? classes.aActive : \'\'} ${classes.a}" innerhtml.bind="route.title"></a>\n      <au-nav if.bind="route.children" routes.bind="route.children" level.bind="level + 1" classes.bind="classes" containerless></au-nav>\n    </li>\n  </ul>\n</template>'}),Object(b.b)("design:paramtypes",[Object])],lt);const ut=g.u.createInjectable();let dt=class{constructor(t,e,s,n){this.router=t,this.container=s,this.parentViewport=n,this.name="default",this.usedBy="",this.default="",this.fallback="",this.noScope=!1,this.noLink=!1,this.noHistory=!1,this.stateful=!1,this.viewport=null,this.isBound=!1,this.element=e}afterCompile(t){this.container=t.context.get(O.b)}afterUnbind(){this.isBound=!1}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name);let e=this.getAttribute("no-scope",this.noScope);const s={scope:void 0===e||!e};e=this.getAttribute("used-by",this.usedBy),void 0!==e&&(s.usedBy=e),e=this.getAttribute("default",this.default),void 0!==e&&(s.default=e),e=this.getAttribute("fallback",this.fallback),void 0!==e&&(s.fallback=e),e=this.getAttribute("no-link",this.noLink,!0),void 0!==e&&(s.noLink=e),e=this.getAttribute("no-history",this.noHistory,!0),void 0!==e&&(s.noHistory=e),e=this.getAttribute("stateful",this.stateful,!0),void 0!==e&&(s.stateful=e),this.viewport=this.router.connectViewport(this.viewport,this.container,t,this.element,s)}disconnect(){this.viewport&&this.router.disconnectViewport(this.viewport,this.container,this.element),this.viewport=null}beforeBind(t){this.isBound=!0,this.connect(),this.viewport&&this.viewport.beforeBind(t)}beforeAttach(t){return this.viewport?this.viewport.beforeAttach(t):Promise.resolve()}beforeDetach(t){return this.viewport?this.viewport.beforeDetach(t):Promise.resolve()}async beforeUnbind(t){this.viewport&&(await this.viewport.beforeUnbind(t),this.disconnect())}getAttribute(t,e,s=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(s)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}};Object(b.a)([g.xb,Object(b.b)("design:type",String)],dt.prototype,"name",void 0),Object(b.a)([g.xb,Object(b.b)("design:type",String)],dt.prototype,"usedBy",void 0),Object(b.a)([g.xb,Object(b.b)("design:type",String)],dt.prototype,"default",void 0),Object(b.a)([g.xb,Object(b.b)("design:type",String)],dt.prototype,"fallback",void 0),Object(b.a)([g.xb,Object(b.b)("design:type",Boolean)],dt.prototype,"noScope",void 0),Object(b.a)([g.xb,Object(b.b)("design:type",Boolean)],dt.prototype,"noLink",void 0),Object(b.a)([g.xb,Object(b.b)("design:type",Boolean)],dt.prototype,"noHistory",void 0),Object(b.a)([g.xb,Object(b.b)("design:type",Boolean)],dt.prototype,"stateful",void 0),dt=Object(b.a)([Object(g.Bb)({name:"au-viewport",injectable:ut}),Object(b.c)(0,ct),Object(b.c)(1,g.L),Object(b.c)(2,O.b),Object(b.c)(3,ut),Object(b.b)("design:paramtypes",[Object,Object,Object,dt])],dt);const pt=g.u.createInjectable();let ft=class{constructor(t,e,s,n,i){this.router=t,this.container=s,this.parent=n,this.parentController=i,this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1,this.element=e}create(t,e,s,n){const i=n.default;return g.v.getOrCreate({...i,containerless:!0})}afterCompile(t){this.container=t.context.get(O.b)}afterUnbound(){this.isBound=!1}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let s=this.getAttribute("catches",this.catches);void 0!==s&&(e.catches=s),s=this.getAttribute("collection",this.collection,!0),void 0!==s&&(e.collection=s),e.source=this.source||null,this.viewportScope=this.router.connectViewportScope(this.viewportScope,t,this.container,this.element,e)}disconnect(){this.viewportScope&&this.router.disconnectViewportScope(this.viewportScope,this.container),this.viewportScope=null}beforeBind(t){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.beforeBind()}async beforeUnbind(t){return null!==this.viewportScope&&this.viewportScope.beforeUnbind(),this.disconnect(),Promise.resolve()}getAttribute(t,e,s=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(s)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}};Object(b.a)([g.xb,Object(b.b)("design:type",String)],ft.prototype,"name",void 0),Object(b.a)([g.xb,Object(b.b)("design:type",String)],ft.prototype,"catches",void 0),Object(b.a)([g.xb,Object(b.b)("design:type",Boolean)],ft.prototype,"collection",void 0),Object(b.a)([g.xb,Object(b.b)("design:type",Object)],ft.prototype,"source",void 0),ft=Object(b.a)([Object(g.Bb)({name:"au-viewport-scope",template:"<template></template>",containerless:!0,injectable:pt}),Object(b.c)(0,ct),Object(b.c)(1,g.L),Object(b.c)(2,O.b),Object(b.c)(3,pt),Object(b.c)(4,g.G),Object(b.b)("design:paramtypes",[Object,Object,Object,ft,Object])],ft);let bt=class{constructor(t,e,s,n){this.dom=t,this.router=s,this.eventManager=n,this.listener=null,this.hasHref=null,this.activeClass="goto-active",this.element=e}beforeBind(){this.listener=this.eventManager.addEventListener(this.dom,this.element,"click",this.router.linkHandler.handler,g.y.none),this.updateValue();const t=this.router.container.get(g.M);this.observer=t.getObserver(0,this.router,"activeComponents"),this.observer.subscribe(this)}beforeUnbind(){null!==this.listener&&this.listener.dispose(),this.observer.unsubscribe(this)}valueChanged(t){this.updateValue()}updateValue(){if(null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){const t="string"==typeof this.value?this.value:JSON.stringify(this.value);this.element.setAttribute("href",t)}}handleChange(){const t=g.t.for(this.element,"goto").parent,e=Q.createViewportInstructions(this.router,this.value,{context:t}),s=Q.toViewportInstructions(this.router,e.instructions);for(const t of s)null===t.scope&&(t.scope=e.scope);this.router.checkActive(s)?this.element.classList.add(this.activeClass):this.element.classList.remove(this.activeClass)}};Object(b.a)([Object(g.xb)({mode:g.l.toView}),Object(b.b)("design:type",Object)],bt.prototype,"value",void 0),bt=Object(b.a)([Object(g.Ab)("goto"),Object(b.c)(0,g.H),Object(b.c)(1,g.L),Object(b.c)(2,ct),Object(b.c)(3,r.f),Object(b.b)("design:paramtypes",[Object,Object,Object,Object])],bt);let gt=class{constructor(t,e,s,n){this.dom=t,this.router=s,this.eventManager=n,this.eventListener=null,this.element=e}beforeBind(){this.router.options.useHref&&!this.hasGoto()&&(this.eventListener=this.eventManager.addEventListener(this.dom,this.element,"click",this.router.linkHandler.handler,g.y.none)),this.updateValue()}beforeUnbind(){null!==this.eventListener&&this.eventListener.dispose()}valueChanged(){this.updateValue()}updateValue(){this.element.setAttribute("href",this.value)}hasGoto(){const t=this.$controller.parent,e=1!==t.vmKind?t.controllers:void 0;return void 0!==e&&e.some(t=>1===t.vmKind&&t.viewModel instanceof bt)}};Object(b.a)([Object(g.xb)({mode:g.l.toView}),Object(b.b)("design:type",Object)],gt.prototype,"value",void 0),gt=Object(b.a)([Object(g.Ab)("href"),Object(b.c)(0,g.H),Object(b.c)(1,g.L),Object(b.c)(2,ct),Object(b.c)(3,r.f),Object(b.b)("design:paramtypes",[Object,Object,Object,Object])],gt);const mt=[ct],vt=[dt,ft,lt,bt,gt];let yt={},wt=t=>{t.activate(yt)};const Ot={register:t=>t.register(...mt,...vt,g.nb.with(ct).beforeBind().call(wt),g.nb.with(ct).beforeAttach().call(t=>t.loadUrl())),createContainer(){return this.register(O.a.createContainer())}};var kt=s(10),Ct=s.n(kt);const jt="my-app",St='<header>\n    <h1>TorahIs.Life</h1>\n</header>\n\n<main>\n    <div class="wrapper">\n        <div class="card" repeat.for="shiur of shiurim">\n            <span class="inner-border"></span>\n            <h3>${shiur.subseries} - ${shiur.title}</h3>\n            <h5>\n                <div repeat.for="version of shiur.versions">\n                    <a click.delegate="openDialog(shiur, version)" href="javascript:void(0)">${version.name} (${version.duration})</a>\n                    <button type="button" title="Download the shiur" click.delegate="downloadShiur(shiur, version)">&#x21A7;</button>\n                </div>\n            </h5>\n            <div>${shiur.author}</div>\n        </div>\n    </div>\n</main>\n\n<div class="faux-dialog" if.bind="selectedShiur">\n    <div click.delegate="closeDialog()">X</div>\n    <figure>\n        <figcaption>${selectedShiur.subseries} - ${selectedShiur.title} ${selectedVersion.name}. Given by ${selectedShiur.author}.</figcaption>\n        <audio controls src="https://torahislife.azurewebsites.net/api/ShiurRetriever?name=${selectedShiur.getVersionLocation(selectedVersion)}">\n                Your browser does not support the<code>audio</code> element.\n        </audio>\n        \x3c!-- <audio controls src="http://localhost:7071/api/ShiurRetriever?name=${selectedShiur.getVersionLocation(selectedVersion)}">\n            Your browser does not support the<code>audio</code> element.\n        </audio> --\x3e\n    </figure>\n</div>\n\n<footer>Powered by Pinary Development LLC © ${copyrightYears}</footer>';var xt=St;const Tt=[O.i.defer(".css",Ct.a)];let At;function It(t){At||(At=g.u.define({name:jt,template:St,dependencies:Tt})),t.register(At)}class Vt{constructor(t){this.normalize=t=>t.replace(/\s/g,"").toLocaleLowerCase(),Object.assign(this,t),this.versions=t.versions.slice(0)}getVersionLocation(t){return encodeURIComponent(`dist/${this.normalize(this.author)}/${this.normalize(this.series)}/${this.normalize(this.subseries)}/${this.title} - ${this.versions.find(e=>e.name===t.name).name} (${this.date}).mp3`)}}var $t=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let Et=class{constructor(t){this.shiurim=[],this.selectedShiur=void 0,this.selectedVersion=void 0,t.get("/data/data.json").then(t=>t.json()).then(t=>{t.shiurim.forEach(t=>this.shiurim.push(new Vt(t)))})}openDialog(t,e){this.selectedVersion=e,this.selectedShiur=t,document.querySelector(".faux-dialog").classList.add("full")}closeDialog(){document.querySelector(".faux-dialog").classList.remove("full"),setTimeout(()=>{this.selectedShiur=void 0,this.selectedVersion=void 0},250)}get copyrightYears(){const t=new Date(Date.now()).getFullYear();return 2020===t?2020..toString():`2020 - ${t}`}downloadShiur(t,e){window.location.href=`https://torahislife.azurewebsites.net/api/ShiurRetriever?name=${t.getVersionLocation(e)}`}};Et=function(t,e,s,n){var i,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,s,o):i(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o}([Object(g.Bb)(n),$t("design:paramtypes",[v])],Et),i.a.app(Et).start()}]);
//# sourceMappingURL=entry-bundle.js.map